/* styles.css - Diseño Bancario Moderno */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    /* Colores principales - neutros por defecto (se sobrescriben con data-color-theme) */
    --primary: #6b7280;
    --primary-dark: #4b5563;
    --primary-light: #9ca3af;
    --secondary: #6b7280;
    --accent: #e5e7eb;
    --success: #10b981;
    --warning: #f59e0b;
    --danger: #ef4444;
    --dark: #1a1a2e;
    --dark-light: #2d2d44;
    --text-primary: #1f2937;
    --text-secondary: #6b7280;
    --text-light: #9ca3af;
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --bg-tertiary: #f1f5f9;
    --border: #e5e7eb;

    /* Sombras modernas */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

    /* Bordes redondeados */
    --radius-sm: 6px;
    --radius: 8px;
    --radius-md: 10px;
    --radius-lg: 12px;
    --radius-xl: 16px;

    /* Tipografía moderna */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    --font-size-xs: 0.75rem;     /* 12px */
    --font-size-sm: 0.8125rem;   /* 13px */
    --font-size-base: 0.875rem;  /* 14px */
    --font-size-md: 0.9375rem;   /* 15px */
    --font-size-lg: 1rem;        /* 16px */
    --font-size-xl: 1.125rem;    /* 18px */
    --font-size-2xl: 1.25rem;    /* 20px */
    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --tracking-tight: -0.025em;
    --tracking-normal: 0;
    --tracking-wide: 0.025em;

    /* Efecto cebra - colores por defecto (modo claro) */
    --row-even: #ffffff;
    --row-odd: #fafafa;
    --row-hover: #f5f5f5;
}

/* ==================== TEMAS DE COLOR ==================== */
/* Tema Rubí (por defecto - ya definido en :root) */
[data-color-theme="rubi"] {
    --primary: #FF4338;
    --primary-dark: #D32F2F;
    --primary-light: #FF6B6B;
    --secondary: #FF5252;
    --accent: #ffd7d7;
    --row-odd: #fff8f8;
    --row-hover: #ffefef;
}

/* Tema Zafiro (Azul) */
[data-color-theme="zafiro"] {
    --primary: #2196F3;
    --primary-dark: #1565C0;
    --primary-light: #64B5F6;
    --secondary: #42A5F5;
    --accent: #BBDEFB;
    --row-odd: #f0f9ff;
    --row-hover: #e0f2fe;
}

/* Tema Esmeralda (Verde) */
[data-color-theme="esmeralda"] {
    --primary: #4CAF50;
    --primary-dark: #2E7D32;
    --primary-light: #81C784;
    --secondary: #66BB6A;
    --accent: #C8E6C9;
    --row-odd: #f0fdf4;
    --row-hover: #dcfce7;
}

/* Tema Amatista (Púrpura) */
[data-color-theme="amatista"] {
    --primary: #9C27B0;
    --primary-dark: #6A1B9A;
    --primary-light: #BA68C8;
    --secondary: #AB47BC;
    --accent: #E1BEE7;
    --row-odd: #faf5ff;
    --row-hover: #f3e8ff;
}

/* Tema Ámbar (Naranja) */
[data-color-theme="ambar"] {
    --primary: #FF9800;
    --primary-dark: #E65100;
    --primary-light: #FFB74D;
    --secondary: #FFA726;
    --accent: #FFE0B2;
    --row-odd: #fffbeb;
    --row-hover: #fef3c7;
}

/* Tema Grafito (Gris) */
[data-color-theme="grafito"] {
    --primary: #607D8B;
    --primary-dark: #37474F;
    --primary-light: #90A4AE;
    --secondary: #78909C;
    --accent: #CFD8DC;
    --row-odd: #f9fafb;
    --row-hover: #f3f4f6;
}

/* ==================== TEMAS PROFESIONALES ==================== */

/* Tema Corporativo (Navy Blue - Azul Corporativo) */
[data-color-theme="corporativo"] {
    --primary: #1e3a5f;
    --primary-dark: #0d2137;
    --primary-light: #2d5a8a;
    --secondary: #234b7a;
    --accent: #d4e4f7;
    --row-odd: #f5f8fc;
    --row-hover: #e8f0f8;
}

/* Tema Ejecutivo (Charcoal - Gris Ejecutivo) */
[data-color-theme="ejecutivo"] {
    --primary: #2d3436;
    --primary-dark: #1a1d1e;
    --primary-light: #4a5054;
    --secondary: #3d4447;
    --accent: #dfe6e9;
    --row-odd: #f7f8f8;
    --row-hover: #eceeef;
}

/* Tema Océano (Deep Blue - Azul Profundo) */
[data-color-theme="oceano"] {
    --primary: #006994;
    --primary-dark: #004d6d;
    --primary-light: #0088b4;
    --secondary: #0077a3;
    --accent: #cce7f0;
    --row-odd: #f0f9fc;
    --row-hover: #e0f2f7;
}

/* Tema Bosque (Forest Green - Verde Bosque) */
[data-color-theme="bosque"] {
    --primary: #1d4e3e;
    --primary-dark: #0f2d23;
    --primary-light: #2a7258;
    --secondary: #236b4e;
    --accent: #d0e8df;
    --row-odd: #f2f9f6;
    --row-hover: #e5f3ec;
}

/* Tema Vino (Burgundy - Burdeos) */
[data-color-theme="vino"] {
    --primary: #722f37;
    --primary-dark: #4a1f24;
    --primary-light: #9c4049;
    --secondary: #8b3a44;
    --accent: #f0d4d7;
    --row-odd: #fcf5f6;
    --row-hover: #f7e8ea;
}

/* Tema Medianoche (Midnight - Índigo Oscuro) */
[data-color-theme="medianoche"] {
    --primary: #2c3e50;
    --primary-dark: #1a252f;
    --primary-light: #3d566e;
    --secondary: #34495e;
    --accent: #d5dce4;
    --row-odd: #f5f7f9;
    --row-hover: #e8ecf1;
}

/* Tema Titanio (Slate - Pizarra Moderna) */
[data-color-theme="titanio"] {
    --primary: #475569;
    --primary-dark: #1e293b;
    --primary-light: #64748b;
    --secondary: #526077;
    --accent: #e2e8f0;
    --row-odd: #f8fafc;
    --row-hover: #f1f5f9;
}

/* Tema Bronce (Bronze - Cobre Elegante) */
[data-color-theme="bronce"] {
    --primary: #8b5a2b;
    --primary-dark: #5c3a1c;
    --primary-light: #b8763a;
    --secondary: #a06830;
    --accent: #f0e0d0;
    --row-odd: #fdfaf6;
    --row-hover: #f8f0e6;
}

/* Tema Elegante (Rojo Cálido + Negro - Corporativo) */
[data-color-theme="elegante"] {
    --primary: #FF4438;
    --primary-dark: #1a1a1a;
    --primary-light: #FF6B5B;
    --secondary: #000000;
    --accent: #F8EFE0;
    --row-odd: #fdfbf8;
    --row-hover: #f8efe0;
}

/* Asegurar que los temas de color funcionen con dark mode */
[data-theme="dark"][data-color-theme="rubi"] {
    --accent: #4a1e1e;
    --row-even: #1e293b;
    --row-odd: #261a1a;
    --row-hover: #3d2424;
}

[data-theme="dark"][data-color-theme="zafiro"] {
    --accent: #1a3a5c;
    --row-even: #1e293b;
    --row-odd: #0c1929;
    --row-hover: #1e3a5f;
}

[data-theme="dark"][data-color-theme="esmeralda"] {
    --accent: #1b3d1f;
    --row-even: #1e293b;
    --row-odd: #0f1f14;
    --row-hover: #1a3a22;
}

[data-theme="dark"][data-color-theme="amatista"] {
    --accent: #3d1a45;
    --row-even: #1e293b;
    --row-odd: #1a1424;
    --row-hover: #2e1f3d;
}

[data-theme="dark"][data-color-theme="ambar"] {
    --accent: #4a2e00;
    --row-even: #1e293b;
    --row-odd: #1f1a0c;
    --row-hover: #3d3014;
}

[data-theme="dark"][data-color-theme="grafito"] {
    --accent: #263238;
    --row-even: #1e293b;
    --row-odd: #141a1f;
    --row-hover: #2d3a47;
}

/* Dark mode para temas profesionales */
[data-theme="dark"][data-color-theme="corporativo"] {
    --accent: #1a3050;
    --row-even: #1e293b;
    --row-odd: #0d1a2a;
    --row-hover: #1e3a5f;
}

[data-theme="dark"][data-color-theme="ejecutivo"] {
    --accent: #2d3436;
    --row-even: #1e293b;
    --row-odd: #141718;
    --row-hover: #2d3436;
}

[data-theme="dark"][data-color-theme="oceano"] {
    --accent: #003d54;
    --row-even: #1e293b;
    --row-odd: #0a1e28;
    --row-hover: #004d6d;
}

[data-theme="dark"][data-color-theme="bosque"] {
    --accent: #1a3d30;
    --row-even: #1e293b;
    --row-odd: #0d1f18;
    --row-hover: #1d4e3e;
}

[data-theme="dark"][data-color-theme="vino"] {
    --accent: #4a1f24;
    --row-even: #1e293b;
    --row-odd: #1a0f11;
    --row-hover: #5c2830;
}

[data-theme="dark"][data-color-theme="medianoche"] {
    --accent: #1a252f;
    --row-even: #1e293b;
    --row-odd: #0f161c;
    --row-hover: #2c3e50;
}

[data-theme="dark"][data-color-theme="titanio"] {
    --accent: #334155;
    --row-even: #1e293b;
    --row-odd: #0f172a;
    --row-hover: #475569;
}

[data-theme="dark"][data-color-theme="bronce"] {
    --accent: #5c3a1c;
    --row-even: #1e293b;
    --row-odd: #1a1410;
    --row-hover: #6b4520;
}

[data-theme="dark"][data-color-theme="elegante"] {
    --accent: #3d2a1a;
    --row-even: #1e293b;
    --row-odd: #1a1512;
    --row-hover: #4a3020;
}

/* ==================== MODO OSCURO ==================== */
[data-theme="dark"] {
    --text-primary: #f1f5f9;
    --text-secondary: #94a3b8;
    --text-light: #64748b;
    --bg-primary: #1e293b;
    --bg-secondary: #0f172a;
    --bg-tertiary: #334155;
    --border: #475569;
    --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
    --accent: #4a1e1e;
    /* Efecto cebra modo oscuro base */
    --row-even: #1e293b;
    --row-odd: #0f172a;
    --row-hover: #334155;
}

[data-theme="dark"] body {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
}

[data-theme="dark"] header {
    background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
}

[data-theme="dark"] .filters {
    background: var(--bg-primary);
}

/* ==================== MASTERPAGE - LAYOUT 3 PANELES ==================== */
.app-layout {
    display: flex;
    min-height: 100vh;
    background: var(--bg-secondary);
}

/* Sidebar */
.sidebar {
    width: 240px;
    min-width: 240px;
    background: var(--bg-primary);
    border-right: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: fixed;
    left: 0;
    top: 70px; /* Empieza debajo del header */
    bottom: 0;
    z-index: 100;
}

.sidebar.collapsed {
    width: 60px;
    min-width: 60px;
}

/* Botón toggle en el sidebar */
.sidebar-toggle-container {
    padding: 10px;
    display: flex;
    justify-content: flex-end;
    border-bottom: 1px solid var(--border);
}

.sidebar-toggle {
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius);
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: white;
    font-size: 18px;
    line-height: 1;
}

.sidebar-toggle:hover {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.sidebar-toggle svg {
    width: 18px;
    height: 18px;
    transition: transform 0.3s;
    display: block;
}

/* Icono hamburguesa - siempre blanco sobre fondo del tema */
.sidebar-toggle svg path,
.sidebar-toggle svg rect {
    fill: white !important;
    stroke: white !important;
    stroke-width: 2.5px !important;
    stroke-linecap: round !important;
}

.sidebar.collapsed .sidebar-toggle svg {
    transform: rotate(180deg);
}

.sidebar.collapsed .sidebar-toggle-container {
    justify-content: center;
}

/* Navegación del sidebar */
.sidebar-nav {
    flex: 1;
    padding: 8px;
    overflow-y: auto;
    overflow-x: hidden;
}

.sidebar-section {
    margin-bottom: 4px;
}

/* Título de sección simple (no colapsable) */
.sidebar-section-title {
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 10px 12px 6px;
    white-space: nowrap;
    overflow: hidden;
    transition: opacity 0.2s;
}

.sidebar.collapsed .sidebar-section-title {
    opacity: 0;
    height: 0;
    padding: 0;
}

/* Sección colapsable (acordeón) */
.sidebar-accordion {
    margin-bottom: 4px;
}

.sidebar-accordion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 12px;
    cursor: pointer;
    border-radius: var(--radius);
    transition: all 0.2s;
    color: var(--text-secondary);
}

.sidebar-accordion-header:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.sidebar-accordion-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: var(--font-size-sm);
    font-weight: 500;
}

.sidebar-accordion-title svg {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

.sidebar-accordion-arrow {
    width: 16px;
    height: 16px;
    transition: transform 0.2s;
    flex-shrink: 0;
}

.sidebar-accordion.expanded .sidebar-accordion-arrow {
    transform: rotate(180deg);
}

.sidebar-accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.sidebar-accordion.expanded .sidebar-accordion-content {
    max-height: 500px;
}

.sidebar-accordion-content .sidebar-item {
    padding-left: 40px;
}

/* Sidebar colapsado - acordeones */
.sidebar.collapsed .sidebar-accordion-header span:not(.sidebar-accordion-title svg) {
    display: none;
}

.sidebar.collapsed .sidebar-accordion-arrow {
    display: none;
}

.sidebar.collapsed .sidebar-accordion-header {
    justify-content: center;
    padding: 10px;
}

.sidebar.collapsed .sidebar-accordion-content .sidebar-item {
    padding-left: 0;
    justify-content: center;
}

/* Items del menú */
.sidebar-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
    border-radius: var(--radius);
    color: var(--text-secondary);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s;
    margin-bottom: 4px;
    position: relative;
    white-space: nowrap;
}

.sidebar-item:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.sidebar-item.active {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    box-shadow: 0 4px 12px rgba(var(--primary), 0.3);
}

.sidebar-item-icon {
    width: 22px;
    height: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.sidebar-item-icon svg {
    width: 20px;
    height: 20px;
}

.sidebar-item-text {
    font-size: var(--font-size-base);
    font-weight: 500;
    transition: opacity 0.2s, width 0.2s;
}

.sidebar.collapsed .sidebar-item-text {
    opacity: 0;
    width: 0;
    overflow: hidden;
}

/* Tooltip para sidebar colapsado */
.sidebar.collapsed .sidebar-item {
    justify-content: center;
    padding: 12px;
}

.sidebar.collapsed .sidebar-item::after {
    content: attr(data-tooltip);
    position: absolute;
    left: 100%;
    margin-left: 10px;
    padding: 8px 12px;
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border);
    z-index: 1001;
}

.sidebar.collapsed .sidebar-item:hover::after {
    opacity: 1;
}

/* Footer del sidebar - siempre fijo abajo */
.sidebar-footer {
    padding: 15px;
    border-top: 1px solid var(--border);
    margin-top: auto;
}

/* Contenedor principal (header + content) */
.main-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

/* Header superior - FIJO en toda la pantalla */
.top-header {
    background: var(--bg-primary);
    color: var(--text-primary);
    padding: 0 20px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1001;
    border-radius: 0 !important;
    border-bottom: 1px solid var(--border);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* Botón menú móvil - oculto por defecto, visible en móvil */
.mobile-menu-btn {
    display: none;
    background: rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-radius: var(--radius);
    color: white;
    cursor: pointer;
    padding: 8px;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 10;
    pointer-events: auto;
}

.mobile-menu-btn svg {
    width: 24px;
    height: 24px;
    stroke: white;
    pointer-events: none; /* El clic lo recibe el botón, no el SVG */
}

.top-header-left {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Logo en el header */
.header-logo {
    display: flex;
    align-items: center;
    gap: 12px;
}

.header-logo img {
    height: 40px;
    width: auto;
    /* El filtro se aplica dinámicamente desde JavaScript según la configuración */
}

.header-logo-text {
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--primary);
}

.header-divider {
    width: 1px;
    height: 30px;
    background: var(--border);
    margin: 0 5px;
}

.top-header-title {
    font-size: var(--font-size-xl);
    font-weight: 600;
    color: var(--text-primary) !important;
    background: none !important;
    -webkit-background-clip: unset !important;
    -webkit-text-fill-color: var(--text-primary) !important;
    background-clip: unset !important;
}

.top-header-subtitle {
    font-size: var(--font-size-sm);
    opacity: 0.9;
}

.top-header-right {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Indicador modo espejo */
.mirror-indicator {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: rgba(255, 193, 7, 0.15);
    border: 1px solid rgba(255, 193, 7, 0.4);
    border-radius: 15px;
    color: #ffc107;
    font-size: 11px;
    font-weight: 500;
}

.mirror-indicator svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

.mirror-text {
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.mirror-date {
    color: rgba(255, 193, 7, 0.8);
    font-size: 10px;
    border-left: 1px solid rgba(255, 193, 7, 0.3);
    padding-left: 6px;
    margin-left: 2px;
}

/* Responsive - compactar en móvil */
@media (max-width: 768px) {
    .mirror-indicator {
        padding: 3px 6px;
        gap: 4px;
    }

    .mirror-indicator svg {
        width: 12px;
        height: 12px;
    }

    .mirror-text {
        font-size: 9px;
    }

    .mirror-date {
        font-size: 8px;
        padding-left: 4px;
    }
}

/* Responsive - muy pequeño en móvil pequeño */
@media (max-width: 480px) {
    .mirror-indicator {
        padding: 2px 5px;
        flex-wrap: wrap;
        justify-content: center;
        max-width: 80px;
    }

    .mirror-text {
        font-size: 8px;
    }

    .mirror-date {
        border-left: none;
        padding-left: 0;
        margin-left: 0;
        width: 100%;
        text-align: center;
        font-size: 7px;
    }
}

/* Botón toggle tema en header */
.theme-toggle-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 1.1rem;
}

.theme-toggle-btn:hover {
    background: var(--primary-light);
    border-color: var(--primary);
}

/* Selector idioma en header */
.lang-selector-header {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    color: var(--text-primary);
    padding: 6px 10px;
    font-size: var(--font-size-sm);
    cursor: pointer;
    transition: all 0.2s;
}

.lang-selector-header:hover {
    border-color: var(--primary);
}

.lang-selector-header:hover {
    background: rgba(255, 255, 255, 0.25);
}

.lang-selector-header option {
    background: var(--bg-primary);
    color: var(--text-primary);
}

/* Área de contenido principal */
.main-content-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 15px;
    padding-top: 85px; /* 70px header + 15px padding */
    margin-left: 240px;
    transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    min-height: 100vh;
}

/* Panel de filtros arriba - SIEMPRE horizontal */
.main-content-area .filters {
    flex-shrink: 0;
    width: 100% !important;
    min-width: unset !important;
    max-width: 100% !important;
    border-radius: var(--radius);
    margin-bottom: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-right: none !important;
    border-bottom: 1px solid var(--border);
    padding: 15px !important;
}

.main-content-area .filters h2 {
    font-size: 1rem !important;
    margin-bottom: 16px !important;
}

.main-content-area .filter-grid {
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)) !important;
    gap: 16px !important;
}

.main-content-area .filters label {
    font-size: 0.75rem !important;
}

.main-content-area .filters input,
.main-content-area .filters select {
    padding: 10px 14px !important;
    font-size: 0.875rem !important;
}

.main-content-area .button-group {
    flex-direction: row !important;
    gap: 12px !important;
    margin-top: 8px;
}

.main-content-area .button-group button {
    width: auto !important;
    padding: 10px 20px !important;
    font-size: 0.875rem !important;
}

/* Grid de datos ocupa el resto */
.main-content-area .table-container {
    flex: 1;
    overflow: auto;
    background: var(--bg-primary);
    border-radius: var(--radius);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.sidebar.collapsed ~ .main-wrapper .main-content-area {
    margin-left: 60px;
}

/* ==================== MODO OSCURO PARA MASTERPAGE ==================== */
[data-theme="dark"] .sidebar {
    background: linear-gradient(180deg, var(--bg-secondary) 0%, #0f172a 100%);
    border-right-color: var(--border);
}

[data-theme="dark"] .sidebar-header {
    border-bottom-color: var(--border);
}

[data-theme="dark"] .sidebar-toggle {
    background: var(--bg-tertiary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .sidebar-toggle:hover {
    background: var(--primary);
    border-color: var(--primary);
}

[data-theme="dark"] .sidebar-item:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .sidebar.collapsed .sidebar-item::after {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .sidebar-footer {
    border-top-color: var(--border);
}

[data-theme="dark"] .sidebar-toggle-container {
    border-bottom-color: var(--border);
}

[data-theme="dark"] .sidebar-accordion-header:hover {
    background: var(--bg-tertiary);
}

/* ==================== RESPONSIVE MASTERPAGE ==================== */
@media (max-width: 1024px) {
    .sidebar {
        width: 60px;
        min-width: 60px;
    }

    .sidebar .sidebar-section-title,
    .sidebar .sidebar-item-text,
    .sidebar .sidebar-accordion-title span:not(svg),
    .sidebar .sidebar-accordion-arrow {
        opacity: 0;
        width: 0;
        overflow: hidden;
        display: none;
    }

    .sidebar .sidebar-item {
        justify-content: center;
        padding: 10px;
    }

    .sidebar .sidebar-accordion-header {
        justify-content: center;
    }

    .sidebar .sidebar-accordion-content .sidebar-item {
        padding-left: 0;
    }

    .sidebar .sidebar-toggle svg {
        transform: rotate(180deg);
    }

    .main-content-area {
        margin-left: 60px;
    }
}

@media (max-width: 768px) {
    .sidebar {
        transform: translateX(-100%) !important;
        width: 240px !important;
        min-width: 240px !important;
        top: 70px;
        position: fixed !important;
        left: 0;
        bottom: 0;
        transition: transform 0.3s ease !important;
    }

    .sidebar.mobile-open {
        transform: translateX(0) !important;
        z-index: 1000 !important;
    }

    /* Ocultar el toggle del sidebar en móvil - usamos el botón del header */
    .sidebar-toggle-container {
        display: none !important;
    }

    .main-content-area {
        margin-left: 0;
        overflow-x: hidden;
        max-width: 100vw;
    }

    .sidebar.collapsed ~ .main-wrapper .main-content-area {
        margin-left: 0;
    }

    /* Mostrar textos en móvil cuando está abierto */
    .sidebar.mobile-open .sidebar-section-title,
    .sidebar.mobile-open .sidebar-item-text,
    .sidebar.mobile-open .sidebar-accordion-title span,
    .sidebar.mobile-open .sidebar-accordion-arrow {
        opacity: 1;
        width: auto;
        display: inline;
    }

    .sidebar.mobile-open .sidebar-item {
        justify-content: flex-start;
        padding: 12px 14px;
    }

    .sidebar.mobile-open .sidebar-accordion-header {
        justify-content: space-between;
    }

    .sidebar.mobile-open .sidebar-accordion-content .sidebar-item {
        padding-left: 40px;
    }

    /* Overlay para móvil */
    .sidebar-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
    }

    .sidebar.mobile-open ~ .sidebar-overlay {
        display: block;
    }

    /* Botón hamburguesa para móvil */
    .mobile-menu-btn {
        display: flex !important;
        background: var(--bg-tertiary);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        color: var(--primary);
        cursor: pointer;
        padding: 8px;
        pointer-events: auto;
    }

    .mobile-menu-btn svg {
        width: 24px;
        height: 24px;
        stroke: var(--primary);
        pointer-events: none;
    }

    /* Logo y nombre empresa en columna en móvil */
    .header-logo {
        flex-direction: column;
        align-items: center;
        gap: 2px;
    }

    .header-logo img {
        max-height: 28px;
    }

    /* Nombre empresa más pequeño debajo del logo */
    .header-logo-text {
        font-size: 0.65rem !important;
        font-weight: 500;
        opacity: 0.9;
        text-align: center;
        max-width: 80px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* Ocultar título "Gestión de Stocks" en móvil - va en sidebar */
    .top-header-title {
        display: none !important;
    }

    /* Texto vertical en sidebar - oculto en móvil */
    .sidebar-vertical-text {
        display: none !important;
    }

    .top-header-subtitle {
        display: none;
    }

    .header-divider {
        display: none;
    }
}

@media (min-width: 769px) {
    .mobile-menu-btn {
        display: none;
    }

    .sidebar-overlay {
        display: none !important;
    }
}

/* ==================== ESTILOS DE TEMA CON ALTA PRESENCIA ==================== */

/* HEADER - Fondo con gradiente del tema */
.top-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%) !important;
    color: white !important;
    border-bottom: none !important;
}

.top-header-title {
    color: white !important;
    -webkit-text-fill-color: white !important;
}

.header-logo-text {
    color: white !important;
}

.header-divider {
    background: rgba(255, 255, 255, 0.3) !important;
}

.top-header .theme-toggle-btn,
.top-header .lang-selector-header,
.top-header .menu-btn {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
    color: white !important;
}

.top-header .theme-toggle-btn:hover,
.top-header .lang-selector-header:hover,
.top-header .menu-btn:hover {
    background: rgba(255, 255, 255, 0.25) !important;
}

.top-header .menu-icon {
    stroke: white !important;
}

.top-header .user-name-display {
    color: white !important;
}

.top-header .mobile-menu-btn {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
    pointer-events: auto !important;
}

.top-header .mobile-menu-btn svg {
    stroke: white !important;
    pointer-events: none !important;
}

/* Logo en header - invertir para que se vea en fondo oscuro */
.header-logo img {
    filter: brightness(0) invert(1);
}

/* Texto vertical en sidebar (solo móvil) */
.sidebar-vertical-text {
    display: none;
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%) rotate(180deg);
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 0.7rem;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
    letter-spacing: 2px;
    text-transform: uppercase;
    padding: 10px 8px;
    white-space: nowrap;
}

/* SIDEBAR - Fondo con tinte del tema */
.sidebar {
    background: linear-gradient(180deg, var(--primary-dark) 0%, var(--primary) 50%, var(--primary-dark) 100%) !important;
    border-right: none !important;
}

.sidebar-toggle-container {
    border-bottom: 1px solid rgba(255, 255, 255, 0.2) !important;
}

.sidebar-toggle {
    background: rgba(255, 255, 255, 0.15) !important;
    border-color: rgba(255, 255, 255, 0.3) !important;
}

.sidebar-toggle:hover {
    background: rgba(255, 255, 255, 0.25) !important;
}

.sidebar-toggle svg path,
.sidebar-toggle svg rect {
    fill: white !important;
    stroke: white !important;
}

/* Items del sidebar - texto blanco */
.sidebar-item {
    color: rgba(255, 255, 255, 0.9) !important;
}

.sidebar-item svg {
    stroke: rgba(255, 255, 255, 0.9) !important;
}

.sidebar-item:hover {
    background: rgba(255, 255, 255, 0.15) !important;
    color: white !important;
}

.sidebar-item:hover svg {
    stroke: white !important;
}

/* Item activo del sidebar */
.sidebar-item.active {
    background: rgba(255, 255, 255, 0.25) !important;
    color: white !important;
    border-left: 3px solid white;
}

.sidebar-item.active svg {
    stroke: white !important;
}

/* Títulos de sección del sidebar */
.sidebar-section-title {
    color: rgba(255, 255, 255, 0.6) !important;
}

/* Acordeones del sidebar */
.sidebar-accordion-header {
    color: rgba(255, 255, 255, 0.9) !important;
}

.sidebar-accordion-header svg {
    stroke: rgba(255, 255, 255, 0.9) !important;
}

.sidebar-accordion-header:hover {
    background: rgba(255, 255, 255, 0.15) !important;
}

.sidebar-accordion.expanded > .sidebar-accordion-header {
    background: rgba(255, 255, 255, 0.1) !important;
    color: white !important;
}

.sidebar-accordion.expanded > .sidebar-accordion-header svg {
    stroke: white !important;
}

.sidebar-accordion-title span {
    color: rgba(255, 255, 255, 0.9) !important;
}

/* Footer del sidebar */
.sidebar-footer {
    border-top: 1px solid rgba(255, 255, 255, 0.2) !important;
    background: rgba(0, 0, 0, 0.1) !important;
}

/* Cards y paneles con borde superior del tema */
.logo-card,
.config-card,
.email-config-card,
.param-section,
.proposal-card,
.user-card,
.inquiry-card {
    border-top: 4px solid var(--primary);
}

/* Headers de tablas con gradiente del tema */
.users-table thead,
.proposals-table thead,
.inquiries-table thead,
.config-list thead,
.audit-table thead,
table thead {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%) !important;
}

.users-table th,
.proposals-table th,
.inquiries-table th,
table th {
    color: white !important;
}

/* Selectores e inputs con focus del tema */
input:focus,
select:focus,
textarea:focus {
    border-color: var(--primary) !important;
    box-shadow: 0 0 0 3px rgba(var(--primary), 0.2);
    outline: none;
}

/* Toggle switches con color del tema */
.toggle-switch input:checked + .toggle-slider {
    background: var(--primary);
}

/* Botones primarios con colores del tema */
.btn-primary,
.btn-action.btn-edit,
button[type="submit"]:not(.btn-delete) {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-color: var(--primary);
}

.btn-primary:hover,
.btn-action.btn-edit:hover {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
}

/* Scrollbar del sidebar con color del tema */
.sidebar-nav::-webkit-scrollbar-thumb {
    background: var(--primary-light);
    border-radius: 4px;
}

.sidebar-nav::-webkit-scrollbar-thumb:hover {
    background: var(--primary);
}

/* Paginación con colores del tema */
.pagination-btn.active {
    background: var(--primary);
    border-color: var(--primary);
}

/* Badges de estado con colores que respetan el tema */
.status-badge {
    border: 1px solid var(--primary);
}

/* Links con color del tema */
a:not(.sidebar-item):not(.btn):hover {
    color: var(--primary);
}

/* Selector de tema activo */
.theme-card.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--accent);
}

/* Modal headers con gradiente del tema */
.modal-header,
#edit-modal .modal-header,
#detail-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
}

#detail-modal .modal-header h2 {
    color: white;
}

[data-theme="dark"] select,
[data-theme="dark"] input[type="text"],
[data-theme="dark"] input[type="number"],
[data-theme="dark"] input[type="email"],
[data-theme="dark"] input[type="password"],
[data-theme="dark"] textarea {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] select option {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Tabla */
[data-theme="dark"] table {
    background: var(--bg-primary);
}

[data-theme="dark"] thead {
    background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
}

[data-theme="dark"] th {
    /* Fondo sólido para sticky headers en dark mode */
    background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
    color: var(--text-primary);
    border-bottom-color: var(--border);
}

[data-theme="dark"] td {
    border-bottom-color: var(--border);
    color: var(--text-primary);
}

/* Las filas de tabla ahora usan variables CSS: --row-even, --row-odd, --row-hover */
/* Estas variables se definen automáticamente en cada tema de color y modo oscuro */

/* Table container */
[data-theme="dark"] .table-container {
    background: var(--bg-primary);
}

/* Modales */
[data-theme="dark"] .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
}

[data-theme="dark"] .detail-modal .modal-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .detail-item {
    border-color: var(--border);
}

[data-theme="dark"] .detail-label {
    color: var(--text-secondary);
}

[data-theme="dark"] .detail-value {
    color: var(--text-primary);
}

[data-theme="dark"] .detail-imagenes {
    background: var(--bg-secondary);
}

[data-theme="dark"] .detail-packaging-section {
    background: var(--bg-secondary);
    border-color: var(--border);
}

/* Carrito modal */
[data-theme="dark"] #carrito-modal .modal-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .carrito-item {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .quantity-modal-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .quantity-modal-body {
    background: var(--bg-primary);
}

[data-theme="dark"] .quantity-product-info {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .quantity-detail-item {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
}

[data-theme="dark"] .quantity-detail-item strong {
    color: var(--text-primary);
}

[data-theme="dark"] .quantity-btn {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .quantity-btn:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .quantity-input {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .quantity-package-label {
    color: var(--text-secondary);
}

[data-theme="dark"] .quantity-package-btn {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .quantity-btn-cancel {
    background: #5a6268;
    color: white;
    border-color: #5a6268;
}

[data-theme="dark"] .quantity-btn-cancel:hover {
    background: #495057;
    border-color: #495057;
}

[data-theme="dark"] .quantity-btn-confirm {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-color: var(--primary);
    color: white;
}

[data-theme="dark"] .quantity-btn-confirm svg {
    stroke: white !important;
    fill: none !important;
}

[data-theme="dark"] .quantity-btn-confirm:hover {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
}

[data-theme="dark"] .quantity-modal {
    background: var(--bg-primary);
}

/* Cards (móvil) */
[data-theme="dark"] .stock-card {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .stock-card-header {
    border-color: var(--border);
}

/* Dropdown y menú */
[data-theme="dark"] .dropdown-content {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .menu-item:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .menu-section-title {
    color: var(--text-secondary);
}

[data-theme="dark"] .menu-dropdown {
    background: var(--bg-primary) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .menu-dropdown .menu-section {
    border-color: var(--border);
}

[data-theme="dark"] .menu-dropdown .menu-section-title {
    color: var(--text-secondary);
}

[data-theme="dark"] .menu-dropdown .menu-item {
    color: var(--text-primary);
}

[data-theme="dark"] .menu-dropdown .menu-item:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .menu-dropdown .menu-item.danger {
    color: #ff6b6b;
}

[data-theme="dark"] .menu-dropdown .menu-item.danger:hover {
    background: rgba(220, 53, 69, 0.15);
}

/* Badges */
[data-theme="dark"] .badge {
    border: 1px solid var(--border);
}

/* Modal overlay */
[data-theme="dark"] .modal-overlay .modal-content {
    background: var(--bg-primary);
}

/* Inquiry form inputs */
[data-theme="dark"] .modal-overlay input,
[data-theme="dark"] .modal-overlay textarea {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border);
}

/* Empty state */
[data-theme="dark"] .empty-state {
    color: var(--text-secondary);
}

/* ==================== PÁGINAS DE ADMINISTRACIÓN - MODO OSCURO ==================== */

/* Contenedores principales */
[data-theme="dark"] .proposals-container,
[data-theme="dark"] .users-container,
[data-theme="dark"] .email-config-container,
[data-theme="dark"] .params-container,
[data-theme="dark"] .inquiries-container {
    background: var(--bg-primary);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

/* Contenido */
[data-theme="dark"] .proposals-content,
[data-theme="dark"] .users-content,
[data-theme="dark"] .email-config-content,
[data-theme="dark"] .params-content,
[data-theme="dark"] .inquiries-content {
    background: var(--bg-primary);
}

/* Tablas de administración */
[data-theme="dark"] .proposals-table-wrapper,
[data-theme="dark"] .inquiries-table-wrapper {
    border-color: var(--border);
}

[data-theme="dark"] .proposals-table th,
[data-theme="dark"] .inquiries-table th,
[data-theme="dark"] .users-table th {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

[data-theme="dark"] .proposals-table td,
[data-theme="dark"] .users-table td,
[data-theme="dark"] .inquiries-table td {
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .proposals-table tbody tr,
[data-theme="dark"] .inquiries-table tbody tr,
[data-theme="dark"] .users-table tbody tr {
    background-color: var(--bg-primary);
}

[data-theme="dark"] .proposals-table tbody tr:nth-child(odd),
[data-theme="dark"] .inquiries-table tbody tr:nth-child(odd),
[data-theme="dark"] .users-table tbody tr:nth-child(odd) {
    background-color: var(--bg-secondary);
}

[data-theme="dark"] .proposals-table tbody tr:hover,
[data-theme="dark"] .users-table tbody tr:hover,
[data-theme="dark"] .inquiries-table tbody tr:hover {
    background: var(--bg-tertiary);
}

/* Badges de estado */
[data-theme="dark"] .status-badge {
    border: 1px solid var(--border);
}

[data-theme="dark"] .status-enviada {
    background: rgba(255, 193, 7, 0.2);
    color: #ffc107;
    border-color: rgba(255, 193, 7, 0.4);
}

[data-theme="dark"] .status-procesada {
    background: rgba(40, 167, 69, 0.2);
    color: #4caf50;
    border-color: rgba(40, 167, 69, 0.4);
}

[data-theme="dark"] .status-cancelada {
    background: rgba(220, 53, 69, 0.2);
    color: #f44336;
    border-color: rgba(220, 53, 69, 0.4);
}

/* Tarjetas móviles */
[data-theme="dark"] .proposal-card,
[data-theme="dark"] .user-card,
[data-theme="dark"] .inquiry-card {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .proposal-card-header,
[data-theme="dark"] .user-card-header,
[data-theme="dark"] .inquiry-card-header {
    border-color: var(--border);
}

/* Consultas - Estilos específicos */
[data-theme="dark"] .inquiry-section {
    background: var(--bg-secondary);
}

[data-theme="dark"] .inquiry-section h4 {
    color: var(--text-primary);
}

[data-theme="dark"] .inquiry-field label {
    color: var(--text-secondary);
}

[data-theme="dark"] .inquiry-field span {
    color: var(--text-primary);
}

[data-theme="dark"] .inquiry-message {
    background: rgba(255, 152, 0, 0.15);
    border-left-color: #ff9800;
}

[data-theme="dark"] .inquiry-message h4 {
    color: #ffb74d;
}

[data-theme="dark"] .inquiry-message p {
    color: var(--text-primary);
}

[data-theme="dark"] .inquiry-response {
    background: rgba(76, 175, 80, 0.15);
    border-left-color: #4caf50;
}

[data-theme="dark"] .inquiry-response h4 {
    color: #81c784;
}

[data-theme="dark"] .inquiry-response p {
    color: var(--text-primary);
}

[data-theme="dark"] .response-form {
    background: rgba(33, 150, 243, 0.15);
}

[data-theme="dark"] .response-form h4 {
    color: #64b5f6;
}

[data-theme="dark"] .response-form textarea {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .client-info .name {
    color: var(--text-primary);
}

[data-theme="dark"] .client-info .email {
    color: var(--text-secondary);
}

[data-theme="dark"] .inquiry-card-message {
    color: var(--text-secondary);
}

[data-theme="dark"] .inquiry-card-date {
    color: var(--text-secondary);
}

[data-theme="dark"] #inquiry-detail-modal .modal-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .inquiry-detail-content {
    background: var(--bg-primary);
}

/* Contenedor de filtros */
[data-theme="dark"] .filters-container {
    background: var(--bg-primary) !important;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] .filter-group label {
    color: var(--text-secondary) !important;
}

[data-theme="dark"] .filter-group select,
[data-theme="dark"] .filter-group input {
    background: var(--bg-tertiary) !important;
    color: var(--text-primary) !important;
    border-color: var(--border) !important;
}

[data-theme="dark"] .proposal-card-body,
[data-theme="dark"] .user-card-body {
    color: var(--text-primary);
}

[data-theme="dark"] .proposal-card-body .label,
[data-theme="dark"] .user-card-body .label {
    color: var(--text-secondary);
}

/* Formularios de administración */
[data-theme="dark"] .config-card,
[data-theme="dark"] .param-card,
[data-theme="dark"] .param-item {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .config-card-header,
[data-theme="dark"] .param-header {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .config-card-body,
[data-theme="dark"] .param-body {
    background: var(--bg-primary);
}

[data-theme="dark"] .form-group label {
    color: var(--text-primary);
}

[data-theme="dark"] .form-group input,
[data-theme="dark"] .form-group select,
[data-theme="dark"] .form-group textarea {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .form-group input::placeholder,
[data-theme="dark"] .form-group textarea::placeholder {
    color: var(--text-secondary);
}

/* Modales de administración */
[data-theme="dark"] .modal-admin,
[data-theme="dark"] .user-modal-content,
[data-theme="dark"] .detail-modal-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .modal-admin-header {
    border-color: var(--border);
}

[data-theme="dark"] .modal-admin-body {
    color: var(--text-primary);
}

/* Filtros */
[data-theme="dark"] .filters-section,
[data-theme="dark"] .filter-group {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .filter-group label {
    color: var(--text-primary);
}

/* Mensajes vacíos */
[data-theme="dark"] .no-data,
[data-theme="dark"] .empty-message {
    color: var(--text-secondary);
}

/* Lista de configs email */
[data-theme="dark"] .config-list-item {
    background: var(--bg-primary);
    border-color: var(--border);
}

[data-theme="dark"] .config-list-item:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .config-list-item.active {
    border-color: #4CAF50;
}

/* Switch toggle */
.switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    margin-left: auto;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .3s;
    border-radius: 24px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .3s;
    border-radius: 50%;
}

input:checked+.slider {
    background-color: var(--primary);
}

input:checked+.slider:before {
    transform: translateX(20px);
}

.theme-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
}

.theme-toggle .switch {
    pointer-events: none;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);
    min-height: 100vh;
    color: var(--text-primary);
    line-height: 1.6;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px;
}

/* En pantallas grandes, quitar márgenes para aprovechar todo el ancho */
@media (min-width: 1200px) {
    .container {
        max-width: 100%;
        padding: 12px 16px;
    }
}

/* ==================== HEADER MODERNO ==================== */
header {
    background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
    padding: 24px 32px;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    margin-bottom: 24px;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 24px;
    border: 1px solid rgba(255, 107, 107, 0.1);
}

.logo {
    height: 48px;
    width: auto;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.header-content {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

h1 {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.75rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin: 0;
}

.company-name {
    color: var(--primary);
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: -0.02em;
    margin-top: 0.2rem;
}

.subtitle {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
}

/* Usuario Info */
.user-info {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 20px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.user-info span {
    color: var(--text-secondary);
    font-size: 0.875rem;
    font-weight: 500;
}

.user-info strong {
    color: var(--primary);
    font-weight: 600;
}

.btn-logout {
    padding: 8px 16px;
    background: var(--text-primary);
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-logout:hover {
    background: var(--dark-light);
    transform: translateY(-1px);
    box-shadow: var(--shadow);
}

/* ==================== FILTROS MODERNOS ==================== */
.main-content {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    overflow: hidden; /* Evitar scroll doble */
    border: 1px solid var(--border);
}

/* Estilos base de table-container */
.table-container {
    overflow-x: auto;
    padding: 24px;
}

/* Sticky headers para tablet y desktop (cuando se muestra la tabla, no tarjetas) */
@media (min-width: 769px) {
    .table-container {
        max-height: calc(100vh - 120px); /* Altura viewport menos header compacto */
        overflow-y: auto;
    }
}

/* Transiciones suaves para cambios de resolución */
.filters,
.table-container,
.filter-grid,
.button-group {
    transition: width 0.2s ease, padding 0.2s ease, gap 0.15s ease;
}

/* ==================== LAYOUT SPLIT-SCREEN (PANTALLAS GRANDES) ==================== */
@media (min-width: 1200px) {
    .main-content {
        display: flex;
        height: calc(100vh - 100px);
        overflow: hidden;
    }

    .filters {
        width: 210px;
        min-width: 210px;
        max-width: 210px;
        flex-shrink: 0;
        overflow-y: auto;
        overflow-x: visible;
        border-right: 1px solid var(--border);
        border-bottom: none;
        padding: 10px 14px;
        background: linear-gradient(180deg, #ffffff 0%, #fafafa 100%);
        box-sizing: border-box;
    }

    .filters .form-group,
    .filters .filter-grid {
        max-width: 100%;
        overflow: hidden;
    }

    /* Filtros compactos en split-screen */
    .filters h2 {
        font-size: 0.8rem;
        margin-bottom: 10px;
    }

    .filters h2::before {
        width: 3px;
        height: 14px;
    }

    .filter-grid {
        grid-template-columns: 1fr;
        gap: 8px;
        margin-bottom: 10px;
    }

    .filters .form-group {
        gap: 3px;
    }

    .filters label {
        font-size: 0.65rem;
    }

    .filters input,
    .filters select {
        padding: 6px 8px;
        font-size: 0.75rem;
        width: 100%;
        box-sizing: border-box;
    }

    .button-group {
        flex-direction: column;
        gap: 6px;
    }

    .button-group button {
        width: 100%;
        padding: 6px 10px;
        font-size: 0.75rem;
    }

    .table-container {
        flex: 1;
        overflow-y: auto;
        overflow-x: hidden;
        padding: 0 16px 16px 16px;
        height: 100%;
    }

    /* Evitar scroll horizontal en tabla */
    .table-container table {
        width: 100%;
        table-layout: fixed;
        border-collapse: separate;
        border-spacing: 0;
    }

    /* Header sticky en split-screen */
    .table-container thead {
        position: sticky;
        top: 0;
        z-index: 10;
    }

    .table-container thead th {
        background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
        border-bottom: 2px solid var(--border);
    }

    [data-theme="dark"] .table-container thead th {
        background: linear-gradient(135deg, #334155 0%, #1e293b 100%);
    }

    .table-container table th,
    .table-container table td {
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        padding: 6px 2px;
        font-size: 0.75rem;
    }

    /* Ocultar drag-handle en split-screen para liberar espacio */
    .table-container .drag-handle {
        display: none;
    }

    /* Ocultar columna Color en split-screen */
    .table-container table th:nth-child(4),
    .table-container table td:nth-child(4) { display: none; }  /* Color - oculto */

    /* Anchos específicos para columnas en split-screen (sin color) */
    .table-container table th:nth-child(1),
    .table-container table td:nth-child(1) { width: 10%; }  /* Código */
    .table-container table th:nth-child(2),
    .table-container table td:nth-child(2) { width: 25%; }  /* Descripción */
    .table-container table th:nth-child(3),
    .table-container table td:nth-child(3) { width: 7%; }   /* Formato */
    .table-container table th:nth-child(5),
    .table-container table td:nth-child(5) { width: 7%; }   /* Calidad */
    .table-container table th:nth-child(6),
    .table-container table td:nth-child(6) { width: 6%; text-align: center; }   /* Tono */
    .table-container table th:nth-child(7),
    .table-container table td:nth-child(7) { width: 7%; text-align: center; }   /* Calibre */
    .table-container table th:nth-child(8),
    .table-container table td:nth-child(8) { width: 16%; text-align: center; }  /* Existencias */
    .table-container table th:nth-child(9),
    .table-container table td:nth-child(9) { width: 22%; text-align: center; }  /* Acciones */
}

/* Pantallas muy grandes: filtros un poco más anchos */
@media (min-width: 1600px) {
    .main-content .filters {
        width: 220px;
        min-width: 220px;
        padding: 12px;
    }

    .main-content .filters input,
    .main-content .filters select {
        padding: 7px 9px;
        font-size: 0.78rem;
    }
}

/* Dark mode para split-screen */
@media (min-width: 1200px) {
    [data-theme="dark"] .filters {
        background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        border-right-color: var(--border);
    }
}

.filters {
    background: linear-gradient(135deg, #ffffff 0%, #fafafa 100%);
    padding: 24px;
    border-bottom: 1px solid var(--border);
}

.filters h2 {
    color: var(--text-primary);
    margin-bottom: 20px;
    font-size: 1.125rem;
    font-weight: 700;
    letter-spacing: -0.01em;
    display: flex;
    align-items: center;
    gap: 8px;
}

.filters h2::before {
    content: '';
    width: 4px;
    height: 24px;
    background: linear-gradient(180deg, var(--primary), var(--primary-dark));
    border-radius: 2px;
}

.filter-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

label {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

input,
select {
    padding: 12px 16px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-size: 0.9375rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--bg-primary);
    color: var(--text-primary);
    font-weight: 500;
}

input:hover,
select:hover {
    border-color: var(--primary-light);
}

input:focus,
select:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
    background: white;
}

.button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
}

button {
    padding: 10px 20px;
    border: none;
    border-radius: var(--radius);
    font-size: var(--font-size-base);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    letter-spacing: var(--tracking-wide);
    font-family: var(--font-family);
}

.btn-primary {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    filter: brightness(1.05);
}

.btn-primary:active {
    transform: translateY(0);
    filter: brightness(0.95);
}

.btn-secondary {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.btn-secondary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    filter: brightness(1.05);
}

.btn-clear {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

.btn-clear:hover {
    background: var(--bg-secondary);
}

.btn-danger {
    background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
    color: white;
    box-shadow: var(--shadow-sm);
}

.btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.btn-danger-outline {
    background: transparent;
    color: var(--danger);
    border: 1px solid var(--danger);
}

.btn-danger-outline:hover {
    background: var(--danger);
    color: white;
}

.btn-warning {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.btn-warning:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    filter: brightness(1.05);
}

.btn-success {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.btn-success:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    filter: brightness(1.05);
}

.btn-ghost {
    background: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.btn-ghost:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--text-muted);
}

/* ==================== TABLA MODERNA ==================== */
/* .table-container está definido arriba con max-height y overflow para sticky headers */

table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    border-radius: var(--radius-lg);
    /* NO usar overflow: hidden - rompe sticky headers */
    box-shadow: var(--shadow);
}

thead {
    background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
    position: sticky;
    top: 0;
    z-index: 10;
}

th {
    padding: 14px 16px;
    text-align: left;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-size: var(--font-size-xs);
    letter-spacing: var(--tracking-wide);
    border-bottom: 2px solid var(--border);
    white-space: nowrap;
    /* Fondo sólido para sticky headers */
    background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
}

/* Esquinas redondeadas en primera y última celda del header */
th:first-child {
    border-top-left-radius: var(--radius-lg);
}

th:last-child {
    border-top-right-radius: var(--radius-lg);
}

td {
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    color: var(--text-primary);
    font-weight: 450;
    font-size: var(--font-size-sm);
    line-height: var(--line-height-normal);
}

/* Centrar columnas de existencias y acciones */
th:nth-child(8),
td:nth-child(8),
th:nth-child(9),
td:nth-child(9) {
    text-align: center;
}

tbody tr {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    background-color: var(--row-even);
}

tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

tbody tr:hover {
    background-color: var(--row-hover);
    transform: translateX(2px);
}

.badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 0.8125rem;
    font-weight: 700;
    letter-spacing: 0.02em;
}

.badge-success {
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
    color: #065f46;
    border: 1px solid #6ee7b7;
}

.badge-warning {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    border: 1px solid #fcd34d;
}

.badge-danger {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #991b1b;
    border: 1px solid #fca5a5;
}

/* ==================== TABLA AVANZADA CON ORDENACIÓN Y FILTROS ==================== */

/* Celda de acciones - botones en línea */
.actions-cell {
    white-space: nowrap;
    text-align: center;
}

.btn-table {
    padding: 6px 12px;
    font-size: 0.85em;
    margin-right: 4px;
}

.btn-table:last-child {
    margin-right: 0;
}

/* Botones de icono para acciones en tabla - MOVIDO A SECCION UNIFICADA AL FINAL */

/* Headers ordenables y arrastrables */
.sortable-th {
    padding: 6px 4px !important;
    vertical-align: middle;
    cursor: grab;
    transition: all 0.2s ease;
    position: relative;
}

/* Contenedor flex interno del th para alinear header + filtro */
.sortable-th .th-content {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    width: 100%;
}

.sortable-th:active {
    cursor: grabbing;
}

/* Estado arrastrando */
.sortable-th.dragging {
    opacity: 0.5;
    background: var(--bg-tertiary) !important;
}

/* Indicador de zona de soltar */
.sortable-th.drag-over {
    background: var(--primary-light) !important;
    box-shadow: inset 0 0 0 2px var(--primary);
}

/* Indicador de arrastre (handle) */
.drag-handle {
    opacity: 0;
    color: var(--text-light);
    font-size: 0.7rem;
    margin-right: 4px;
    transition: opacity 0.2s;
    cursor: grab;
}

.sortable-th:hover .drag-handle {
    opacity: 0.6;
}

/* Handle de redimensionado de columnas */
.column-resize-handle {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 4px;
    cursor: col-resize;
    background: rgba(0, 0, 0, 0.15);
    transition: background 0.2s;
    z-index: 10;
}

.column-resize-handle:hover,
.sortable-th.resizing .column-resize-handle {
    background: var(--primary);
    width: 4px;
}

/* Dark mode para resize handle */
[data-theme="dark"] .column-resize-handle {
    background: rgba(255, 255, 255, 0.2);
}

[data-theme="dark"] .column-resize-handle:hover,
[data-theme="dark"] .sortable-th.resizing .column-resize-handle {
    background: var(--primary);
}

.sortable-th.resizing {
    user-select: none;
}

.sortable-header {
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    padding: 2px 4px;
    border-radius: 4px;
    transition: background-color 0.2s;
    user-select: none;
    white-space: nowrap;
}

.sortable-header:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

.sortable-header.active {
    color: var(--primary);
}

.sort-icon {
    font-size: 0.7rem;
    opacity: 0.5;
    margin-left: 4px;
}

.sortable-header.active .sort-icon {
    opacity: 1;
    color: var(--primary);
}

/* ==================== FILTROS ESTILO WORKWITHPLUS ==================== */

/* Barra de filtros sobre la tabla */
.filters-bar {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: var(--bg-secondary, #f8f9fa);
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 16px;
}

.filters-bar-label {
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-secondary);
    margin-right: 8px;
}

/* Selector de filtro */
.filter-add-group {
    display: flex;
    align-items: center;
    gap: 6px;
}

.filter-column-select,
.filter-value-input {
    padding: 6px 10px;
    font-size: 0.85rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--bg-primary);
    color: var(--text-primary);
}

.filter-column-select {
    min-width: 120px;
}

.filter-value-input {
    min-width: 150px;
}

.filter-value-input:focus,
.filter-column-select:focus {
    outline: none;
    border-color: var(--primary);
}

.btn-add-filter {
    padding: 6px 12px;
    font-size: 0.85rem;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-add-filter:hover {
    background: var(--primary-dark);
}

/* Chips de filtros activos */
.active-filters {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-left: 12px;
}

.filter-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: linear-gradient(135deg, #fff 0%, var(--primary-light, #ffe5e5) 100%);
    color: var(--primary-dark);
    border: 1px solid var(--primary);
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.filter-chip-column {
    font-weight: 600;
}

.filter-chip-value {
    max-width: 150px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.filter-chip-remove {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    cursor: pointer;
    font-size: 0.7rem;
    line-height: 1;
    transition: background 0.2s;
}

.filter-chip-remove:hover {
    background: var(--primary-dark);
}

.btn-clear-filters {
    padding: 4px 10px;
    font-size: 0.8rem;
    background: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border);
    border-radius: 6px;
    cursor: pointer;
    margin-left: 8px;
}

.btn-clear-filters:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Dark mode para filtros WorkWithPlus */
[data-theme="dark"] .filters-bar {
    background: #2d3748;
    border-color: #4a5568;
}

[data-theme="dark"] .filter-column-select,
[data-theme="dark"] .filter-value-input {
    background: #1a202c;
    border-color: #4a5568;
    color: #e2e8f0;
}

[data-theme="dark"] .filter-chip {
    background: rgba(255, 67, 56, 0.2);
    color: #fca5a5;
}

[data-theme="dark"] .sortable-header:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .btn-clear-filters {
    border-color: #4a5568;
    color: #a0aec0;
}

[data-theme="dark"] .btn-clear-filters:hover {
    background: #4a5568;
    color: #e2e8f0;
}

/* ==================== FILTROS POR COLUMNA WORKWITHPLUS ==================== */

/* Wrapper para header con icono de filtro */
.column-header-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2px;
    width: 100%;
}

/* Iconos SVG en headers */
.sort-arrow {
    width: 8px;
    height: 8px;
    opacity: 0.4;
    transition: opacity 0.2s, transform 0.2s;
}

.sort-arrow.neutral {
    height: 12px;
}

.sort-icon.active .sort-arrow {
    opacity: 1;
    color: var(--primary);
}

.sortable-header:hover .sort-arrow {
    opacity: 0.7;
}

.filter-icon-svg {
    width: 12px;
    height: 12px;
}

/* Botón de filtro en header */
.column-filter-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px;
    min-width: 18px;
    cursor: pointer;
    opacity: 0.4;
    padding: 0;
    border-radius: 3px;
    transition: all 0.2s;
    user-select: none;
    margin-left: 2px;
    color: var(--text-secondary);
    border: 1px solid transparent;
    background: transparent;
    flex-shrink: 0;
}

.column-filter-btn:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.06);
    border-color: var(--border);
}

.column-filter-btn.active {
    opacity: 1;
    color: white;
    background: var(--primary);
    border-color: var(--primary);
}

.column-filter-btn .filter-icon-svg {
    width: 10px;
    height: 10px;
}

/* Popup de filtro profesional */
.filter-popup {
    background: var(--bg-primary, white);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
    min-width: 200px;
    max-width: 280px;
    overflow: hidden;
    font-size: 0.72rem;
    display: flex;
    flex-direction: column;
}

/* Header del popup */
.filter-popup-header {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 6px 8px;
    background: linear-gradient(135deg, var(--primary), var(--primary-dark));
    color: white;
}

.filter-popup-icon {
    display: flex;
    align-items: center;
    opacity: 0.9;
}

.filter-popup-icon svg {
    width: 12px;
    height: 12px;
}

.filter-popup-title {
    flex: 1;
    font-weight: 600;
    font-size: 0.72rem;
}

.filter-popup-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    background: rgba(255, 255, 255, 0.15);
    border: none;
    border-radius: 4px;
    color: white;
    font-size: 0.9rem;
    cursor: pointer;
    transition: background 0.2s;
    line-height: 1;
}

.filter-popup-close:hover {
    background: rgba(255, 255, 255, 0.25);
}

/* Body del popup */
.filter-popup-body {
    padding: 0;
    flex: 1;
    min-height: 0;
    overflow-y: auto;
}

.filter-popup-section {
    margin-bottom: 10px;
}

.filter-popup-section:last-child {
    margin-bottom: 0;
}

.filter-popup-label {
    display: block;
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
    margin-bottom: 5px;
}

.filter-popup-operators {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.filter-popup-operator {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.75rem;
    color: var(--text-primary);
    cursor: pointer;
    padding: 5px 8px;
    border-radius: 4px;
    transition: background 0.15s;
    position: relative;
}

.filter-popup-operator:hover {
    background: var(--bg-secondary, #f5f5f5);
}

.filter-popup-operator input[type="radio"] {
    position: absolute;
    opacity: 0;
    width: 0;
    height: 0;
}

.filter-radio-custom {
    width: 14px;
    height: 14px;
    border: 2px solid var(--border);
    border-radius: 50%;
    transition: all 0.15s;
    position: relative;
    flex-shrink: 0;
}

.filter-popup-operator input[type="radio"]:checked + .filter-radio-custom {
    border-color: var(--primary);
}

.filter-popup-operator input[type="radio"]:checked + .filter-radio-custom::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    background: var(--primary);
    border-radius: 50%;
}

.filter-operator-text {
    flex: 1;
}

.filter-popup-input {
    width: 100%;
    padding: 7px 10px;
    font-size: 0.75rem;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--bg-primary);
    color: var(--text-primary);
    box-sizing: border-box;
    transition: border-color 0.2s, box-shadow 0.2s;
}

.filter-popup-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 255, 67, 56), 0.1);
}

.filter-popup-input::placeholder {
    color: var(--text-tertiary, #aaa);
}

/* Sección de valores disponibles (estilo Excel) */
.filter-popup-values-section {
    margin-top: 4px;
}

.filter-popup-values-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.filter-popup-values-count {
    font-size: 0.65rem;
    color: var(--text-light);
    font-weight: 500;
}

.filter-popup-values {
    max-height: min(320px, 40vh);
    overflow-y: auto;
    border: 1px solid var(--border);
    border-radius: 4px;
    background: var(--bg-primary);
}

.filter-value-item {
    display: flex;
    align-items: center;
    padding: 4px 6px;
    cursor: pointer;
    transition: background 0.15s;
    border-bottom: 1px solid var(--border);
    gap: 5px;
}

.filter-value-item:last-child {
    border-bottom: none;
}

.filter-value-item:hover {
    background: var(--bg-secondary);
}

.filter-value-select-all {
    background: var(--bg-tertiary);
    font-weight: 500;
    font-style: italic;
}

.filter-value-select-all:hover {
    background: var(--bg-secondary);
}

.filter-value-checkbox {
    width: 12px;
    height: 12px;
    accent-color: var(--primary);
    cursor: pointer;
    flex-shrink: 0;
}

.filter-value-text {
    font-size: 0.68rem;
    color: var(--text-primary);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Scrollbar personalizada para lista de valores */
.filter-popup-values::-webkit-scrollbar {
    width: 6px;
}

.filter-popup-values::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 3px;
}

.filter-popup-values::-webkit-scrollbar-thumb {
    background: var(--border);
    border-radius: 3px;
}

.filter-popup-values::-webkit-scrollbar-thumb:hover {
    background: var(--text-light);
}

/* Chip de filtro multi-selección */
.filter-chip-multi {
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
}

/* Footer del popup */
.filter-popup-footer {
    display: flex;
    gap: 5px;
    padding: 6px 8px;
    background: var(--bg-secondary, #f8f9fa);
    border-top: 1px solid var(--border);
    flex-shrink: 0;
}

.btn-filter-apply,
.btn-filter-clear {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 3px;
    padding: 5px 8px;
    font-size: 0.68rem;
    font-weight: 500;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
}

.btn-filter-apply {
    background: var(--primary);
    color: white;
}

.btn-filter-apply:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
}

.btn-filter-clear {
    background: white;
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.btn-filter-clear:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--text-secondary);
}

.btn-filter-apply svg,
.btn-filter-clear svg {
    flex-shrink: 0;
    width: 12px;
    height: 12px;
}

/* Pestañas del popup de filtro */
.filter-popup-tabs {
    display: flex;
    border-bottom: 1px solid var(--border);
    background: var(--bg-secondary);
}

.filter-tab {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    padding: 6px 8px;
    font-size: 0.68rem;
    font-weight: 500;
    color: var(--text-secondary);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 2px solid transparent;
}

.filter-tab:hover {
    color: var(--text-primary);
    background: rgba(0, 0, 0, 0.03);
}

.filter-tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
    background: var(--bg-primary);
}

.filter-tab svg {
    width: 11px;
    height: 11px;
}

/* Contenido de pestañas */
.filter-tab-content {
    padding: 8px;
}

/* Caja de búsqueda en pestaña valores */
.filter-search-box {
    margin-bottom: 6px;
}

.filter-search-input {
    width: 100%;
    padding: 5px 8px;
    font-size: 0.7rem;
    border: 1px solid var(--border);
    border-radius: 4px;
    background: var(--bg-primary);
    color: var(--text-primary);
    box-sizing: border-box;
}

.filter-search-input:focus {
    outline: none;
    border-color: var(--primary);
}

.filter-search-input::placeholder {
    color: var(--text-tertiary);
}

/* Mensaje sin valores */
.filter-no-values {
    font-size: 0.7rem;
    color: var(--text-tertiary);
    text-align: center;
    padding: 12px;
    font-style: italic;
}

/* Opciones de condición */
.filter-condition-operators {
    display: flex;
    flex-wrap: wrap;
    gap: 2px;
    margin-bottom: 8px;
}

.filter-condition-option {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 6px;
    font-size: 0.68rem;
    color: var(--text-primary);
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.15s;
    flex: 0 0 calc(50% - 1px);
}

.filter-condition-option:hover {
    background: var(--bg-secondary);
}

.filter-condition-option input[type="radio"] {
    display: none;
}

.filter-radio-dot {
    width: 12px;
    height: 12px;
    border: 2px solid var(--border);
    border-radius: 50%;
    flex-shrink: 0;
    position: relative;
    transition: all 0.15s;
}

.filter-condition-option input[type="radio"]:checked + .filter-radio-dot {
    border-color: var(--primary);
}

.filter-condition-option input[type="radio"]:checked + .filter-radio-dot::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 6px;
    height: 6px;
    background: var(--primary);
    border-radius: 50%;
}

.filter-condition-input {
    width: 100%;
    padding: 6px 8px;
    font-size: 0.7rem;
    border: 1px solid var(--border);
    border-radius: 4px;
    background: var(--bg-primary);
    color: var(--text-primary);
    box-sizing: border-box;
}

.filter-condition-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb, 255, 67, 56), 0.1);
}

.filter-condition-input::placeholder {
    color: var(--text-tertiary);
}

/* Footer más compacto */
.filter-popup-footer .btn-filter-clear {
    flex: 0 0 auto;
    padding: 6px 8px;
}

/* Botón guardar filtros */
.btn-filter-save {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 5px 8px;
    background: #f0f9ff;
    color: #0284c7;
    border: 1px solid #bae6fd;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-filter-save:hover {
    background: #e0f2fe;
    border-color: #7dd3fc;
}

[data-theme="dark"] .btn-filter-save {
    background: #0c4a6e;
    color: #7dd3fc;
    border-color: #0369a1;
}

[data-theme="dark"] .btn-filter-save:hover {
    background: #075985;
}

/* Inputs de rango */
.filter-inputs-container {
    padding: 8px;
}

.filter-range-inputs {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-range-inputs .filter-condition-input {
    flex: 1;
    min-width: 0;
}

.filter-range-separator {
    color: var(--text-secondary);
    font-size: 0.75rem;
    font-weight: 500;
}

/* Operadores negativos con estilo diferente */
.filter-condition-option.negativo {
    color: #dc2626;
}

.filter-condition-option.negativo .filter-radio-dot {
    border-color: #fca5a5;
}

.filter-condition-option.negativo input[type="radio"]:checked + .filter-radio-dot {
    border-color: #dc2626;
}

.filter-condition-option.negativo input[type="radio"]:checked + .filter-radio-dot::after {
    background: #dc2626;
}

/* Modo oscuro para operadores negativos */
[data-theme="dark"] .filter-condition-option.negativo {
    color: #fca5a5;
}

[data-theme="dark"] .filter-condition-option.negativo .filter-radio-dot {
    border-color: #7f1d1d;
}

[data-theme="dark"] .filter-condition-option.negativo input[type="radio"]:checked + .filter-radio-dot {
    border-color: #f87171;
}

[data-theme="dark"] .filter-condition-option.negativo input[type="radio"]:checked + .filter-radio-dot::after {
    background: #f87171;
}

/* Chip de filtro negativo */
.filter-chip-negative {
    background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%) !important;
    border-color: #fca5a5 !important;
}

.filter-chip-negative .filter-chip-operator {
    color: #dc2626;
}

[data-theme="dark"] .filter-chip-negative {
    background: linear-gradient(135deg, #450a0a 0%, #7f1d1d 100%) !important;
    border-color: #b91c1c !important;
}

[data-theme="dark"] .filter-chip-negative .filter-chip-operator {
    color: #fca5a5;
}

/* Sección de filtros guardados */
.filter-saved-section {
    border-top: 1px solid var(--border);
    padding: 8px;
    max-height: 120px;
    overflow-y: auto;
}

.filter-saved-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.filter-saved-title {
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary);
}

.filter-saved-list {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.filter-saved-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 8px;
    background: var(--bg-secondary);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s;
}

.filter-saved-item:hover {
    background: var(--bg-tertiary);
}

.filter-saved-name {
    flex: 1;
    font-size: 0.72rem;
    font-weight: 500;
    color: var(--text-primary);
}

.filter-saved-count {
    font-size: 0.65rem;
    color: var(--text-secondary);
    background: var(--bg-primary);
    padding: 2px 6px;
    border-radius: 10px;
}

.filter-saved-delete {
    width: 18px;
    height: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 50%;
    font-size: 0.8rem;
    transition: all 0.15s;
}

.filter-saved-delete:hover {
    background: #fee2e2;
    color: #dc2626;
}

[data-theme="dark"] .filter-saved-delete:hover {
    background: #7f1d1d;
    color: #fca5a5;
}

/* Dark mode para pestañas */
[data-theme="dark"] .filter-popup-tabs {
    background: var(--bg-secondary);
}

[data-theme="dark"] .filter-tab:hover {
    background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark"] .filter-tab.active {
    background: var(--bg-primary);
}

[data-theme="dark"] .filter-search-input,
[data-theme="dark"] .filter-condition-input {
    background: var(--bg-secondary);
    border-color: var(--border);
}

/* Contenedor de chips de filtros de columna */
.column-filters-chips {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px;
    padding: 12px 15px;
    margin-bottom: 12px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
}

[data-theme="dark"] .column-filters-chips {
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
    border-color: var(--border);
}

/* Operador en los chips */
.filter-chip-operator {
    font-size: 0.7rem;
    font-style: italic;
    opacity: 0.8;
}

/* Dark mode para filtros por columna */
[data-theme="dark"] .column-filter-btn {
    color: #a0aec0;
}

[data-theme="dark"] .column-filter-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: #4a5568;
}

[data-theme="dark"] .column-filter-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

[data-theme="dark"] .sort-arrow {
    color: #a0aec0;
}

[data-theme="dark"] .sort-icon.active .sort-arrow {
    color: var(--primary);
}

[data-theme="dark"] .filter-popup {
    background: #2d3748;
    border-color: #4a5568;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .filter-popup-body {
    background: #2d3748;
}

[data-theme="dark"] .filter-popup-label {
    color: #a0aec0;
}

[data-theme="dark"] .filter-popup-operator {
    color: #e2e8f0;
}

[data-theme="dark"] .filter-popup-operator:hover {
    background: #4a5568;
}

[data-theme="dark"] .filter-radio-custom {
    border-color: #4a5568;
}

[data-theme="dark"] .filter-popup-input {
    background: #1a202c;
    border-color: #4a5568;
    color: #e2e8f0;
}

[data-theme="dark"] .filter-popup-input::placeholder {
    color: #718096;
}

[data-theme="dark"] .filter-popup-footer {
    background: #1a202c;
    border-color: #4a5568;
}

[data-theme="dark"] .btn-filter-clear {
    background: #2d3748;
    border-color: #4a5568;
    color: #a0aec0;
}

[data-theme="dark"] .btn-filter-clear:hover {
    background: #4a5568;
    color: #e2e8f0;
}

/* Dark mode para sección de valores */
[data-theme="dark"] .filter-popup-values {
    background: #1a202c;
    border-color: #4a5568;
}

[data-theme="dark"] .filter-value-item {
    border-color: #2d3748;
}

[data-theme="dark"] .filter-value-item:hover {
    background: #2d3748;
}

[data-theme="dark"] .filter-value-select-all {
    background: #2d3748;
}

[data-theme="dark"] .filter-value-select-all:hover {
    background: #4a5568;
}

[data-theme="dark"] .filter-value-text {
    color: #e2e8f0;
}

[data-theme="dark"] .filter-popup-values::-webkit-scrollbar-track {
    background: #1a202c;
}

[data-theme="dark"] .filter-popup-values::-webkit-scrollbar-thumb {
    background: #4a5568;
}

[data-theme="dark"] .filter-popup-values::-webkit-scrollbar-thumb:hover {
    background: #718096;
}

/* ==================== ESTADOS ==================== */
.loading {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-secondary);
}

.spinner {
    border: 4px solid var(--bg-tertiary);
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    width: 48px;
    height: 48px;
    animation: spin 0.8s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

.empty-state {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-secondary);
}

.empty-state-icon {
    font-size: 4em;
    margin-bottom: 16px;
    opacity: 0.3;
    filter: grayscale(100%);
}

.empty-state h3 {
    color: var(--text-primary);
    font-weight: 700;
    margin-bottom: 8px;
}

.empty-state p {
    color: var(--text-light);
    font-size: 0.9375rem;
}

/* Carga minimalista inline (dentro del grid) */
.inline-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    gap: 16px;
    color: var(--text-secondary);
}

.inline-loading-spinner {
    width: 36px;
    height: 36px;
    border: 3px solid var(--border);
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: inline-spin 0.8s linear infinite;
}

.inline-loading p {
    font-size: var(--font-size-sm);
    margin: 0;
}

@keyframes inline-spin {
    to {
        transform: rotate(360deg);
    }
}

[data-theme="dark"] .inline-loading {
    color: var(--text-secondary);
}

[data-theme="dark"] .inline-loading-spinner {
    border-color: var(--border);
    border-top-color: var(--primary);
}

.error-message {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #991b1b;
    padding: 16px 20px;
    border-radius: var(--radius);
    margin: 20px 24px;
    border-left: 4px solid #dc2626;
    font-weight: 600;
    box-shadow: var(--shadow-sm);
}

/* ==================== MODAL MODERNO ==================== */
.detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 1000;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.modal-content {
    background: var(--bg-primary);
    padding: 32px;
    border-radius: var(--radius-xl);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: var(--shadow-xl);
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 2px solid var(--border);
}

.modal-header h2 {
    color: var(--text-primary);
    font-weight: 700;
    font-size: 1.5rem;
    letter-spacing: -0.01em;
}

.modal-close {
    background: var(--bg-secondary);
    border: none;
    font-size: 1.5em;
    cursor: pointer;
    color: var(--text-secondary);
    padding: 8px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    transform: rotate(90deg);
}

.detail-grid {
    display: grid;
    gap: 12px;
}

.detail-item {
    display: flex;
    justify-content: space-between;
    padding: 14px 16px;
    background: var(--bg-secondary);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    transition: all 0.2s;
}

.detail-item:hover {
    background: var(--bg-tertiary);
    transform: translateX(4px);
}

.detail-label {
    font-weight: 700;
    color: var(--text-secondary);
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.detail-value {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 0.9375rem;
}

/* ==================== TARJETAS MÓVIL ==================== */
.cards-container {
    display: none;
}

.stock-card {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    margin-bottom: 12px;
    box-shadow: var(--shadow-sm);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.stock-card:active {
    transform: scale(0.98);
    box-shadow: var(--shadow);
}

.stock-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 14px;
    padding-bottom: 14px;
    border-bottom: 1px solid var(--border);
}

.stock-card-title {
    font-weight: 700;
    color: var(--text-primary);
    font-size: 0.9375rem;
    flex: 1;
    padding-right: 12px;
    line-height: 1.4;
}

.stock-card-body {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-bottom: 14px;
}

.stock-card-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.stock-card-label {
    font-size: 0.6875rem;
    color: var(--text-secondary);
    text-transform: uppercase;
    font-weight: 700;
    letter-spacing: 0.05em;
}

.stock-card-value {
    font-size: 0.9375rem;
    color: var(--text-primary);
    font-weight: 600;
}

.stock-card-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
}

/* ==================== THUMBNAILS EN GRID ==================== */

/* Celda de thumbnail en tabla */
.stock-thumb-cell {
    width: 70px;
    padding: 8px !important;
}

.stock-thumb-container {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-sm);
    overflow: hidden;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
}

.stock-thumb {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.stock-thumb.loaded {
    opacity: 1;
}

/* Imagen en tarjeta móvil */
.stock-card-image {
    width: 100%;
    height: 140px;
    border-radius: var(--radius-sm) var(--radius-sm) 0 0;
    overflow: hidden;
    background: var(--bg-secondary);
    margin: -16px -16px 12px -16px;
    width: calc(100% + 32px);
}

.stock-card-image .stock-thumb {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Placeholder cuando no hay imagen */
.stock-thumb-container::before,
.stock-card-image::before {
    content: '';
    position: absolute;
    width: 30px;
    height: 30px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23999' viewBox='0 0 24 24'%3E%3Cpath d='M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    opacity: 0.3;
}

.stock-thumb-container,
.stock-card-image {
    position: relative;
}

.stock-thumb.loaded+ ::before,
.stock-thumb-container:has(.loaded)::before,
.stock-card-image:has(.loaded)::before {
    display: none;
}

/* Responsive para thumbnails */
@media (max-width: 768px) {
    .stock-card-image {
        height: 120px;
    }
}

/* Dark mode para thumbnails */
[data-theme="dark"] .stock-thumb-container,
[data-theme="dark"] .stock-card-image {
    background: var(--bg-tertiary);
}

/* ==================== GRID DE TARJETAS CON IMAGEN ==================== */
/* Vista de catálogo cuando GRID_CON_IMAGENES está activo */

.stock-grid-images {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 16px;
    padding: 16px;
}

.stock-image-card {
    background: var(--bg-primary);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    border: 1px solid var(--border-light);
}

.stock-image-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-lg);
}

.stock-image-card-img {
    width: 100%;
    height: 180px;
    background: var(--bg-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.stock-image-card-img::before {
    content: '';
    position: absolute;
    width: 40px;
    height: 40px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ccc' viewBox='0 0 24 24'%3E%3Cpath d='M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z'/%3E%3C/svg%3E");
    background-size: contain;
    opacity: 0.5;
}

.stock-image-card-img .stock-thumb {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: relative;
    z-index: 1;
}

.stock-image-card-img:has(.stock-thumb.loaded)::before {
    display: none;
}

.stock-image-card-info {
    padding: 12px;
}

.stock-image-card-code {
    font-weight: 600;
    color: var(--primary);
    font-size: 0.9rem;
    margin-bottom: 4px;
}

.stock-image-card-desc {
    font-size: 0.85rem;
    color: var(--text-primary);
    margin-bottom: 4px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1.3;
}

.stock-image-card-details {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 8px;
}

.stock-image-card-stock {
    display: flex;
    align-items: center;
}

.stock-image-card-stock .badge {
    font-size: 0.8rem;
}

/* Responsive grid de imágenes */
@media (max-width: 768px) {
    .stock-grid-images {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 12px;
        padding: 12px;
    }

    .stock-image-card-img {
        height: 140px;
    }

    .stock-image-card-info {
        padding: 10px;
    }

    .stock-image-card-code {
        font-size: 0.85rem;
    }

    .stock-image-card-desc {
        font-size: 0.8rem;
    }
}

@media (max-width: 480px) {
    .stock-grid-images {
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        padding: 10px;
    }

    .stock-image-card-img {
        height: 120px;
    }
}

/* Dark mode para grid de imágenes */
[data-theme="dark"] .stock-image-card {
    background: var(--bg-secondary);
    border-color: var(--border-color);
}

[data-theme="dark"] .stock-image-card:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .stock-image-card-img {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .stock-image-card-img::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23555' viewBox='0 0 24 24'%3E%3Cpath d='M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z'/%3E%3C/svg%3E");
}

/* ==================== PAGINACIÓN ==================== */
.pagination-container {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 10px 16px;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border-light);
}

.pagination-info {
    font-size: 0.8rem;
    color: var(--text-secondary);
}

.pagination-buttons {
    display: flex;
    gap: 4px;
    flex-wrap: wrap;
    justify-content: center;
}

.pagination-btn {
    min-width: 32px;
    height: 32px;
    padding: 0 8px;
    border: 1px solid var(--border-light);
    background: var(--bg-primary);
    color: var(--text-primary);
    border-radius: var(--radius-sm);
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.pagination-btn:hover:not(:disabled) {
    background: var(--bg-secondary);
    border-color: var(--primary);
    color: var(--primary);
}

.pagination-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.pagination-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* Dark mode paginación */
[data-theme="dark"] .pagination-container {
    background: var(--bg-secondary);
    border-color: var(--border-color);
}

[data-theme="dark"] .pagination-btn {
    background: var(--bg-tertiary);
    border-color: var(--border-color);
    color: var(--text-primary);
}

[data-theme="dark"] .pagination-btn:hover:not(:disabled) {
    background: var(--bg-primary);
    border-color: var(--primary);
}

/* Responsive paginación */
@media (max-width: 480px) {
    .pagination-btn {
        min-width: 36px;
        height: 36px;
        padding: 0 8px;
        font-size: 0.85rem;
    }
}

/* ==================== TABLE SCROLL CONTAINER ==================== */
.table-scroll-container {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: auto;
}

.table-scroll-container table thead {
    position: sticky;
    top: 0;
    z-index: 10;
}

/* Stock table wrapper */
.stock-table-wrapper {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
    max-height: calc(100vh - 140px);
    border-radius: var(--radius, 10px);
    border: 1px solid var(--border, #e0e0e0);
}

/* ==================== GRID FOOTER (total de registros) ==================== */
.grid-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    margin-top: 10px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: var(--radius, 10px);
    font-size: 13px;
    color: var(--text-secondary, #666);
    font-weight: 500;
    flex-shrink: 0;
    gap: 15px;
    flex-wrap: wrap;
}

.grid-footer .pagination-info {
    font-size: 13px;
    color: var(--text-secondary, #666);
}

.grid-footer .pagination-buttons {
    display: flex;
    gap: 4px;
    align-items: center;
}

@media (max-width: 576px) {
    .grid-footer {
        flex-direction: column;
        gap: 10px;
        text-align: center;
    }
}

[data-theme="dark"] .grid-footer {
    background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
    border: 1px solid var(--border-color, #3d3d3d);
    color: var(--text-secondary);
}

/* ==================== CARRITO FLOTANTE ==================== */
.carrito-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    border-radius: 50%;
    width: 64px;
    height: 64px;
    font-size: 28px;
    cursor: pointer;
    box-shadow: var(--shadow-xl);
    z-index: 999;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.carrito-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 20px 40px rgba(255, 107, 107, 0.4);
}

.carrito-btn:active {
    transform: scale(0.95);
}

.carrito-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: linear-gradient(135deg, var(--danger) 0%, #dc2626 100%);
    color: white;
    border-radius: 50%;
    width: 26px;
    height: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 13px;
    font-weight: 700;
    border: 3px solid white;
    box-shadow: var(--shadow);
    animation: pulse 2s infinite;
}

@keyframes pulse {

    0%,
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
    }

    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
    }
}

/* ==================== MODAL DEL CARRITO ==================== */
#carrito-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 2000;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.3s ease;
}

#carrito-modal .modal-content {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    padding: 0;
    max-width: 900px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    box-shadow: var(--shadow-xl);
    animation: slideUp 0.3s ease;
}

#carrito-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 24px 32px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: none;
}

#carrito-modal .modal-header h2 {
    margin: 0;
    color: white;
    font-size: 1.5rem;
    font-weight: 700;
}

#carrito-modal .modal-close {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    font-size: 24px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

#carrito-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

#carrito-content {
    padding: 32px;
    overflow-y: auto;
    flex: 1;
}

.carrito-items {
    margin: 0 0 24px 0;
}

.carrito-item {
    display: grid;
    grid-template-columns: 3fr 1.5fr auto;
    gap: 24px;
    padding: 20px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius);
    margin-bottom: 16px;
    align-items: center;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--bg-primary);
}

.carrito-item:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow);
    transform: translateY(-2px);
}

.carrito-item-info {
    font-size: 0.9375rem;
    line-height: 1.6;
}

.carrito-item-info strong {
    color: var(--primary);
    font-size: 1rem;
    display: block;
    margin-bottom: 8px;
    font-weight: 700;
}

.carrito-item-info small {
    color: var(--text-secondary);
    display: block;
    margin-top: 6px;
    font-weight: 500;
}

.carrito-item-cantidad {
    text-align: center;
    padding: 16px;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
}

.carrito-item-cantidad strong {
    display: block;
    margin-bottom: 8px;
    color: var(--text-secondary);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 700;
}

.cantidad-value {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--primary);
}

.carrito-item-actions button {
    padding: 10px 20px;
    font-size: 0.875rem;
    font-weight: 600;
}

.carrito-footer {
    display: flex;
    gap: 16px;
    justify-content: space-between;
    margin-top: 32px;
    padding-top: 24px;
    border-top: 2px solid var(--border);
}

.carrito-footer button {
    flex: 1;
}

/* Carrito vacío */
.carrito-empty {
    text-align: center;
    padding: 80px 20px;
    color: var(--text-secondary);
}

.carrito-empty-icon {
    font-size: 5rem;
    margin-bottom: 24px;
    opacity: 0.3;
    filter: grayscale(100%);
}

.carrito-empty h3 {
    color: var(--text-primary);
    font-weight: 700;
    margin-bottom: 12px;
    font-size: 1.25rem;
}

.carrito-empty p {
    color: var(--text-light);
    font-size: 0.9375rem;
}

/* Formulario de envío */
.envio-form {
    padding: 0;
}

.envio-form h3 {
    color: var(--primary);
    margin-bottom: 16px;
    font-size: 1.25rem;
    font-weight: 700;
}

.envio-form p {
    color: var(--text-secondary);
    margin-bottom: 24px;
    line-height: 1.6;
    font-weight: 500;
}

.envio-form .form-group {
    margin-bottom: 24px;
}

.envio-form label {
    display: block;
    margin-bottom: 8px;
    font-weight: 700;
    color: var(--text-primary);
    font-size: 0.8125rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.envio-form textarea {
    width: 100%;
    padding: 14px 16px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    font-family: inherit;
    font-size: 0.9375rem;
    resize: vertical;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--bg-primary);
    color: var(--text-primary);
    font-weight: 500;
    min-height: 120px;
}

.envio-form textarea:hover {
    border-color: var(--primary-light);
}

.envio-form textarea:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
    background: var(--bg-primary);
}

[data-theme="dark"] .envio-form textarea {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .envio-form textarea:focus {
    background: var(--bg-primary);
}

/* Checkbox para formulario de envío */
.checkbox-group {
    margin-top: 16px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    font-size: 0.9375rem;
    color: var(--text-primary);
    user-select: none;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: var(--primary);
    cursor: pointer;
}

.checkbox-label span {
    flex: 1;
}

[data-theme="dark"] .checkbox-label {
    color: var(--text-primary);
}

/* ==================== PANEL DE FIRMA ==================== */
.signature-panel {
    margin-top: 16px;
    padding: 16px;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius);
}

.signature-panel label {
    display: block;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
    font-size: 0.9rem;
}

.signature-canvas-container {
    border: 2px dashed var(--border);
    border-radius: var(--radius);
    background: #ffffff;
    padding: 2px;
    cursor: crosshair;
}

.signature-canvas-container canvas {
    display: block;
    width: 100%;
    border-radius: calc(var(--radius) - 2px);
}

.signature-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 10px;
    gap: 10px;
}

.btn-sm {
    padding: 6px 14px;
    font-size: 0.8rem;
}

[data-theme="dark"] .signature-panel {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .signature-canvas-container {
    border-color: var(--border);
    background: #1e293b;
}

/* Scroll personalizado */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: var(--bg-secondary);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, var(--primary), var(--primary-dark));
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

/* ==================== RESPONSIVE MÓVIL ==================== */
@media (max-width: 768px) {
    body {
        background: var(--bg-primary);
    }

    .container {
        padding: 12px;
    }

    header {
        grid-template-columns: 1fr;
        padding: 16px;
        gap: 16px;
        text-align: center;
        margin-bottom: 16px;
    }

    .logo {
        height: 36px;
        margin: 0 auto;
    }

    h1 {
        font-size: 1.25rem;
    }

    .subtitle {
        font-size: 0.8125rem;
    }

    .user-info {
        flex-direction: column;
        width: 100%;
        padding: 12px;
        gap: 10px;
    }

    .btn-logout {
        width: 100%;
    }

    .filters {
        padding: 16px;
    }

    .filters h2 {
        font-size: 1rem;
    }

    .filter-grid {
        grid-template-columns: 1fr;
        gap: 12px;
    }

    input,
    select {
        padding: 10px 14px;
        font-size: 0.875rem;
    }

    .button-group {
        flex-direction: column;
    }

    button {
        width: 100%;
        justify-content: center;
    }

    .table-container {
        padding: 12px;
    }

    .table-container table {
        display: none !important;
    }

    .cards-container {
        display: block !important;
    }

    .modal-content {
        padding: 24px;
        width: 95%;
        border-radius: var(--radius-lg);
    }

    .modal-header h2 {
        font-size: 1.25rem;
    }

    .detail-item {
        flex-direction: column;
        gap: 6px;
    }

    /* Carrito móvil */
    .carrito-btn {
        bottom: 20px;
        right: 20px;
        width: 56px;
        height: 56px;
        font-size: 24px;
    }

    .carrito-badge {
        width: 22px;
        height: 22px;
        font-size: 11px;
    }

    #carrito-modal .modal-content {
        width: 95%;
        max-height: 90vh;
    }

    #carrito-modal .modal-header {
        padding: 20px;
    }

    #carrito-modal .modal-header h2 {
        font-size: 1.25rem;
    }

    #carrito-content {
        padding: 20px;
    }

    .carrito-item {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 16px;
        padding: 16px;
    }

    .carrito-item-cantidad {
        margin: 0 auto;
        max-width: 200px;
    }

    .carrito-footer {
        flex-direction: column;
        gap: 12px;
    }

    .carrito-footer button {
        width: 100%;
    }
}

@media (max-width: 375px) {
    h1 {
        font-size: 1.125rem;
    }

    .logo {
        height: 32px;
    }

    .filters h2 {
        font-size: 0.9375rem;
    }

    .carrito-btn {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
}

/* ==================== GROUPBOX DETALLES ==================== */

.detail-groupbox {
    width: 100%;
    margin-top: 15px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    position: relative;
    padding: 20px 15px 10px;
}

.detail-groupbox-title {
    position: absolute;
    top: -10px;
    left: 15px;
    background: var(--bg-primary, #fff);
    padding: 0 8px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--primary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

[data-theme="dark"] .detail-groupbox-title {
    background: var(--bg-primary, #1a1a2e);
}

.detail-groupbox-content {
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* ==================== SECCIÓN DE EMPAQUETADO ==================== */

.detail-packaging-section {
    width: 100%;
    margin-top: 20px;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.detail-packaging-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid var(--primary);
}

.detail-packaging-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
}

.detail-packaging-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 15px;
    background: var(--bg-primary);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    transition: all 0.3s ease;
}

.detail-packaging-item:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow);
    transform: translateY(-2px);
}

.detail-packaging-icon {
    font-size: 2em;
    line-height: 1;
}

.detail-packaging-info {
    flex: 1;
}

.detail-packaging-label {
    font-size: 0.85em;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.detail-packaging-value {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--text-primary);
}

/* ==================== GALERÍA DE IMÁGENES ==================== */

.detail-imagenes {
    width: 100%;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}

.detail-stock-badge {
    text-align: center;
    margin: 12px 0 4px 0;
}

.detail-stock-badge .badge {
    font-size: 1.1rem;
    padding: 8px 20px;
    border-radius: 20px;
}

.detail-imagenes-loading {
    text-align: center;
    color: var(--text-secondary);
    padding: 20px;
}

.detail-imagenes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 12px;
    width: 100%;
}

.detail-imagen-item {
    aspect-ratio: 1;
    border-radius: var(--radius-sm);
    overflow: hidden;
    cursor: pointer;
    border: 2px solid var(--border);
    transition: all 0.3s ease;
}

.detail-imagen-item:hover {
    border-color: var(--primary);
    transform: scale(1.05);
    box-shadow: var(--shadow-lg);
}

.detail-imagen-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.detail-no-imagenes {
    text-align: center;
    color: var(--text-light);
    font-style: italic;
    padding: 15px;
}

.detail-actions {
    width: 100%;
    padding: 20px 0 10px;
    margin-top: 15px;
    border-top: 1px solid var(--border);
    display: flex;
    justify-content: center;
}

/* Modal para ampliar imagen */
.imagen-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    cursor: pointer;
}

.imagen-modal-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    cursor: default;
}

.imagen-modal-content img {
    max-width: 100%;
    max-height: 90vh;
    object-fit: contain;
    border-radius: var(--radius);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

.imagen-modal-close {
    position: absolute;
    top: -40px;
    right: 0;
    background: transparent;
    border: none;
    color: white;
    font-size: 30px;
    cursor: pointer;
    padding: 5px 10px;
    transition: transform 0.2s;
}

.imagen-modal-close:hover {
    transform: scale(1.2);
}

@media (max-width: 768px) {
    .detail-imagenes-grid {
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 8px;
    }

    .imagen-modal-close {
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 50%;
        width: 40px;
        height: 40px;
    }

    .detail-packaging-grid {
        grid-template-columns: 1fr;
        gap: 10px;
    }

    .detail-packaging-section {
        padding: 15px;
    }

    .detail-packaging-item {
        padding: 12px;
    }
}

/* ==================== SELECTOR DE IDIOMA ==================== */

.header-actions {
    display: flex;
    align-items: center;
    gap: 16px;
}

.lang-selector-wrapper {
    display: flex;
    align-items: center;
}

.lang-selector {
    padding: 8px 12px;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 0.875rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    min-width: 70px;
}

.lang-selector:hover {
    border-color: var(--primary-light);
    background: var(--bg-primary);
}

.lang-selector:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
}

/* Selector fijo para login/register/verify */
.lang-selector-fixed {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 100;
}

/* Controles superiores en login (tema + idioma) */
.login-top-controls {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 15px;
}

.theme-toggle-login {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    padding: 6px 12px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    transition: background 0.3s;
}

.theme-toggle-login:hover {
    background: rgba(255, 255, 255, 0.2);
}

.theme-toggle-login .theme-icon {
    font-size: 1.1rem;
}

.theme-toggle-login .switch {
    margin: 0;
}

/* Dark mode para controles de login */
[data-theme="dark"] .theme-toggle-login {
    background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .theme-toggle-login:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Light mode para controles de login */
[data-theme="light"] .theme-toggle-login {
    background: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .theme-toggle-login:hover {
    background: rgba(0, 0, 0, 0.2);
}

/* Selector de idioma en headers con fondo oscuro/rojo */
.lang-selector-header {
    background: rgba(255, 255, 255, 0.15) !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    color: white !important;
}

.lang-selector-header option {
    background: #333;
    color: white;
}

/* Selector de idioma dentro del menú */
.lang-selector-menu {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 13px;
    cursor: pointer;
    margin-left: auto;
}

.lang-selector-menu:focus {
    outline: none;
    border-color: var(--primary);
}

[data-theme="dark"] .lang-selector-menu {
    background: var(--bg-tertiary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .lang-selector-menu option {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

/* Estilos para headers de páginas de administración */
.page-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    padding: 12px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.15);
}

.page-header .logo-section {
    display: flex;
    align-items: center;
    gap: 15px;
}

.page-header .logo {
    height: 36px;
    filter: brightness(0) invert(1);
}

.page-header h1 {
    color: white !important;
    background: none !important;
    -webkit-background-clip: unset !important;
    -webkit-text-fill-color: white !important;
    background-clip: unset !important;
    margin: 0;
    font-size: 1.2rem;
    font-weight: 700;
}

.page-header .company-name {
    color: rgba(255, 255, 255, 0.95) !important;
    font-size: 1.1rem;
    font-weight: 600;
    margin: 2px 0 0 0;
    letter-spacing: -0.01em;
}

.page-header .header-titles {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.page-header .subtitle {
    color: rgba(255, 255, 255, 0.85);
    font-size: 0.875rem;
    font-weight: 500;
    margin: 0;
    display: none; /* Ocultar en desktop para header compacto */
}

.page-header .header-actions {
    display: flex;
    align-items: center;
    gap: 15px;
}

.page-header .back-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s;
}

.page-header .back-btn:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-1px);
}

@media (max-width: 768px) {
    .page-header {
        flex-direction: column;
        gap: 12px;
        text-align: center;
        padding: 12px 16px;
    }

    .page-header .logo-section {
        flex-direction: column;
        gap: 8px;
    }

    .page-header .logo {
        height: 32px;
    }

    .page-header h1 {
        font-size: 1rem;
    }

    .page-header .subtitle {
        font-size: 0.7rem;
        display: block; /* Mostrar en móvil */
    }

    .page-header .header-actions {
        flex-wrap: wrap;
        justify-content: center;
        width: 100%;
    }

    .page-header .back-btn {
        width: 100%;
        justify-content: center;
    }
}

@media (max-width: 768px) {
    .header-actions {
        flex-direction: column;
        gap: 10px;
        width: 100%;
    }

    .lang-selector-wrapper {
        width: 100%;
    }

    .lang-selector {
        width: 100%;
        text-align: center;
    }

    .lang-selector-fixed {
        top: 10px;
        right: 10px;
    }

    .lang-selector-fixed .lang-selector {
        padding: 6px 10px;
        font-size: 0.8rem;
        min-width: 60px;
    }

    .login-top-controls {
        top: 10px;
        right: 10px;
        gap: 8px;
    }

    .theme-toggle-login {
        padding: 5px 10px;
    }

    .theme-toggle-login .theme-icon {
        font-size: 1rem;
    }

    /* Switch más pequeño en móvil */
    .theme-toggle-login .switch {
        width: 36px;
        height: 20px;
    }

    .theme-toggle-login .slider:before {
        height: 14px;
        width: 14px;
        left: 3px;
        bottom: 3px;
    }

    .theme-toggle-login input:checked + .slider:before {
        transform: translateX(16px);
    }
}

/* Breakpoint tablet para controles de login */
@media (min-width: 769px) and (max-width: 1024px) {
    .login-top-controls {
        top: 15px;
        right: 15px;
        gap: 12px;
    }
}

/* Pantallas grandes */
@media (min-width: 1440px) {
    .login-top-controls {
        top: 30px;
        right: 40px;
    }
}

/* ==================== MODAL DE CANTIDAD CON BOTONES +/- ==================== */

.quantity-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1500;
    animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

.quantity-modal {
    background: white;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl);
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow: auto;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    from {
        transform: translateY(20px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.quantity-modal-header {
    padding: 24px;
    border-bottom: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
}

.quantity-modal-header h3 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 700;
    color: white;
    display: flex;
    align-items: center;
    gap: 10px;
}

.quantity-modal-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    font-size: 24px;
    color: white;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
    line-height: 1;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.quantity-modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
    color: white;
    transform: rotate(90deg);
}

.quantity-modal-body {
    padding: 24px;
}

.quantity-product-info {
    background: var(--bg-secondary);
    padding: 16px;
    border-radius: var(--radius);
    margin-bottom: 24px;
    border: 1px solid var(--border);
}

.quantity-product-title {
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 12px;
    line-height: 1.4;
}

.quantity-product-details {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 12px;
}

.quantity-detail-item {
    font-size: 0.875rem;
    color: var(--text-secondary);
    background: white;
    padding: 4px 10px;
    border-radius: var(--radius-sm);
}

.quantity-detail-item strong {
    color: var(--text-primary);
}

.quantity-stock-info {
    display: flex;
    align-items: center;
    gap: 8px;
    padding-top: 12px;
    border-top: 1px solid var(--border);
}

.quantity-stock-label {
    font-size: 0.875rem;
    color: var(--text-secondary);
    font-weight: 600;
}

.quantity-stock-value {
    font-size: 1rem;
    font-weight: 700;
    color: var(--success);
    background: rgba(16, 185, 129, 0.1);
    padding: 4px 12px;
    border-radius: var(--radius-sm);
}

.quantity-input-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.quantity-label {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text-primary);
}

.quantity-control {
    display: flex;
    align-items: stretch;
    gap: 0;
    background: var(--bg-secondary);
    border: 2px solid var(--border);
    border-radius: var(--radius);
    overflow: hidden;
    transition: all 0.3s;
}

.quantity-control:focus-within {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
}

.quantity-btn {
    background: white;
    border: 2px solid var(--border);
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: var(--text-secondary);
    border-radius: var(--radius-sm);
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1;
}

.quantity-btn:hover {
    background: var(--bg-tertiary);
    border-color: var(--text-secondary);
    color: var(--text-primary);
    transform: scale(1.05);
}

.quantity-btn:active {
    transform: scale(0.95);
}

.quantity-btn-minus {
    color: var(--text-secondary);
}

.quantity-btn-minus:hover {
    background: #fee2e2;
    border-color: #dc3545;
    color: #dc3545;
}

.quantity-btn-plus {
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
    border-color: var(--primary);
    color: white;
}

.quantity-btn-plus:hover {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-color: var(--primary-dark);
    color: white;
    box-shadow: var(--shadow-sm);
}

.quantity-input {
    flex: 1;
    border: none;
    text-align: center;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    padding: 12px;
    background: white;
    outline: none;
}

.quantity-input::-webkit-inner-spin-button,
.quantity-input::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.quantity-quick-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.quantity-package-group {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border: 1.5px solid var(--border);
    border-radius: var(--radius);
    transition: all 0.2s;
}

.quantity-package-group:hover {
    border-color: var(--primary-light);
    box-shadow: var(--shadow-sm);
}

.quantity-package-label {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--text-primary);
    flex: 1;
}

.quantity-package-controls {
    display: flex;
    gap: 6px;
    align-items: center;
}

.quantity-package-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 1.5px solid var(--border);
    border-radius: var(--radius-sm);
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    padding: 0;
}

.quantity-package-btn:hover {
    background: var(--bg-tertiary);
    border-color: var(--text-secondary);
    color: var(--text-primary);
    transform: scale(1.05);
}

.quantity-package-btn:active {
    transform: scale(0.95);
}

.quantity-package-btn-primary {
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
    border-color: var(--primary);
    color: white;
}

.quantity-package-btn-primary:hover {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-color: var(--primary-dark);
    color: white;
    box-shadow: var(--shadow-sm);
}

.quantity-modal-footer {
    padding: 20px 24px;
    border-top: 1px solid var(--border);
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    background: var(--bg-secondary);
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
}

.quantity-btn-cancel {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    padding: 0;
    background: #6c757d;
    border: 2px solid #6c757d;
    border-radius: var(--radius-sm);
    color: white;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: var(--shadow-sm);
}

.quantity-btn-cancel svg {
    stroke: white !important;
    fill: none;
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.quantity-btn-cancel:hover {
    background: #5a6268;
    border-color: #5a6268;
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.quantity-btn-cancel:active {
    transform: translateY(0);
}

.quantity-btn-confirm {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 24px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border: 2px solid var(--primary);
    border-radius: var(--radius-sm);
    font-size: 0.9375rem;
    font-weight: 700;
    color: white;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: var(--shadow-sm);
}

.quantity-btn-confirm svg {
    stroke: white !important;
    fill: none;
    width: 20px;
    height: 20px;
    flex-shrink: 0;
}

.quantity-btn-confirm:hover {
    background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.quantity-btn-confirm:active {
    transform: translateY(0);
}

/* Responsive para modal de cantidad */
@media (max-width: 768px) {
    .quantity-modal {
        width: 95%;
        max-width: none;
    }

    .quantity-modal-header {
        padding: 20px;
    }

    .quantity-modal-header h3 {
        font-size: 1.125rem;
    }

    .quantity-modal-body {
        padding: 20px;
    }

    .quantity-product-title {
        font-size: 1rem;
    }

    .quantity-product-details {
        flex-direction: column;
        gap: 8px;
    }

    .quantity-package-group {
        padding: 10px 14px;
    }

    .quantity-package-label {
        font-size: 0.875rem;
    }

    .quantity-package-btn {
        width: 28px;
        height: 28px;
    }

    .quantity-modal-footer {
        padding: 16px 20px;
        flex-direction: row;
        justify-content: center;
    }

    .quantity-btn-cancel,
    .quantity-btn-confirm {
        width: 50px;
        height: 50px;
        padding: 0;
        min-width: 50px;
    }

    .quantity-btn-cancel svg,
    .quantity-btn-confirm svg {
        width: 24px;
        height: 24px;
    }
}

@media (max-width: 375px) {
    .quantity-modal-header h3 {
        font-size: 1rem;
    }

    .quantity-product-title {
        font-size: 0.9375rem;
    }

    .quantity-btn {
        width: 40px;
        height: 40px;
    }

    .quantity-input {
        font-size: 1.125rem;
    }
}

/* ==================== MODAL DE CONSULTA ==================== */

.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    z-index: 1500;
    align-items: center;
    justify-content: center;
    animation: fadeIn 0.2s ease;
}

.modal-overlay .modal-content {
    background: white;
    border-radius: var(--radius-lg);
    max-width: 500px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    position: relative;
}

.modal-overlay .modal-header {
    position: relative;
}

.modal-overlay .modal-close {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: white;
    font-size: 1.5em;
    cursor: pointer;
    padding: 4px 8px;
    border-radius: var(--radius-sm);
    transition: all 0.2s;
}

.modal-overlay .modal-close:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Botones de consulta en detalle */
.btn-inquiry:hover {
    background: #1976D2 !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(33, 150, 243, 0.4);
}

.btn-whatsapp:hover {
    background: #128C7E !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
}

@media (max-width: 768px) {
    .modal-overlay .modal-content {
        width: 95%;
        max-height: 85vh;
    }
}

/* ==================== PÁGINA DE LOGIN ==================== */

.login-wrapper {
    min-height: 100vh;
    display: flex;
    background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);
}

.login-sidebar {
    flex: 1;
    background: linear-gradient(135deg, #ffffff 0%, #f0f4f0 100%);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px;
    position: relative;
    overflow: hidden;
    border-right: 1px solid #e5e7eb;
}

.login-sidebar::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(124, 179, 66, 0.08) 0%, transparent 70%);
    animation: loginPulse 15s ease-in-out infinite;
}

@keyframes loginPulse {

    0%,
    100% {
        transform: scale(1);
        opacity: 0.5;
    }

    50% {
        transform: scale(1.1);
        opacity: 0.8;
    }
}

.sidebar-content {
    position: relative;
    z-index: 1;
    text-align: center;
}

.sidebar-logo {
    height: 140px;
    margin-bottom: 32px;
    filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
}

.sidebar-content h2 {
    font-size: 2.2rem;
    font-weight: 800;
    margin-bottom: 16px;
    letter-spacing: -0.02em;
    color: #1B4332;
}

.sidebar-content p {
    font-size: 1.125rem;
    color: #4a5568;
    font-weight: 500;
    line-height: 1.6;
}

/* Logo desarrollador en sidebar login */
.sidebar-developer {
    display: none;
    align-items: center;
    gap: 8px;
    position: absolute;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1;
    opacity: 0.6;
    transition: opacity 0.3s;
}

.sidebar-developer:hover {
    opacity: 1;
}

.sidebar-developer span {
    font-size: 0.7rem;
    color: #999;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.developer-logo {
    height: 24px;
    filter: grayscale(0.5);
    transition: filter 0.3s;
}

.sidebar-developer:hover .developer-logo {
    filter: grayscale(0);
}

.login-container {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px;
}

.login-box {
    background: white;
    padding: 48px;
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-xl);
    max-width: 440px;
    width: 100%;
    border: 1px solid var(--border);
}

/* Dark mode para login */
[data-theme="dark"] .login-wrapper {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
}

[data-theme="dark"] .login-sidebar {
    background: linear-gradient(135deg, #1a1a2e 0%, #0f0f1a 100%);
}

[data-theme="dark"] .login-sidebar h2,
[data-theme="dark"] .login-sidebar p {
    color: #e0e0e0;
}

[data-theme="dark"] .sidebar-developer span {
    color: #666;
}

[data-theme="dark"] .developer-logo {
    filter: grayscale(0.5) brightness(0.8);
}

[data-theme="dark"] .sidebar-developer:hover .developer-logo {
    filter: grayscale(0) brightness(1);
}

[data-theme="dark"] .login-container {
    background: transparent;
}

[data-theme="dark"] .login-box {
    background: var(--bg-secondary, #1e1e2e);
    border-color: var(--border, #333);
}

[data-theme="dark"] .login-header h1 {
    color: var(--text-primary, #fff);
    -webkit-text-fill-color: var(--text-primary, #fff);
}

[data-theme="dark"] .login-subtitle {
    color: var(--text-secondary, #aaa);
}

[data-theme="dark"] .login-form input {
    background: var(--bg-tertiary, #2a2a3e);
    border-color: var(--border, #444);
    color: var(--text-primary, #fff);
}

[data-theme="dark"] .login-form input::placeholder {
    color: var(--text-muted, #666);
}

[data-theme="dark"] .login-link,
[data-theme="dark"] .login-link a {
    color: var(--text-secondary, #aaa);
}

[data-theme="dark"] .version-indicator {
    color: var(--text-muted, #666);
}

.login-header {
    text-align: center;
    margin-bottom: 32px;
}

.mobile-logo {
    display: none;
    height: 80px;
    margin: 0 auto 24px;
}

.login-header h1 {
    font-size: 1.875rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 8px;
    letter-spacing: -0.02em;
    background: none;
    -webkit-background-clip: unset;
    -webkit-text-fill-color: var(--text-primary);
    background-clip: unset;
}

.login-subtitle {
    color: var(--text-secondary);
    font-size: 0.9375rem;
    font-weight: 500;
}

.login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.btn-login {
    background: linear-gradient(135deg, #7CB342 0%, #558B2F 100%);
    color: white;
    padding: 16px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 1.0625rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    margin-top: 8px;
    box-shadow: var(--shadow);
}

.btn-login:hover {
    background: linear-gradient(135deg, #689F38 0%, #33691E 100%);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.btn-login:active {
    transform: translateY(0);
}

.btn-login:disabled {
    background: var(--bg-tertiary);
    color: var(--text-light);
    cursor: not-allowed;
    transform: none;
}

.login-link {
    text-align: center;
    margin-top: 20px;
    font-size: 0.9375rem;
    color: var(--text-secondary);
}

.login-link a {
    color: #558B2F;
    text-decoration: none;
    font-weight: 600;
}

.login-link a:hover {
    text-decoration: underline;
}

/* Indicador de versión */
.version-indicator {
    position: fixed;
    bottom: 16px;
    right: 16px;
    font-size: 0.75rem;
    color: var(--text-light);
    background: rgba(255, 255, 255, 0.9);
    padding: 4px 10px;
    border-radius: 12px;
    border: 1px solid var(--border);
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    z-index: 100;
    backdrop-filter: blur(4px);
}

[data-theme="dark"] .version-indicator {
    background: rgba(45, 45, 68, 0.9);
    border-color: #3d3d5c;
    color: #9ca3af;
}

.version-indicator {
    cursor: pointer;
    transition: all 0.2s ease;
}

.version-indicator:hover {
    transform: scale(1.05);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* ==================== MODAL CHANGELOG ==================== */

.changelog-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.changelog-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}

.changelog-modal-content {
    position: relative;
    background: white;
    border-radius: 16px;
    width: 90%;
    max-width: 600px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.changelog-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid #e5e7eb;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-radius: 16px 16px 0 0;
}

.changelog-modal-header h2 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
    color: white;
}

.changelog-modal-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    font-size: 1.5rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.changelog-modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.changelog-modal-body {
    flex: 1;
    overflow-y: auto;
    padding: 24px;
}

.changelog-modal-footer {
    padding: 16px 24px;
    border-top: 1px solid #e5e7eb;
    text-align: center;
}

.btn-changelog-close {
    background: #6b7280;
    color: white;
    border: none;
    padding: 10px 24px;
    border-radius: 8px;
    font-size: 0.95rem;
    cursor: pointer;
    transition: background 0.2s;
}

.btn-changelog-close:hover {
    background: #4b5563;
}

/* Estilos del contenido del changelog */
.changelog-version {
    margin-bottom: 24px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e5e7eb;
}

.changelog-version:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

.changelog-version-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
}

.changelog-version-tag {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    font-family: 'SF Mono', 'Monaco', monospace;
}

.changelog-version-date {
    color: #6b7280;
    font-size: 0.85rem;
}

.changelog-version-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #1f2937;
    margin-bottom: 8px;
}

.changelog-items {
    list-style: none;
    padding: 0;
    margin: 0;
}

.changelog-items li {
    position: relative;
    padding-left: 24px;
    margin-bottom: 8px;
    font-size: 0.9rem;
    color: #4b5563;
    line-height: 1.5;
}

.changelog-items li::before {
    content: '•';
    position: absolute;
    left: 8px;
    color: var(--primary);
    font-weight: bold;
}

.changelog-badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    margin-right: 6px;
}

.changelog-badge-new {
    background: #dcfce7;
    color: #166534;
}

.changelog-badge-fix {
    background: #fef3c7;
    color: #92400e;
}

.changelog-badge-improve {
    background: #dbeafe;
    color: #1e40af;
}

/* Dark mode para changelog */
[data-theme="dark"] .changelog-modal-content {
    background: #1e1e2e;
}

[data-theme="dark"] .changelog-modal-header {
    border-color: #3d3d5c;
}

[data-theme="dark"] .changelog-modal-body {
    background: #1e1e2e;
}

[data-theme="dark"] .changelog-modal-footer {
    border-color: #3d3d5c;
}

[data-theme="dark"] .changelog-version {
    border-color: #3d3d5c;
}

[data-theme="dark"] .changelog-version-title {
    color: #e5e7eb;
}

[data-theme="dark"] .changelog-items li {
    color: #9ca3af;
}

[data-theme="dark"] .changelog-badge-new {
    background: #064e3b;
    color: #6ee7b7;
}

[data-theme="dark"] .changelog-badge-fix {
    background: #78350f;
    color: #fcd34d;
}

[data-theme="dark"] .changelog-badge-improve {
    background: #1e3a8a;
    color: #93c5fd;
}

.loading-spinner {
    border: 3px solid rgba(255, 255, 255, 0.3);
    border-top: 3px solid white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    animation: spin 0.8s linear infinite;
    display: inline-block;
    margin-right: 10px;
}

/* Modal cambio de contraseña */
.password-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.password-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
}

.password-modal-content {
    position: relative;
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    max-width: 420px;
    width: 90%;
    overflow: hidden;
    animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.password-modal-header {
    background: linear-gradient(135deg, #7CB342 0%, #558B2F 100%);
    color: white;
    padding: 24px 32px;
}

.password-modal-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 700;
}

.password-modal-body {
    padding: 32px;
}

.password-modal-subtitle {
    color: var(--text-secondary);
    margin-bottom: 24px;
    font-size: 0.9375rem;
}

#change-password-form .form-group {
    margin-bottom: 20px;
}

#change-password-form .btn-login {
    width: 100%;
    margin-top: 8px;
}

#password-alert-container .alert {
    margin-bottom: 20px;
}

/* Mobile footer inside login-box (controls + developer logo, visible when sidebar hidden) */
.login-mobile-footer {
    display: none;
    margin-top: 24px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
    text-align: center;
}

.login-mobile-controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    flex-wrap: wrap;
}

.login-mobile-controls .lang-selector {
    padding: 4px 8px;
    font-size: 0.8rem;
    min-width: 55px;
}

.version-indicator-inline {
    font-size: 0.7rem;
    color: var(--text-light);
    font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
    padding: 2px 8px;
    border-radius: 10px;
    background: rgba(0, 0, 0, 0.05);
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.2s ease;
}

.version-indicator-inline:hover {
    background: rgba(0, 0, 0, 0.1);
    transform: scale(1.05);
}

[data-theme="dark"] .version-indicator-inline {
    background: rgba(255, 255, 255, 0.05);
    color: #9ca3af;
    border-color: #3d3d5c;
}

.mobile-developer {
    display: none;
    align-items: center;
    justify-content: center;
    gap: 6px;
    opacity: 0.5;
    margin-top: 10px;
}

.mobile-developer span {
    font-size: 0.65rem;
    color: #999;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

[data-theme="dark"] .mobile-developer span {
    color: #666;
}

[data-theme="dark"] .login-mobile-footer {
    border-top-color: var(--border, #444);
}

/* Login responsive */
@media (max-width: 1024px) {
    .login-sidebar {
        display: none;
    }

    .login-container {
        flex: 1;
        background: linear-gradient(135deg, #f8fafc 0%, #e5e7eb 100%);
    }

    /* Show controls inside login panel, hide floating ones */
    .login-mobile-footer {
        display: block;
    }

    .login-top-controls {
        display: none !important;
    }

    .version-indicator {
        display: none !important;
    }
}

@media (max-width: 768px) {
    .login-container {
        padding: 20px;
    }

    .login-box {
        padding: 32px 24px;
        border-radius: var(--radius-lg);
    }

    .login-header h1 {
        font-size: 1.5rem;
    }

    .mobile-logo {
        display: block;
    }

    .btn-login {
        padding: 14px;
        font-size: 1rem;
    }
}

/* ==================== CONFIG OPTIONS (empresa-logo) ==================== */
.config-option {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.config-option-info {
    flex: 1;
    padding-right: 20px;
}

.config-option-label {
    display: block;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.config-option-desc {
    display: block;
    font-size: 0.875rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

/* Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 56px;
    height: 30px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--border);
    transition: 0.3s;
    border-radius: 30px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 24px;
    width: 24px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: 0.3s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked+.toggle-slider {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
}

.toggle-switch input:checked+.toggle-slider:before {
    transform: translateX(26px);
}

.toggle-switch input:focus+.toggle-slider {
    box-shadow: 0 0 0 3px rgba(255, 67, 56, 0.2);
}

/* Dark mode para config options */
[data-theme="dark"] .config-option {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .toggle-slider {
    background-color: var(--bg-secondary);
}

/* ==================== ALERTAS ==================== */
.alert {
    padding: 14px 16px;
    border-radius: var(--radius-sm);
    margin-bottom: 20px;
    font-size: 0.9375rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.alert-error {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: #991b1b;
    border-left: 4px solid #dc2626;
}

.alert-success {
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
    color: #065f46;
    border-left: 4px solid #10b981;
}

/* ==================== PASSWORD TOGGLE (mostrar/ocultar contraseña) ==================== */
.password-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
}

.password-wrapper input {
    flex: 1;
    width: 100%;
    padding-right: 45px !important;
    box-sizing: border-box;
    min-width: 0;
}

.password-toggle {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    cursor: pointer;
    padding: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #666;
    transition: color 0.2s;
    z-index: 2;
    width: 32px;
    height: 32px;
    flex-shrink: 0;
}

.password-toggle:hover {
    color: var(--primary);
}

.password-toggle svg {
    width: 22px;
    height: 22px;
}

/* Modo oscuro para toggle contraseña */
[data-theme="dark"] .password-toggle {
    color: #aaa;
}

[data-theme="dark"] .password-toggle:hover {
    color: var(--primary);
}

/* Responsive móvil - toggle contraseña */
@media (max-width: 768px) {
    .password-wrapper input {
        padding-right: 40px !important;
        font-size: 16px;
        /* Evita zoom en iOS */
    }

    .password-toggle {
        right: 5px;
        width: 30px;
        height: 30px;
        padding: 4px;
    }

    .password-toggle svg {
        width: 18px;
        height: 18px;
    }
}

/* ==================== FORMULARIO REENVÍO VERIFICACIÓN ==================== */
.resend-form-container {
    margin-top: 20px;
    padding: 20px;
    background: #f5f5f5;
    border-radius: 8px;
}

.resend-form-container h3 {
    margin-bottom: 15px;
    color: var(--text-primary);
}

[data-theme="dark"] .resend-form-container {
    background: var(--bg-tertiary);
}

/* ==================== FORM ROW (registro y formularios multi-columna) ==================== */
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    width: 100%;
    min-width: 0;
}

.form-row>.form-group {
    min-width: 0;
    overflow: hidden;
}

@media (max-width: 768px) {
    .form-row {
        grid-template-columns: 1fr;
    }
}

/* Badge opcional para campos no requeridos */
.optional-badge {
    font-size: 0.75rem;
    font-weight: 400;
    color: var(--text-secondary);
    opacity: 0.7;
    margin-left: 4px;
}

[data-theme="dark"] .optional-badge {
    color: var(--text-secondary);
    opacity: 0.6;
}

/* ==================== MODAL REGISTRO EXITOSO ==================== */
.register-success-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(6px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeInOverlay 0.3s ease;
    padding: 20px;
}

@keyframes fadeInOverlay {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes scaleInModal {
    from { opacity: 0; transform: scale(0.85) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

.register-success-modal {
    background: var(--bg-primary, #fff);
    border-radius: 16px;
    padding: 40px 36px;
    max-width: 440px;
    width: 100%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: scaleInModal 0.4s ease;
}

.register-success-icon {
    margin-bottom: 20px;
}

.register-success-icon svg {
    filter: drop-shadow(0 2px 8px rgba(76, 175, 80, 0.3));
}

.register-success-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary, #333);
    margin: 0 0 16px 0;
}

.register-success-message {
    font-size: 0.95rem;
    color: var(--text-secondary, #666);
    line-height: 1.6;
    margin: 0 0 12px 0;
}

.register-success-hint {
    font-size: 0.85rem;
    color: var(--text-secondary, #999);
    margin: 0 0 28px 0;
    opacity: 0.8;
    font-style: italic;
}

.register-success-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 32px;
    background: linear-gradient(135deg, var(--primary, #4CAF50), var(--primary-dark, #388E3C));
    color: #fff;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.register-success-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.register-success-btn:active {
    transform: translateY(0);
}

/* Modo oscuro */
[data-theme="dark"] .register-success-modal {
    background: var(--bg-primary, #1e1e2e);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .register-success-title {
    color: var(--text-primary, #e0e0e0);
}

[data-theme="dark"] .register-success-message {
    color: var(--text-secondary, #b0b0b0);
}

[data-theme="dark"] .register-success-hint {
    color: var(--text-secondary, #888);
}

@media (max-width: 480px) {
    .register-success-modal {
        padding: 30px 24px;
    }

    .register-success-title {
        font-size: 1.2rem;
    }
}

/* ==================== VERIFICACIÓN DE EMAIL ==================== */
.verify-icon {
    font-size: 80px;
    margin-bottom: 24px;
}

.verify-icon.success {
    color: var(--success);
}

.verify-icon.error {
    color: var(--danger);
}

.verify-icon.loading {
    color: var(--primary);
    animation: spin 1s linear infinite;
}

.verify-title {
    font-size: 1.875rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 16px;
    letter-spacing: -0.02em;
}

.verify-message {
    color: var(--text-secondary);
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 32px;
}

@media (max-width: 768px) {
    .verify-title {
        font-size: 1.5rem;
    }

    .verify-icon {
        font-size: 60px;
    }
}

/* ==================== MENÚ DE USUARIO (DROPDOWN) ==================== */
.menu-container {
    position: relative;
    display: inline-block;
}

.menu-btn {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
    color: var(--text-primary);
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    transition: all 0.2s;
}

.menu-btn:hover {
    background: var(--primary-light);
    border-color: var(--primary);
}

.menu-btn .menu-icon {
    stroke: var(--primary);
}

.menu-btn .menu-icon {
    width: 20px;
    height: 20px;
    display: inline-block;
    vertical-align: middle;
}

.menu-btn .menu-arrow {
    font-size: 10px;
    transition: transform 0.2s;
}

.menu-btn.active .menu-arrow {
    transform: rotate(180deg);
}

.menu-dropdown {
    display: none;
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    min-width: 220px;
    max-height: calc(100vh - 100px);
    z-index: 3000;
    overflow-y: auto;
    overflow-x: hidden;
    animation: slideDown 0.2s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.menu-dropdown.show {
    display: block;
}

.menu-dropdown .menu-header {
    padding: 16px 20px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

.menu-dropdown .menu-header .user-name {
    font-weight: 600;
    font-size: 15px;
    margin-bottom: 4px;
}

.menu-dropdown .menu-header .user-rol {
    font-size: 12px;
    opacity: 0.9;
    text-transform: capitalize;
}

.menu-dropdown .menu-section {
    padding: 8px 0;
    border-bottom: 1px solid #eee;
}

.menu-dropdown .menu-section:last-child {
    border-bottom: none;
}

.menu-dropdown .menu-section-title {
    padding: 8px 20px 4px;
    font-size: 11px;
    color: #888;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.menu-dropdown .menu-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    color: #333;
    text-decoration: none;
    cursor: pointer;
    transition: background 0.15s;
    font-size: 14px;
}

.menu-dropdown .menu-item:hover {
    background: #f5f5f5;
}

.menu-dropdown .menu-item .menu-item-icon {
    width: 20px;
    text-align: center;
    font-size: 16px;
}

.menu-dropdown .menu-item.danger {
    color: #dc3545;
}

.menu-dropdown .menu-item.danger:hover {
    background: #fff5f5;
}

.menu-divider {
    height: 1px;
    background: #e5e5e5;
    margin: 8px 0;
}

[data-theme="dark"] .menu-divider {
    background: var(--border-color);
}

.menu-item-logout {
    color: var(--danger) !important;
}

.menu-item-logout:hover {
    background: rgba(239, 68, 68, 0.1) !important;
}

[data-theme="dark"] .menu-item-logout {
    color: #ff6b6b !important;
}

[data-theme="dark"] .menu-item-logout:hover {
    background: rgba(220, 53, 69, 0.15) !important;
}

/* Icono de tema en menú */
.menu-theme-icon {
    margin-left: auto;
    font-size: 14px;
}

/* Selector de idioma en menú de usuario */
.menu-item-lang {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px 20px;
    cursor: default;
}

.lang-selector-menu {
    flex: 1;
    padding: 8px 12px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: var(--bg-secondary);
    color: var(--text-primary);
    font-size: var(--font-size-sm);
    cursor: pointer;
    outline: none;
}

.lang-selector-menu:hover {
    border-color: var(--primary);
}

.lang-selector-menu:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(var(--primary), 0.1);
}

[data-theme="dark"] .lang-selector-menu {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .lang-selector-menu:hover,
[data-theme="dark"] .lang-selector-menu:focus {
    border-color: var(--primary-light);
}

/* ==================== PAGINA AUDITORIA ==================== */
.audit-page-container {
    padding: 20px;
    max-width: 1400px;
    margin: 0 auto;
}

.audit-section {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    margin-bottom: 20px;
    overflow: hidden;
}

.audit-section .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    flex-wrap: wrap;
    gap: 10px;
}

.audit-section .section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: var(--font-size-lg);
    font-weight: 600;
    margin: 0;
}

.audit-section .section-title svg {
    stroke: white;
}

.audit-section .section-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
}

.audit-section .btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    font-weight: 500;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
}

.audit-section .btn-primary {
    background: var(--primary);
    color: white;
}

.audit-section .btn-primary:hover {
    background: var(--primary-dark);
}

.audit-section .btn-secondary {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.audit-section .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.3);
}

.audit-section .btn-danger {
    background: var(--danger);
    color: white;
}

.audit-section .btn-danger:hover {
    background: #dc2626;
}

.audit-section .filters-container {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    padding: 15px 20px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
    align-items: flex-end;
}

.audit-section .filter-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.audit-section .filter-group label {
    font-size: var(--font-size-xs);
    font-weight: 500;
    color: var(--text-secondary);
}

.audit-section .filter-group input,
.audit-section .filter-group select {
    padding: 8px 12px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    font-size: var(--font-size-sm);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-width: 140px;
}

.audit-section .filter-buttons {
    display: flex;
    gap: 8px;
    align-items: flex-end;
}

.audit-section .filter-buttons .btn {
    background: var(--primary);
    color: white;
}

.audit-section .filter-buttons .btn-secondary {
    background: var(--bg-tertiary);
    color: var(--text-primary);
    border: 1px solid var(--border);
}

.audit-section .table-container {
    padding: 0;
    overflow-x: auto;
}

.audit-table {
    width: 100%;
    border-collapse: collapse;
}

.audit-table thead {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
}

.audit-table th {
    padding: 12px 15px;
    text-align: left;
    font-weight: 600;
    color: white;
    font-size: var(--font-size-sm);
    white-space: nowrap;
}

.audit-table th.sortable {
    cursor: pointer;
}

.audit-table th .th-content {
    display: flex;
    align-items: center;
    gap: 5px;
}

.audit-table th .sort-icon {
    opacity: 0.6;
    font-size: 12px;
}

.audit-table th .sort-icon.active {
    opacity: 1;
}

.audit-table td {
    padding: 12px 15px;
    border-bottom: 1px solid var(--border);
    font-size: var(--font-size-sm);
    color: var(--text-primary);
}

.audit-table tbody tr:hover {
    background: var(--bg-secondary);
}

.audit-table tbody tr:nth-child(even) {
    background: var(--row-odd);
}

.audit-table tbody tr:nth-child(even):hover {
    background: var(--row-hover);
}

/* Badges */
.role-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    text-transform: capitalize;
}

.role-badge.role-usuario {
    background: #e0f2fe;
    color: #0369a1;
}

.role-badge.role-administrador {
    background: #fef3c7;
    color: #92400e;
}

.role-badge.role-superusuario {
    background: #f3e8ff;
    color: #7c3aed;
}

.action-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
}

.action-badge.action-auth {
    background: #dbeafe;
    color: #1e40af;
}

.action-badge.action-session {
    background: #fce7f3;
    color: #be185d;
}

.action-badge.action-user {
    background: #d1fae5;
    color: #065f46;
}

.action-badge.action-config {
    background: #fef3c7;
    color: #92400e;
}

.action-badge.action-propuesta {
    background: #e0e7ff;
    color: #3730a3;
}

.action-badge.action-consulta {
    background: #f3e8ff;
    color: #7c3aed;
}

.result-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
}

.result-badge.result-success {
    background: #d1fae5;
    color: #065f46;
}

.result-badge.result-failed {
    background: #fee2e2;
    color: #991b1b;
}

.result-badge.result-blocked {
    background: #fef3c7;
    color: #92400e;
}

.btn-action {
    padding: 6px 10px;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.btn-danger-small {
    background: var(--danger);
    color: white;
}

.btn-danger-small:hover {
    background: #dc2626;
}

.empty-message {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-secondary);
}

.pagination-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 15px;
    padding: 15px;
    border-top: 1px solid var(--border);
}

.pagination-info {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
}

/* Cards para móvil */
.cards-container {
    display: none;
    padding: 15px;
    gap: 15px;
}

.audit-card {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.audit-card .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
}

.audit-card .card-user {
    display: flex;
    align-items: center;
    gap: 10px;
}

.audit-card .card-username {
    font-weight: 600;
    color: var(--text-primary);
}

.audit-card .card-body {
    padding: 15px;
}

.audit-card .card-detail {
    margin-bottom: 8px;
    font-size: var(--font-size-sm);
    color: var(--text-primary);
}

.audit-card .card-detail:last-child {
    margin-bottom: 0;
}

/* Dark mode para auditoría */
[data-theme="dark"] .audit-section {
    background: var(--bg-primary);
    border: 1px solid var(--border);
}

[data-theme="dark"] .audit-section .filters-container {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .audit-section .filter-group input,
[data-theme="dark"] .audit-section .filter-group select {
    background: var(--bg-tertiary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .audit-table td {
    border-color: var(--border);
}

[data-theme="dark"] .audit-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .audit-card .card-header {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

/* Botón detalle dispositivo en auditoría */
.btn-detail-device {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: var(--bg-secondary, #f0f0f0);
    border: 1px solid var(--border, #ddd);
    border-radius: 6px;
    cursor: pointer;
    color: var(--primary);
    font-size: 0.75rem;
    font-weight: 500;
    transition: all 0.2s;
}
.btn-detail-device:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}
.btn-detail-device svg {
    flex-shrink: 0;
}

/* Items de info del dispositivo en modal */
.device-info-item {
    padding: 8px 10px;
    background: var(--bg-secondary, #f5f5f5);
    border-radius: 8px;
    border: 1px solid var(--border, #eee);
}
.device-info-label {
    font-size: 0.7rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-secondary, #888);
    margin-bottom: 2px;
}
.device-info-value {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary, #333);
}

[data-theme="dark"] .btn-detail-device {
    background: var(--bg-tertiary);
    border-color: var(--border);
}
[data-theme="dark"] .device-info-item {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .role-badge.role-usuario {
    background: rgba(14, 165, 233, 0.2);
    color: #38bdf8;
}

[data-theme="dark"] .role-badge.role-administrador {
    background: rgba(245, 158, 11, 0.2);
    color: #fbbf24;
}

[data-theme="dark"] .role-badge.role-superusuario {
    background: rgba(139, 92, 246, 0.2);
    color: #a78bfa;
}

/* Responsive para auditoría */
@media (max-width: 768px) {
    .audit-page-container {
        padding: 10px;
    }

    .audit-section .section-header {
        flex-direction: column;
        align-items: flex-start;
    }

    .audit-section .section-actions {
        width: 100%;
    }

    .audit-section .section-actions .btn {
        flex: 1;
        justify-content: center;
    }

    .audit-section .filters-container {
        flex-direction: column;
    }

    .audit-section .filter-group {
        width: 100%;
    }

    .audit-section .filter-group input,
    .audit-section .filter-group select {
        width: 100%;
    }

    .audit-section .filter-buttons {
        width: 100%;
    }

    .audit-section .filter-buttons .btn {
        flex: 1;
    }

    .audit-table {
        display: none;
    }

    .cards-container {
        display: flex;
        flex-direction: column;
    }
}

/* Responsive para menú */
@media (max-width: 768px) {
    .menu-dropdown {
        position: absolute;
        top: calc(100% + 8px);
        bottom: auto;
        left: auto;
        right: 0;
        border-radius: 12px;
        max-height: calc(100vh - 90px);
        overflow-y: auto;
        min-width: 200px;
    }

    .menu-btn .user-name-display {
        display: none;
    }
}

/* ==================== GESTIÓN DE USUARIOS ==================== */
.users-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.users-content {
    padding: 15px 20px;
}

.users-table-wrapper {
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.users-table-wrapper .table-scroll-container {
    max-height: calc(100vh - 320px);
    overflow-y: auto;
    overflow-x: auto;
}

.users-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 900px;
}

.users-table th,
.users-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
    white-space: nowrap;
}

.users-table th {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: sticky;
    top: 0;
    z-index: 10;
}

.users-table th .column-header-wrapper {
    display: flex;
    align-items: center;
    gap: 6px;
}

.users-table th .sortable-header {
    display: flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    user-select: none;
}

.users-table th .sortable-header:hover {
    opacity: 0.8;
}

.users-table th .sort-icon {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.users-table th.sorted-asc .sort-icon,
.users-table th.sorted-desc .sort-icon {
    opacity: 1;
}

.users-table th .column-filter-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 4px;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: white;
}

.users-table th .column-filter-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

.users-table th .column-filter-btn.active {
    background: white;
}

.users-table th .column-filter-btn.active svg {
    stroke: var(--primary);
}

.users-table tbody tr {
    transition: background 0.2s;
    background-color: var(--row-even);
}

.users-table tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.users-table tbody tr:hover {
    background-color: var(--row-hover);
}

.users-table td {
    font-size: 14px;
    color: #333;
}

/* Estados de usuario */
.status-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
}

.status-active {
    background: #d4edda;
    color: #155724;
}

.status-inactive {
    background: #f8d7da;
    color: #721c24;
}

/* Roles */
.role-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.role-usuario {
    background: #e9ecef;
    color: #495057;
}

.role-administrador {
    background: #cce5ff;
    color: #004085;
}

.role-superusuario {
    background: #f8d7da;
    color: #721c24;
}

/* Acciones de usuario */
.user-actions {
    display: flex;
    gap: 6px;
    flex-wrap: nowrap;
}

.btn-action {
    padding: 8px 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.2s;
    line-height: 1;
}

.btn-action:hover {
    transform: scale(1.1);
}

.btn-activate {
    background: #28a745;
    color: white;
}

.btn-activate:hover {
    background: #218838;
}

.btn-deactivate {
    background: #dc3545;
    color: white;
}

.btn-deactivate:hover {
    background: #c82333;
}

.btn-change-role {
    background: var(--primary);
    color: white;
}

.btn-change-role:hover {
    background: #5a6fd6;
}

.btn-edit {
    background: #17a2b8;
    color: white;
}

.btn-edit:hover {
    background: #138496;
}

.btn-resend {
    background: #fd7e14;
    color: white;
}

.btn-resend:hover {
    background: #e96b02;
}

.btn-verify {
    background: #28a745;
    color: white;
}

.btn-verify:hover {
    background: #218838;
}

.btn-unverify {
    background: #6c757d;
    color: white;
}

.btn-unverify:hover {
    background: #5a6268;
}

/* Empty state usuarios */
.users-empty {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.users-empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.users-empty h3 {
    color: #666;
    margin-bottom: 10px;
}

/* Sin resultados por filtro - Estilos unificados para todas las páginas */
.users-no-results,
.proposals-no-results,
.inquiries-no-results {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: var(--radius);
    margin: 20px 0;
}

.users-no-results h3,
.proposals-no-results h3,
.inquiries-no-results h3 {
    color: #555;
    margin-bottom: 10px;
    font-size: 1.2rem;
}

.users-no-results p,
.proposals-no-results p,
.inquiries-no-results p {
    color: #888;
    font-size: 0.9rem;
}

[data-theme="dark"] .users-no-results,
[data-theme="dark"] .proposals-no-results,
[data-theme="dark"] .inquiries-no-results {
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
    color: #aaa;
}

[data-theme="dark"] .users-no-results h3,
[data-theme="dark"] .proposals-no-results h3,
[data-theme="dark"] .inquiries-no-results h3 {
    color: #ddd;
}

/* Loading usuarios */
.users-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Toolbar usuarios */
.users-toolbar {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
}

/* Botón nuevo usuario */
.btn-new-user {
    background: linear-gradient(135deg, #28a745 0%, #218838 100%);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.3s;
    box-shadow: 0 2px 4px rgba(40, 167, 69, 0.3);
}

.btn-new-user:hover {
    background: linear-gradient(135deg, #218838 0%, #1e7e34 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(40, 167, 69, 0.4);
}

.btn-new-empty {
    margin-top: 20px;
}

/* Email con icono verificación */
.email-cell {
    display: flex;
    align-items: center;
    gap: 8px;
}

.email-verified {
    color: #28a745;
    font-size: 14px;
}

.email-not-verified {
    color: #dc3545;
    font-size: 14px;
}

/* Cards view usuarios (mobile) */
.users-cards {
    display: none;
}

.user-card {
    background: white;
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 15px;
    transition: all 0.3s;
}

.user-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.user-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.user-card-name {
    font-weight: 600;
    color: #333;
    font-size: 16px;
}

.user-card-username {
    color: #666;
    font-size: 13px;
}

.user-card-info {
    margin-bottom: 15px;
}

.user-card-info-item {
    font-size: 13px;
    margin-bottom: 8px;
}

.user-card-info-item label {
    display: inline-block;
    color: #999;
    font-size: 11px;
    text-transform: uppercase;
    min-width: 60px;
}

.user-card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.user-card-actions .btn-action {
    flex: 1;
    min-width: 80px;
    text-align: center;
}

/* Modal genérico (rol, usuario) */
#role-modal,
#user-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    align-items: center;
    justify-content: center;
}

#user-modal {
    overflow-y: auto;
    padding: 20px;
}

#role-modal .modal-content,
#user-modal .modal-content {
    background: white;
    border-radius: 10px;
    padding: 0;
    max-width: 400px;
    width: 90%;
    overflow: hidden;
}

#user-modal .modal-content {
    max-width: 500px;
    margin: auto;
}

#role-modal .modal-header,
#user-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#role-modal .modal-header h2,
#user-modal .modal-header h2 {
    margin: 0;
    color: white;
    font-size: 18px;
}

#role-modal .modal-close,
#user-modal .modal-close {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    font-size: 24px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

#role-modal .modal-close:hover,
#user-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.role-modal-content,
.user-modal-content {
    padding: 30px;
}

.user-modal-content {
    max-height: 70vh;
    overflow-y: auto;
}

.role-modal-content .form-group,
.user-modal-content .form-group {
    margin-bottom: 20px;
}

.role-modal-content label,
.user-modal-content label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #333;
}

.role-modal-content select,
.user-modal-content input,
.user-modal-content select {
    width: 100%;
    padding: 12px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 14px;
    box-sizing: border-box;
}

.role-modal-content select:focus,
.user-modal-content input:focus,
.user-modal-content select:focus {
    outline: none;
    border-color: var(--primary);
}

.form-help {
    font-size: 12px;
    color: #666;
    margin-top: 5px;
}

.role-modal-actions,
.user-modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
}

.user-modal-actions {
    padding-top: 20px;
    border-top: 1px solid #eee;
}

.role-modal-actions button,
.user-modal-actions button {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-cancel {
    background: #e9ecef;
    color: #495057;
}

.btn-cancel:hover {
    background: #dee2e6;
}

.btn-save {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

.btn-save:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.4);
}

/* Buscador de clientes */
.client-search-container {
    position: relative;
}

.client-search-input-wrapper {
    position: relative;
}

.client-search-input-wrapper input {
    padding-right: 40px;
}

.client-search-icon {
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
    pointer-events: none;
}

.client-suggestions {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 2px solid #e0e0e0;
    border-top: none;
    border-radius: 0 0 8px 8px;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
    /* Barra de scroll siempre visible */
    scrollbar-width: thin;
    scrollbar-color: var(--primary) #e0e0e0;
}

/* Scrollbar personalizado para webkit (Chrome, Safari, Edge) */
.client-suggestions::-webkit-scrollbar {
    width: 8px;
}

.client-suggestions::-webkit-scrollbar-track {
    background: #f0f0f0;
    border-radius: 0 0 8px 0;
}

.client-suggestions::-webkit-scrollbar-thumb {
    background: var(--primary);
    border-radius: 4px;
}

.client-suggestions::-webkit-scrollbar-thumb:hover {
    background: var(--primary-dark);
}

.client-suggestions.show {
    display: block;
}

.client-suggestion {
    padding: 12px;
    cursor: pointer;
    border-bottom: 1px solid #f0f0f0;
    transition: background 0.2s;
}

.client-suggestion:last-child {
    border-bottom: none;
}

.client-suggestion:hover {
    background: #f8f9ff;
}

.client-suggestion-code {
    font-weight: 600;
    color: var(--primary);
}

.client-suggestion-name {
    color: #333;
    margin-left: 8px;
}

.client-suggestions-loading,
.client-suggestions-empty {
    padding: 15px;
    text-align: center;
    color: #666;
    font-size: 13px;
}

.client-selected {
    display: none;
    background: #e8f5e9;
    padding: 12px;
    border-radius: 8px;
    align-items: center;
    justify-content: space-between;
}

.client-selected.show {
    display: flex;
}

.client-selected-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.client-selected-code {
    font-weight: 600;
    color: #2e7d32;
}

.client-selected-name {
    color: #333;
}

.client-clear-btn {
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    font-size: 18px;
    padding: 4px 8px;
    border-radius: 4px;
    transition: all 0.2s;
}

.client-clear-btn:hover {
    background: rgba(0, 0, 0, 0.1);
    color: #333;
}

/* Campo informativo de empresa del usuario */
.company-info-display {
    background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
    border: 1px solid #90caf9;
    border-radius: 8px;
    padding: 12px 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.company-name-value {
    font-weight: 600;
    color: #1565c0;
    font-size: 1rem;
}

.form-help-info {
    color: #1976d2;
    font-style: italic;
}

[data-theme="dark"] .company-info-display {
    background: linear-gradient(135deg, rgba(30, 136, 229, 0.15) 0%, rgba(156, 39, 176, 0.15) 100%);
    border-color: rgba(144, 202, 249, 0.3);
}

[data-theme="dark"] .company-name-value {
    color: #90caf9;
}

[data-theme="dark"] .form-help-info {
    color: #90caf9;
}

/* Dark mode para buscador de clientes */
[data-theme="dark"] .client-suggestions {
    background: var(--bg-secondary);
    border-color: var(--border);
    scrollbar-color: var(--primary) var(--bg-primary);
}

[data-theme="dark"] .client-suggestions::-webkit-scrollbar-track {
    background: var(--bg-primary);
}

[data-theme="dark"] .client-suggestions::-webkit-scrollbar-thumb {
    background: var(--primary);
}

[data-theme="dark"] .client-suggestions::-webkit-scrollbar-thumb:hover {
    background: var(--primary-light);
}

[data-theme="dark"] .client-suggestion {
    border-bottom-color: var(--border);
}

[data-theme="dark"] .client-suggestion:hover {
    background: var(--bg-primary);
}

[data-theme="dark"] .client-suggestion-code {
    color: var(--primary-light, #ff6b6b);
}

[data-theme="dark"] .client-suggestion-name {
    color: var(--text-primary);
}

[data-theme="dark"] .client-suggestions-loading,
[data-theme="dark"] .client-suggestions-empty {
    color: var(--text-secondary);
}

[data-theme="dark"] .client-selected {
    background: rgba(46, 125, 50, 0.2);
    border: 1px solid rgba(46, 125, 50, 0.4);
}

[data-theme="dark"] .client-selected-code {
    color: #81c784;
}

[data-theme="dark"] .client-selected-name {
    color: var(--text-primary);
}

[data-theme="dark"] .client-clear-btn {
    color: var(--text-secondary);
}

[data-theme="dark"] .client-clear-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

[data-theme="dark"] .client-search-icon {
    color: var(--text-secondary);
}

/* Sugerencias tipo item para carrito envío */
[data-theme="dark"] .client-suggestion-item {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-bottom-color: var(--border);
}

[data-theme="dark"] .client-suggestion-item:hover {
    background: var(--bg-primary);
}

[data-theme="dark"] .client-suggestion-item .client-code {
    color: var(--primary-light, #ff6b6b);
}

[data-theme="dark"] .client-suggestion-item .client-name {
    color: var(--text-primary);
}

[data-theme="dark"] .client-suggestion-item.no-results,
[data-theme="dark"] .client-suggestion-item.error {
    color: var(--text-secondary);
}

/* Responsive usuarios */
@media (max-width: 768px) {
    .users-content {
        padding: 15px;
    }

    .users-table-wrapper {
        display: none !important;
    }

    .users-cards {
        display: block !important;
    }

    .users-toolbar {
        justify-content: center;
    }

    .btn-new-user {
        width: 100%;
        justify-content: center;
    }
}

/* ==================== GESTIÓN DE PROPUESTAS ==================== */
/* Evitar scroll doble en páginas con grid DataGrid */
.main-content-area:has(.proposals-container) {
    height: 100vh;
    min-height: unset;
    overflow: hidden;
}

.proposals-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.proposals-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.proposals-header h2 {
    margin: 0;
    color: white;
    font-size: 24px;
}

.proposals-header .back-btn {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    transition: all 0.2s;
}

.proposals-header .back-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

.proposals-content {
    padding: 10px 15px;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

/* ==================== TABLA DE PROPUESTAS CON GRID AVANZADA ==================== */
.proposals-table-wrapper {
    border-radius: var(--radius);
    border: 1px solid var(--border);
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.proposals-table-wrapper .table-scroll-container {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: auto;
}

.proposals-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
}

.proposals-table th,
.proposals-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
    white-space: nowrap;
}

.proposals-table th {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: sticky;
    top: 0;
    z-index: 10;
}

.proposals-table th .column-header-wrapper {
    display: flex;
    align-items: center;
    gap: 6px;
}

.proposals-table th .sortable-header {
    display: flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    user-select: none;
}

.proposals-table th .sortable-header:hover {
    opacity: 0.8;
}

.proposals-table th .sort-icon {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.proposals-table th .sort-icon.active {
    opacity: 1;
}

.proposals-table th .column-filter-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 4px;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: white;
}

.proposals-table th .column-filter-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

.proposals-table th .column-filter-btn.active {
    background: white;
}

.proposals-table th .column-filter-btn.active svg {
    stroke: var(--primary);
}

.proposals-table tbody tr {
    transition: background 0.2s;
    background-color: var(--row-even);
}

.proposals-table tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.proposals-table tbody tr:hover {
    background-color: var(--row-hover);
}

.proposals-table td {
    font-size: 14px;
    color: #333;
}

/* Estados de propuesta */
.status-enviada {
    background: #fff3cd;
    color: #856404;
}

.status-procesada {
    background: #d4edda;
    color: #155724;
}

.status-cancelada {
    background: #f8d7da;
    color: #721c24;
}

.btn-view-details {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
}

.btn-view-details:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.4);
}

.btn-download-excel {
    background: #28a745;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
}

.btn-download-excel:hover {
    background: #218838;
    transform: translateY(-2px);
}

.action-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

/* Empty state propuestas */
.proposals-empty {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.proposals-empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.proposals-empty h3 {
    color: #666;
    margin-bottom: 10px;
}

/* Loading propuestas */
.proposals-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Modal de detalle de propuesta */
#proposal-detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    align-items: center;
    justify-content: center;
}

#proposal-detail-modal .modal-content {
    background: white;
    border-radius: 10px;
    padding: 0;
    max-width: 900px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#proposal-detail-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#proposal-detail-modal .modal-header h2 {
    margin: 0;
    color: white;
}

#proposal-detail-modal .modal-close {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    font-size: 28px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

#proposal-detail-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.proposal-detail-content {
    padding: 30px;
    overflow-y: auto;
    flex: 1;
}

.proposal-info {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.proposal-info-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.proposal-info-item label {
    font-size: 12px;
    color: #666;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.proposal-info-item span {
    font-size: 15px;
    color: #333;
    font-weight: 500;
}

.proposal-lines-title {
    font-size: 18px;
    color: #333;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 2px solid #eee;
}

.proposal-lines-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.proposal-lines-table th,
.proposal-lines-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #eee;
}

.proposal-lines-table th {
    background: #f8f9fa;
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
}

.proposal-lines-table tbody tr {
    background-color: var(--row-even);
    transition: background 0.2s;
}

.proposal-lines-table tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.proposal-lines-table tbody tr:hover {
    background-color: var(--row-hover);
}

/* ==================== LISTA DE PRODUCTOS CON IMÁGENES ==================== */
.proposal-lines-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 16px;
}

.proposal-line-item {
    display: flex;
    gap: 16px;
    padding: 12px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 1px solid var(--border);
    transition: all 0.2s ease;
}

.proposal-line-item:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow-sm);
}

.proposal-line-image {
    width: 80px;
    height: 80px;
    flex-shrink: 0;
    border-radius: var(--radius-sm);
    overflow: hidden;
    background: var(--bg-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
}

.proposal-line-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.2s ease;
}

.proposal-line-image:hover img {
    transform: scale(1.05);
}

.proposal-line-image .img-count {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    font-size: 0.7rem;
    padding: 2px 6px;
    border-radius: 10px;
    font-weight: 600;
}

.proposal-line-image .no-image {
    font-size: 2rem;
    opacity: 0.4;
}

/* ==================== MODAL GALERÍA DE IMÁGENES ==================== */
.galeria-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 10000;
    justify-content: center;
    align-items: center;
}

.galeria-content {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    padding: 20px;
    max-width: 90vw;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    gap: 15px;
    position: relative;
}

.galeria-close {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 2rem;
    color: var(--text-secondary);
    cursor: pointer;
    z-index: 10;
}

.galeria-close:hover {
    color: var(--primary);
}

.galeria-main {
    display: flex;
    justify-content: center;
    align-items: center;
    max-height: 60vh;
    overflow: hidden;
}

.galeria-main img {
    max-width: 100%;
    max-height: 60vh;
    object-fit: contain;
    border-radius: var(--radius);
}

.galeria-thumbs {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    max-height: 100px;
    overflow-y: auto;
}

.galeria-thumb {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-sm);
    overflow: hidden;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    opacity: 0.6;
}

.galeria-thumb:hover {
    opacity: 1;
}

.galeria-thumb.active {
    border-color: var(--primary);
    opacity: 1;
}

.galeria-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* Dark mode galería */
[data-theme="dark"] .galeria-content {
    background: var(--bg-secondary);
}

[data-theme="dark"] .galeria-close {
    color: var(--text-primary);
}

.proposal-line-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.proposal-line-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
}

.proposal-line-code {
    font-weight: 700;
    color: var(--primary);
    font-size: 0.95rem;
}

.proposal-line-qty {
    font-weight: 700;
    color: var(--text-primary);
    background: var(--accent);
    padding: 4px 10px;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    white-space: nowrap;
}

.proposal-line-desc {
    font-size: 0.9rem;
    color: var(--text-primary);
    line-height: 1.4;
}

.proposal-line-details {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 4px;
}

.proposal-line-details .detail-tag {
    font-size: 0.75rem;
    padding: 3px 8px;
    background: var(--bg-tertiary);
    border-radius: 4px;
    color: var(--text-secondary);
    font-weight: 500;
}

.proposal-line-packing {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 6px;
}

.packing-tag {
    font-size: 0.75rem;
    padding: 4px 10px;
    background: linear-gradient(135deg, var(--primary-light) 0%, var(--primary) 100%);
    color: white;
    border-radius: 4px;
    font-weight: 500;
}

/* Dark mode para lista de productos */
[data-theme="dark"] .proposal-line-item {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .proposal-line-image {
    background: var(--bg-secondary);
}

[data-theme="dark"] .proposal-line-details .detail-tag {
    background: var(--bg-secondary);
}

[data-theme="dark"] .packing-tag {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
}

/* ==================== DARK MODE PARA MODAL DE DETALLE DE PROPUESTA ==================== */
[data-theme="dark"] #proposal-detail-modal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
}

[data-theme="dark"] .proposal-detail-content {
    background: var(--bg-primary);
}

[data-theme="dark"] .proposal-info {
    background: var(--bg-secondary);
}

[data-theme="dark"] .proposal-info-item label {
    color: var(--text-secondary);
}

[data-theme="dark"] .proposal-info-item span {
    color: var(--text-primary);
}

[data-theme="dark"] .proposal-lines-title {
    color: var(--text-primary);
    border-color: var(--border);
}

[data-theme="dark"] .proposal-lines-table th {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

[data-theme="dark"] .proposal-lines-table td {
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .proposal-lines-table tbody tr {
    background-color: var(--bg-primary);
}

[data-theme="dark"] .proposal-lines-table tbody tr:nth-child(odd) {
    background-color: var(--bg-secondary);
}

[data-theme="dark"] .proposal-lines-table tbody tr:hover {
    background-color: var(--bg-tertiary);
}

[data-theme="dark"] .line-card {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

[data-theme="dark"] .line-card-header {
    color: var(--text-primary);
}

[data-theme="dark"] .line-card-body .label {
    color: var(--text-secondary);
}

/* Responsive para lista de productos */
@media (max-width: 480px) {
    .proposal-line-item {
        flex-direction: column;
        gap: 12px;
    }

    .proposal-line-image {
        width: 100%;
        height: 120px;
    }

    .proposal-line-header {
        flex-wrap: wrap;
    }
}

/* Mobile cards for proposal lines (obsoleto, mantener por compatibilidad) */
.proposal-lines-cards {
    display: none;
}

.line-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 12px;
    border-left: 4px solid var(--primary);
}

.line-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
}

.line-card-code {
    font-weight: 700;
    color: var(--primary);
    font-size: 14px;
}

.line-card-qty {
    background: var(--primary);
    color: white;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 600;
}

.line-card-desc {
    font-size: 13px;
    color: #333;
    margin-bottom: 10px;
}

.line-card-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
    font-size: 12px;
}

.line-card-detail {
    display: flex;
    flex-direction: column;
}

.line-card-detail label {
    color: #999;
    font-size: 10px;
    text-transform: uppercase;
}

.line-card-detail span {
    color: #333;
    font-weight: 500;
}

/* ==================== LÍNEAS DE PEDIDOS (Order Lines) ==================== */
/* Tabla para desktop */
.order-lines-table {
    display: block;
}

/* Tarjetas para móvil - ocultas por defecto */
.order-lines-cards {
    display: none;
}

.order-line-card {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 12px;
    border-left: 4px solid var(--primary);
}

.order-line-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.order-line-card-code {
    font-weight: 700;
    color: var(--primary);
    font-size: 14px;
}

.order-line-card-amount {
    background: var(--primary);
    color: white;
    padding: 4px 12px;
    border-radius: 15px;
    font-size: 13px;
    font-weight: 600;
}

.order-line-card-desc {
    font-size: 13px;
    color: #333;
    margin-bottom: 12px;
    line-height: 1.4;
}

.order-line-card-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
}

.order-line-card-detail {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.order-line-card-detail .detail-label {
    color: #999;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.order-line-card-detail .detail-value {
    color: #333;
    font-weight: 500;
    font-size: 13px;
}

/* Dark mode para order line cards */
[data-theme="dark"] .order-line-card {
    background: var(--bg-tertiary);
    border-left-color: var(--primary);
}

[data-theme="dark"] .order-line-card-desc {
    color: var(--text-primary);
}

[data-theme="dark"] .order-line-card-detail .detail-label {
    color: var(--text-muted);
}

[data-theme="dark"] .order-line-card-detail .detail-value {
    color: var(--text-primary);
}

/* Thumbnail en tabla de líneas */
.order-line-thumb {
    width: 48px;
    height: 48px;
    object-fit: cover;
    border-radius: 6px;
    border: 1px solid #e0e0e0;
}

[data-theme="dark"] .order-line-thumb {
    border-color: var(--border-color);
}

.order-line-no-img {
    display: inline-block;
    width: 48px;
    text-align: center;
    color: #ccc;
    font-size: 18px;
}

/* Thumbnail en card móvil */
.order-line-card-top {
    display: flex;
    gap: 12px;
    margin-bottom: 12px;
}

.order-line-card-top-info {
    flex: 1;
    min-width: 0;
}

.order-line-card-thumb {
    width: 56px;
    height: 56px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
    flex-shrink: 0;
}

[data-theme="dark"] .order-line-card-thumb {
    border-color: var(--border-color);
}

/* ==================== MODAL DETALLE DE PEDIDO ==================== */
#order-detail-modal .modal-content {
    background: white;
    border-radius: 10px;
    padding: 0;
    max-width: 900px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#order-detail-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
}

#order-detail-modal .modal-header h2 {
    margin: 0;
    color: white;
    font-size: 20px;
}

#order-detail-modal .modal-close {
    color: white;
    background: rgba(255, 255, 255, 0.2);
}

#order-detail-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

[data-theme="dark"] #order-detail-modal .modal-content {
    background: var(--bg-primary);
    color: var(--text-primary);
}

/* Comentarios de propuesta */
.proposal-comments {
    margin-top: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid var(--primary);
}

.proposal-comments-title {
    font-size: 14px;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
}

.proposal-comments-text {
    font-size: 14px;
    color: #666;
    line-height: 1.5;
}

/* Cards view propuestas (mobile) */
.proposals-cards {
    display: none;
}

.proposal-card {
    background: white;
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 15px;
    transition: all 0.3s;
    overflow: hidden;
    max-width: 100%;
    width: 100%;
    box-sizing: border-box;
}

.proposal-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.proposal-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.proposal-card-id {
    font-weight: 600;
    color: var(--primary);
    font-size: 16px;
}

.proposal-card-date {
    color: #666;
    font-size: 13px;
}

.proposal-card-info {
    margin-bottom: 15px;
    overflow: hidden;
    width: 100%;
}

.proposal-card-info-item {
    font-size: 13px;
    margin-bottom: 8px;
    display: flex;
    gap: 6px;
    align-items: baseline;
}

.proposal-card-info-item label {
    color: #999;
    font-size: 11px;
    text-transform: uppercase;
    min-width: 60px;
    flex-shrink: 0;
}

.proposal-card-info-item span {
    word-break: break-all;
    overflow-wrap: anywhere;
    min-width: 0;
    flex: 1;
    max-width: calc(100% - 70px);
}

.proposal-card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* Filtros de propuestas */
.filters-container {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
}

.filters-row {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    align-items: flex-end;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
    min-width: 150px;
}

.filter-group label {
    font-size: 12px;
    font-weight: 600;
    color: #666;
    text-transform: uppercase;
}

.filter-group select,
.filter-group input {
    padding: 10px 12px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
}

.filter-actions {
    display: flex;
    gap: 10px;
}

.btn-filter {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s;
}

.btn-filter-primary {
    background: var(--primary);
    color: white;
}

.btn-filter-primary:hover {
    background: var(--primary-dark);
}

.btn-filter-secondary {
    background: #e9ecef;
    color: #495057;
}

.btn-filter-secondary:hover {
    background: #dee2e6;
}

/* User badge (todas-propuestas) */
.user-badge {
    display: inline-block;
    padding: 4px 10px;
    background: #e9ecef;
    color: #495057;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 500;
}

/* Responsive propuestas */
@media (max-width: 768px) {
    .proposals-content {
        padding: 10px;
    }

    .proposals-header {
        flex-direction: column;
        gap: 15px;
        text-align: center;
    }

    .proposals-table-wrapper,
    .dg-table-wrapper {
        display: none !important;
    }

    .dg-container {
        max-width: 100%;
        overflow-x: hidden;
    }

    .dg-content {
        overflow-x: hidden;
    }

    .proposals-cards,
    .dg-cards {
        display: flex !important;
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        padding: 8px;
        overflow-x: hidden;
    }

    .proposal-card,
    .dg-card {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        padding: 15px;
        overflow: hidden;
    }

    .dg-footer {
        max-width: 100%;
        box-sizing: border-box;
    }

    .proposal-card-header {
        flex-wrap: wrap;
        gap: 5px;
    }

    .proposal-card-info-item {
        flex-wrap: wrap;
    }

    .proposal-card-info-item span {
        word-break: break-all;
        overflow-wrap: anywhere;
    }

    .main-content-area {
        overflow-x: hidden !important;
    }

    .main-content-area:has(.proposals-container) {
        height: auto !important;
        overflow: auto !important;
    }

    .proposals-container {
        overflow: hidden;
    }

    .proposals-content {
        overflow: hidden;
    }

    .proposal-lines-table-wrapper {
        display: none !important;
    }

    .proposal-lines-cards {
        display: block !important;
    }

    /* Order lines responsive */
    .order-lines-table {
        display: none !important;
    }

    .order-lines-cards {
        display: block !important;
    }

    .filters-row {
        flex-direction: column;
    }

    .filter-group {
        width: 100%;
    }

    .filter-actions {
        width: 100%;
    }

    .filter-actions button {
        flex: 1;
    }
}

/* ==================== STATUS ACTIONS (Botones cambio de estado) ==================== */
.status-actions {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
}

.btn-status {
    padding: 6px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    font-weight: 600;
    transition: all 0.2s;
}

.btn-status-process {
    background: #28a745;
    color: white;
}

.btn-status-process:hover {
    background: #218838;
}

.btn-status-cancel {
    background: #dc3545;
    color: white;
}

.btn-status-cancel:hover {
    background: #c82333;
}

/* ==================== USER BADGE ==================== */
.user-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 4px 10px;
    background: #e9ecef;
    border-radius: 20px;
    font-size: 13px;
}

.user-badge-icon {
    font-size: 14px;
}

.proposal-card-user {
    margin-bottom: 10px;
}

/* Dark mode para user badge */
[data-theme="dark"] .user-badge {
    background: #3d3d3d;
    color: #e0e0e0;
}

/* ==================== GESTIÓN DE CONSULTAS CON GRID AVANZADA ==================== */
.inquiries-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}

.inquiries-content {
    padding: 15px 20px;
}

.inquiries-table-wrapper {
    border-radius: var(--radius);
    border: 1px solid var(--border);
}

.inquiries-table-wrapper .table-scroll-container {
    max-height: calc(100vh - 320px);
    overflow-y: auto;
    overflow-x: auto;
}

.inquiries-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
}

.inquiries-table th,
.inquiries-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid #eee;
    white-space: nowrap;
}

.inquiries-table th {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: sticky;
    top: 0;
    z-index: 10;
}

.inquiries-table th .column-header-wrapper {
    display: flex;
    align-items: center;
    gap: 6px;
}

.inquiries-table th .sortable-header {
    display: flex;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    user-select: none;
}

.inquiries-table th .sortable-header:hover {
    opacity: 0.8;
}

.inquiries-table th .sort-icon {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.inquiries-table th .sort-icon.active {
    opacity: 1;
}

.inquiries-table th .column-filter-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    border-radius: 4px;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: white;
}

.inquiries-table th .column-filter-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

.inquiries-table th .column-filter-btn.active {
    background: white;
}

.inquiries-table th .column-filter-btn.active svg {
    stroke: var(--primary);
}

.inquiries-table tbody tr {
    transition: background 0.2s;
    background-color: var(--row-even);
}

.inquiries-table tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.inquiries-table tbody tr:hover {
    background-color: var(--row-hover);
}

.inquiries-table td {
    font-size: 14px;
    color: #333;
}

/* Estados de consultas */
.status-pendiente {
    background: #fff3cd;
    color: #856404;
}

.status-respondida {
    background: #d4edda;
    color: #155724;
}

.status-cerrada {
    background: #e2e3e5;
    color: #383d41;
}

/* Botones de estado de consultas */
.btn-status-respond {
    background: #28a745;
    color: white;
}

.btn-status-respond:hover {
    background: #218838;
}

.btn-status-close {
    background: #6c757d;
    color: white;
}

.btn-status-close:hover {
    background: #545b62;
}

/* Product badge */
.product-badge {
    font-weight: 600;
    color: var(--primary);
}

/* Client info */
.client-info {
    font-size: 13px;
}

.client-info .name {
    font-weight: 600;
    color: #333;
}

.client-info .email {
    color: #666;
    font-size: 12px;
}

/* Empty state consultas */
.inquiries-empty {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.inquiries-empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
}

.inquiries-empty h3 {
    color: #666;
    margin-bottom: 10px;
}

/* Loading consultas */
.inquiries-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Modal de detalle de consulta */
#inquiry-detail-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    align-items: center;
    justify-content: center;
}

#inquiry-detail-modal .modal-content {
    background: white;
    border-radius: 10px;
    padding: 0;
    max-width: 700px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#inquiry-detail-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#inquiry-detail-modal .modal-header h2 {
    margin: 0;
    color: white;
}

#inquiry-detail-modal .modal-close {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    font-size: 28px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

#inquiry-detail-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: rotate(90deg);
}

.inquiry-detail-content {
    padding: 30px;
    overflow-y: auto;
    flex: 1;
}

.inquiry-section {
    margin-bottom: 25px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
}

.inquiry-section h4 {
    margin: 0 0 15px 0;
    color: #333;
    font-size: 14px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.inquiry-section-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
}

.inquiry-field {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.inquiry-field label {
    font-size: 11px;
    color: #666;
    text-transform: uppercase;
}

.inquiry-field span {
    font-size: 14px;
    color: #333;
    font-weight: 500;
}

.inquiry-message {
    background: #fff3e0;
    border-left: 4px solid #ff9800;
    padding: 15px;
    border-radius: 0 8px 8px 0;
    margin-top: 15px;
}

.inquiry-message h4 {
    margin: 0 0 10px 0;
    color: #e65100;
    font-size: 13px;
}

.inquiry-message p {
    margin: 0;
    color: #333;
    white-space: pre-wrap;
    line-height: 1.6;
}

.inquiry-response {
    background: #e8f5e9;
    border-left: 4px solid #4caf50;
    padding: 15px;
    border-radius: 0 8px 8px 0;
    margin-top: 15px;
}

.inquiry-response h4 {
    margin: 0 0 10px 0;
    color: #2e7d32;
    font-size: 13px;
}

.inquiry-response p {
    margin: 0;
    color: #333;
    white-space: pre-wrap;
    line-height: 1.6;
}

.inquiry-response .meta {
    margin-top: 10px;
    font-size: 12px;
    color: #666;
}

/* Response form */
.response-form {
    margin-top: 20px;
    padding: 20px;
    background: #e3f2fd;
    border-radius: 10px;
}

.response-form h4 {
    margin: 0 0 15px 0;
    color: #1565c0;
}

.response-form textarea {
    width: 100%;
    min-height: 120px;
    padding: 12px;
    border: 1px solid #90caf9;
    border-radius: 6px;
    font-size: 14px;
    resize: vertical;
    font-family: inherit;
}

.response-form textarea:focus {
    outline: none;
    border-color: #1976d2;
}

.response-form .form-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    justify-content: flex-end;
}

.response-form .btn-send {
    background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
}

.response-form .btn-send:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
}

/* Cards view for mobile - consultas */
.inquiries-cards {
    display: none;
}

.inquiry-card {
    background: white;
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 15px;
    transition: all 0.3s;
}

.inquiry-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.inquiry-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.inquiry-card-product {
    font-weight: 600;
    color: var(--primary);
    font-size: 14px;
}

.inquiry-card-date {
    color: #666;
    font-size: 12px;
}

.inquiry-card-client {
    margin-bottom: 10px;
    font-size: 14px;
}

.inquiry-card-client .name {
    font-weight: 600;
}

.inquiry-card-message {
    font-size: 13px;
    color: #666;
    margin-bottom: 15px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.inquiry-card-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Pending count badge */
.pending-badge {
    background: #ffc107;
    color: #333;
    padding: 4px 10px;
    border-radius: 15px;
    font-size: 12px;
    font-weight: 600;
    margin-left: 10px;
}

/* Responsive consultas */
@media (max-width: 768px) {
    .inquiries-content {
        padding: 15px;
    }

    .inquiries-table-wrapper {
        display: none !important;
    }

    .inquiries-cards {
        display: block !important;
    }

    .inquiry-section-grid {
        grid-template-columns: 1fr;
    }
}

/* Dark mode consultas */
[data-theme="dark"] .inquiries-container {
    background: #1e1e1e;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .inquiries-table th {
    background: #2d2d2d;
    color: #e0e0e0;
}

[data-theme="dark"] .inquiries-table td {
    color: #e0e0e0;
    border-bottom-color: #3d3d3d;
}

[data-theme="dark"] .inquiries-table tbody tr:hover {
    background: #2d2d2d;
}

[data-theme="dark"] .inquiry-card {
    background: #1e1e1e;
    border-color: #3d3d3d;
}

[data-theme="dark"] .inquiry-card:hover {
    border-color: var(--primary);
}

[data-theme="dark"] .inquiries-empty {
    color: #888;
}

[data-theme="dark"] .inquiries-empty h3 {
    color: #aaa;
}

[data-theme="dark"] #inquiry-detail-modal .modal-content {
    background: #1e1e1e;
}

[data-theme="dark"] .inquiry-detail-content {
    background: #1e1e1e;
}

[data-theme="dark"] .inquiry-section {
    background: #2d2d2d;
}

[data-theme="dark"] .inquiry-section h4 {
    color: #e0e0e0;
}

[data-theme="dark"] .inquiry-field label {
    color: #aaa;
}

[data-theme="dark"] .inquiry-field span {
    color: #e0e0e0;
}

[data-theme="dark"] .client-info .name {
    color: #e0e0e0;
}

[data-theme="dark"] .client-info .email {
    color: #aaa;
}

[data-theme="dark"] .inquiry-message {
    background: #3d3d2d;
}

[data-theme="dark"] .inquiry-message p {
    color: #e0e0e0;
}

[data-theme="dark"] .inquiry-response {
    background: #2d3d2d;
}

[data-theme="dark"] .inquiry-response p {
    color: #e0e0e0;
}

[data-theme="dark"] .response-form {
    background: #2d3d4d;
}

[data-theme="dark"] .response-form textarea {
    background: #1e1e1e;
    border-color: #3d5d7d;
    color: #e0e0e0;
}

[data-theme="dark"] .inquiry-card-client .name {
    color: #e0e0e0;
}

[data-theme="dark"] .inquiry-card-message {
    color: #aaa;
}

[data-theme="dark"] .inquiry-card-date {
    color: #888;
}

/* ==================== DASHBOARD ==================== */
.dashboard-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
}

/* Cards de resumen */
.stats-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
}

.stat-card {
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    display: flex;
    align-items: center;
    gap: 16px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.stat-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
}

.stat-icon {
    width: 56px;
    height: 56px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
}

.stat-icon.proposals {
    background: rgba(255, 67, 56, 0.1);
}

.stat-icon.pending {
    background: rgba(255, 193, 7, 0.1);
}

.stat-icon.users {
    background: rgba(33, 150, 243, 0.1);
}

.stat-icon.inquiries {
    background: rgba(156, 39, 176, 0.1);
}

.stat-icon.items {
    background: rgba(76, 175, 80, 0.1);
}

.stat-info {
    flex: 1;
}

.stat-value {
    font-size: 28px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1.2;
}

.stat-label {
    font-size: 13px;
    color: var(--text-secondary);
    margin-top: 4px;
}

/* Secciones de graficos */
.charts-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 24px;
}

.chart-card {
    background: white;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}

.chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.chart-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.chart-period {
    display: flex;
    gap: 8px;
}

.period-btn {
    padding: 6px 12px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    background: white;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.period-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
}

.period-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.chart-container {
    position: relative;
    height: 300px;
}

/* Tabla de productos dashboard */
.products-table {
    width: 100%;
    border-collapse: collapse;
}

.products-table th,
.products-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #f0f0f0;
}

.products-table th {
    font-size: 12px;
    text-transform: uppercase;
    color: var(--text-secondary);
    font-weight: 600;
}

.products-table tbody tr {
    background-color: var(--row-even);
}

.products-table tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.products-table tbody tr:hover {
    background-color: var(--row-hover);
}

.product-code {
    font-family: monospace;
    font-weight: 600;
    color: var(--primary);
}

.product-qty {
    font-weight: 600;
    color: var(--text-primary);
}

.product-times {
    color: var(--text-secondary);
    font-size: 12px;
}

/* Lista de usuarios dashboard */
.users-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.user-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background: #f8f9fa;
    border-radius: 8px;
}

.user-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    font-size: 14px;
}

.user-info {
    flex: 1;
}

.user-name {
    font-weight: 600;
    color: var(--text-primary);
}

.user-username {
    font-size: 12px;
    color: var(--text-secondary);
}

.user-stats {
    text-align: right;
}

.user-proposals {
    font-weight: 600;
    color: var(--primary);
}

.user-last {
    font-size: 11px;
    color: var(--text-secondary);
}

/* Dashboard loading state */
.dashboard-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Empty chart message */
.chart-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 200px;
    color: var(--text-secondary);
}

.chart-empty-icon {
    font-size: 48px;
    margin-bottom: 10px;
    opacity: 0.5;
}

/* Responsive dashboard */
@media (max-width: 768px) {
    .dashboard-container {
        gap: 16px;
        padding: 0;
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
    }

    .stats-cards {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
    }

    .stat-card {
        padding: 12px;
        flex-direction: column;
        text-align: center;
        gap: 8px;
    }

    .stat-icon {
        width: 44px;
        height: 44px;
        font-size: 20px;
    }

    .stat-value {
        font-size: 20px;
    }

    .stat-label {
        font-size: 11px;
    }

    .charts-row {
        grid-template-columns: 1fr;
        gap: 16px;
    }

    .chart-card {
        padding: 16px;
        border-radius: 8px;
    }

    .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        margin-bottom: 16px;
    }

    .chart-period {
        width: 100%;
        justify-content: flex-start;
        flex-wrap: wrap;
    }

    .period-btn {
        padding: 6px 10px;
        font-size: 11px;
    }

    .chart-container {
        height: 220px;
    }

    .products-table th,
    .products-table td {
        padding: 8px 6px;
        font-size: 12px;
    }

    .user-item {
        padding: 10px;
    }

    .user-avatar {
        width: 32px;
        height: 32px;
        font-size: 12px;
    }

    /* Tarjetas móviles para productos y usuarios */
    .top-products-table-desktop,
    .top-users-list-desktop,
    .top-viewed-table-desktop {
        display: none;
    }

    .top-products-cards-mobile,
    .top-users-cards-mobile {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
}

@media (min-width: 769px) {
    .top-products-cards-mobile,
    .top-users-cards-mobile {
        display: none;
    }
}

/* Dark mode dashboard */
[data-theme="dark"] .stat-card,
[data-theme="dark"] .chart-card {
    background: var(--bg-secondary);
}

[data-theme="dark"] .products-table tr:hover,
[data-theme="dark"] .user-item {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .products-table th,
[data-theme="dark"] .products-table td {
    border-bottom-color: var(--border);
}

[data-theme="dark"] .period-btn {
    background: var(--bg-tertiary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .period-btn:hover {
    border-color: var(--primary);
    color: var(--primary);
}

[data-theme="dark"] .period-btn.active {
    background: var(--primary);
    color: white;
}

/* ==================== CONFIGURACIÓN EMAIL ==================== */
.email-config-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

.email-config-content {
    padding: 30px;
}

/* Lista de configuraciones */
.config-list {
    display: grid;
    gap: 20px;
}

.config-card {
    border: 2px solid #f0f0f0;
    border-radius: 10px;
    padding: 20px;
    transition: all 0.3s;
    position: relative;
}

.config-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.config-card.active {
    border-color: #28a745;
    background: #f8fff9;
}

.config-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 15px;
}

.config-card-name {
    font-weight: 600;
    font-size: 18px;
    color: #333;
}

.config-card-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
}

.badge-active {
    background: #d4edda;
    color: #155724;
}

.badge-inactive {
    background: #e9ecef;
    color: #6c757d;
}

.config-card-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
}

.config-detail-item {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.config-detail-item label {
    font-size: 11px;
    color: #999;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.config-detail-item span {
    font-size: 14px;
    color: #333;
}

.config-card-actions {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    padding-top: 15px;
    border-top: 1px solid #eee;
}

/* Empty state email config */
.email-config-empty {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.email-config-empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
}

/* Loading email config */
.email-config-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Modal de edición email */
#edit-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 2000;
    align-items: center;
    justify-content: center;
}

#edit-modal .modal-content {
    background: white;
    border-radius: 10px;
    padding: 0;
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

#edit-modal .modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#edit-modal .modal-header h2 {
    margin: 0;
    color: white;
    font-size: 18px;
}

#edit-modal .modal-close {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    font-size: 24px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.3s;
}

#edit-modal .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.edit-modal-content {
    padding: 30px;
    overflow-y: auto;
    flex: 1;
}

.form-help {
    font-size: 12px;
    color: #999;
    margin-top: 4px;
}

.edit-modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #eee;
    flex-wrap: wrap;
}

.edit-modal-actions button {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: all 0.2s;
}

.edit-modal-actions .btn-test {
    margin-right: auto;
}

.btn-cancel {
    background: #e9ecef;
    color: #495057;
}

.btn-cancel:hover {
    background: #dee2e6;
}

.btn-save {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

.btn-save:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.4);
}

.btn-test {
    background: #17a2b8;
    color: white;
}

.btn-test:hover {
    background: #138496;
}

.btn-test:disabled {
    background: #6c757d;
    cursor: not-allowed;
}

/* Responsive email config */
@media (max-width: 768px) {
    .email-config-content {
        padding: 15px;
    }

    .config-card-details {
        grid-template-columns: 1fr;
    }

    .config-card-actions {
        flex-direction: column;
    }

    .config-card-actions .btn-action {
        width: 100%;
        text-align: center;
    }
}

/* Dark mode email config */
[data-theme="dark"] .email-config-container {
    background: #16213e;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .config-card {
    border-color: #2a2a4a;
    background: #1a1a2e;
}

[data-theme="dark"] .config-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.25);
}

[data-theme="dark"] .config-card.active {
    border-color: #28a745;
    background: rgba(40, 167, 69, 0.1);
}

[data-theme="dark"] .config-card-name {
    color: #e0e0e0;
}

[data-theme="dark"] .config-detail-item label {
    color: #888;
}

[data-theme="dark"] .config-detail-item span {
    color: #e0e0e0;
}

[data-theme="dark"] .config-card-actions {
    border-top-color: #2a2a4a;
}

[data-theme="dark"] .badge-inactive {
    background: #2a2a4a;
    color: #888;
}

[data-theme="dark"] .badge-active {
    background: rgba(40, 167, 69, 0.2);
    color: #4caf50;
}

[data-theme="dark"] .email-config-empty,
[data-theme="dark"] .email-config-loading {
    color: #888;
}

[data-theme="dark"] #edit-modal .modal-content {
    background: #16213e;
}

[data-theme="dark"] .edit-modal-content {
    background: #16213e;
}

[data-theme="dark"] .form-help {
    color: #888;
}

[data-theme="dark"] .edit-modal-actions {
    border-top-color: #2a2a4a;
}

[data-theme="dark"] .btn-cancel {
    background: #2a2a4a;
    color: #e0e0e0;
}

[data-theme="dark"] .btn-cancel:hover {
    background: #3a3a5a;
}

/* ==================== PARÁMETROS DEL SISTEMA ==================== */
.params-container {
    background: white;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
}

.params-content {
    padding: 30px;
}

/* Lista de parámetros */
.params-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* ==================== SECCIONES DE PARÁMETROS ==================== */
.param-section {
    background: var(--bg-primary);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.param-section-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 16px 20px;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border-bottom: 1px solid var(--border);
}

.param-section-icon {
    font-size: 1.5rem;
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-primary);
    border-radius: var(--radius);
    box-shadow: var(--shadow-sm);
}

.param-section-info {
    flex: 1;
}

.param-section-info h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.param-section-info p {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin: 4px 0 0 0;
}

.param-section-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 16px;
    padding: 20px;
}

/* Dark mode para secciones de parámetros */
[data-theme="dark"] .param-section {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .param-section-header {
    background: linear-gradient(135deg, var(--bg-tertiary) 0%, #1a1a2e 100%);
    border-bottom-color: var(--border);
}

[data-theme="dark"] .param-section-icon {
    background: var(--bg-secondary);
}

/* Responsive para secciones */
@media (max-width: 768px) {
    .param-section-grid {
        grid-template-columns: 1fr;
        padding: 16px;
    }

    .param-section-header {
        padding: 12px 16px;
    }

    .param-section-icon {
        width: 36px;
        height: 36px;
        font-size: 1.2rem;
    }

    .param-section-info h3 {
        font-size: 0.9rem;
    }

    .param-section-info p {
        font-size: 0.75rem;
    }
}

/* ==================== TABLA DB INFO ==================== */
.db-info-table {
    width: 100%;
    border-collapse: collapse;
    margin: 0;
    font-size: 0.85rem;
}

.db-info-table thead th {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 10px 14px;
    text-align: left;
    font-weight: 600;
    font-size: 0.8rem;
    white-space: nowrap;
}

.db-info-table tbody td {
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
    color: var(--text-primary);
}

.db-info-table tbody tr:hover {
    background: var(--bg-secondary);
}

[data-theme="dark"] .db-info-table tbody tr:hover {
    background: var(--bg-tertiary);
}

@media (max-width: 768px) {
    .db-info-table {
        font-size: 0.75rem;
    }
    .db-info-table thead th,
    .db-info-table tbody td {
        padding: 8px 10px;
    }
}

/* Tarjetas de parámetros dentro de secciones */
.param-card {
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    transition: all 0.3s;
    display: flex;
    flex-direction: column;
    gap: 12px;
    background: var(--bg-primary);
}

.param-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.param-info {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.param-key {
    font-family: monospace;
    font-weight: 600;
    font-size: 14px;
    color: var(--primary);
    background: var(--accent, #ffebee);
    padding: 4px 10px;
    border-radius: 4px;
    display: inline-block;
    width: fit-content;
}

.param-description {
    font-size: 14px;
    color: #666;
    line-height: 1.5;
}

.param-meta {
    font-size: 12px;
    color: #999;
}

.param-value-section {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: flex-start;
    margin-top: auto;
}

.param-value-display {
    min-width: 100px;
    padding: 10px 15px;
    background: #f8f9fa;
    border-radius: 6px;
    font-weight: 500;
    text-align: center;
}

.param-value-display.value-true {
    background: #d4edda;
    color: #155724;
}

.param-value-display.value-false {
    background: #f8d7da;
    color: #721c24;
}

.param-value-readonly {
    min-width: 150px;
    padding: 10px 15px;
    background: #e9ecef;
    border-radius: 6px;
    font-weight: 500;
    text-align: center;
    color: #6c757d;
    font-style: italic;
    border: 1px dashed #adb5bd;
}

[data-theme="dark"] .param-value-readonly {
    background: #2a2a4a;
    color: #adb5bd;
    border-color: #4a4a6a;
}

/* Input para valores de texto en parámetros */
.param-input {
    padding: 10px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 6px;
    font-size: 14px;
    min-width: 150px;
    transition: border-color 0.3s;
}

.param-input:focus {
    outline: none;
    border-color: var(--primary);
}

.btn-save-param {
    padding: 10px 16px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
}

.btn-save-param:hover {
    background: var(--primary-dark);
}

.btn-save-param:disabled {
    background: #ccc;
    cursor: not-allowed;
}

/* Empty state parámetros */
.params-empty {
    text-align: center;
    padding: 60px 20px;
    color: #999;
}

.params-empty-icon {
    font-size: 80px;
    margin-bottom: 20px;
    opacity: 0.5;
}

/* Loading parámetros */
.params-loading {
    text-align: center;
    padding: 60px 20px;
}

/* Toast notification */
.toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 15px 25px;
    border-radius: 8px;
    color: white;
    font-weight: 500;
    z-index: 3000;
    animation: slideIn 0.3s ease;
}

.toast.success {
    background: #28a745;
}

.toast.error {
    background: #dc3545;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }

    to {
        transform: translateX(0);
        opacity: 1;
    }
}

/* Responsive parámetros */
@media (max-width: 768px) {
    .params-content {
        padding: 15px;
    }

    .param-card {
        grid-template-columns: 1fr;
        gap: 15px;
    }

    .param-value-section {
        justify-content: flex-start;
    }
}

/* Info box */
.info-box {
    background: #e7f3ff;
    border-left: 4px solid #2196f3;
    padding: 15px 20px;
    border-radius: 0 8px 8px 0;
    margin-bottom: 25px;
}

.info-box p {
    margin: 0;
    color: #1565c0;
    font-size: 14px;
}

/* Dark mode parámetros */
[data-theme="dark"] .params-container {
    background: #16213e;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] .param-card {
    border-color: #2a2a4a;
    background: #1a1a2e;
}

[data-theme="dark"] .param-card:hover {
    border-color: var(--primary);
}

[data-theme="dark"] .param-key {
    background: rgba(255, 67, 56, 0.15);
}

[data-theme="dark"] .param-description {
    color: #aaa;
}

[data-theme="dark"] .param-meta {
    color: #666;
}

[data-theme="dark"] .param-value-display {
    background: #2a2a4a;
    color: #e0e0e0;
}

[data-theme="dark"] .param-input {
    background: #1a1a2e;
    border-color: #2a2a4a;
    color: #e0e0e0;
}

[data-theme="dark"] .param-input:focus {
    border-color: var(--primary);
}

[data-theme="dark"] .params-empty,
[data-theme="dark"] .params-loading {
    color: #888;
}

[data-theme="dark"] .info-box {
    background: rgba(33, 150, 243, 0.1);
    border-left-color: #2196f3;
}

[data-theme="dark"] .info-box p {
    color: #64b5f6;
}

/* ==================== LOGO DE EMPRESA ==================== */
.logo-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}

.logo-card {
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow);
    padding: 30px;
    margin-bottom: 20px;
}

.logo-card h3 {
    color: var(--text-primary);
    margin-bottom: 20px;
    font-size: 1.25rem;
    display: flex;
    align-items: center;
    gap: 10px;
}

.logo-preview-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    padding: 30px;
    background: var(--bg-secondary);
    border-radius: var(--radius);
    border: 2px dashed var(--border);
    margin-bottom: 20px;
    min-height: 200px;
}

.logo-preview {
    max-width: 300px;
    max-height: 150px;
    object-fit: contain;
}

.favicon-preview {
    width: 64px;
    height: 64px;
    object-fit: contain;
}

.no-image {
    color: var(--text-secondary);
    font-style: italic;
}

.upload-section {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.file-input-wrapper {
    position: relative;
    overflow: hidden;
    display: inline-block;
}

.file-input-wrapper input[type="file"] {
    position: absolute;
    left: 0;
    top: 0;
    opacity: 0;
    cursor: pointer;
    width: 100%;
    height: 100%;
}

.btn-upload {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
}

.btn-upload:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.btn-delete {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: var(--radius-sm);
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s;
}

.btn-delete:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.btn-delete:disabled,
.btn-upload:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.info-text {
    color: var(--text-secondary);
    font-size: 0.875rem;
    margin-top: 15px;
}

.empresa-info {
    background: var(--bg-tertiary);
    padding: 15px 20px;
    border-radius: var(--radius);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.empresa-info strong {
    color: var(--primary);
}

/* Theme selector grid */
.theme-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 15px;
}

.theme-card {
    background: var(--bg-secondary);
    border: 2px solid var(--border);
    border-radius: var(--radius);
    padding: 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.theme-card:hover {
    border-color: var(--primary);
    transform: translateY(-2px);
}

.theme-card.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--accent);
}

.theme-preview {
    width: 100%;
    height: 50px;
    border-radius: var(--radius-sm);
    margin-bottom: 10px;
}

.theme-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
}

/* Dark mode logo empresa */
[data-theme="dark"] .logo-card {
    background: var(--bg-primary);
}

[data-theme="dark"] .logo-preview-container {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .empresa-info {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .theme-card {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .theme-card:hover,
[data-theme="dark"] .theme-card.selected {
    border-color: var(--primary-light);
}

/* ==================== LOGO EMPRESA - RESPONSIVE MOVIL ==================== */
@media (max-width: 768px) {
    .logo-container {
        padding: 10px;
    }

    .logo-card {
        padding: 15px;
        margin-bottom: 15px;
    }

    .logo-card h3 {
        font-size: 1.1rem;
        margin-bottom: 15px;
    }

    .logo-preview-container {
        padding: 15px;
        min-height: 120px;
    }

    .logo-preview {
        max-width: 200px;
        max-height: 100px;
    }

    .empresa-info {
        padding: 12px 15px;
        flex-direction: column;
        text-align: center;
    }

    /* Grid de temas: 3 columnas en movil */
    .theme-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
    }

    .theme-card {
        padding: 8px;
    }

    .theme-preview {
        height: 35px;
        margin-bottom: 6px;
    }

    .theme-name {
        font-size: 0.75rem;
    }

    .config-option {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }

    .config-option-info {
        width: 100%;
    }

    .config-option-label {
        font-size: 0.9rem;
    }

    .config-option-desc {
        font-size: 0.8rem;
    }

    .theme-selector-section {
        margin-top: 15px !important;
    }

    .info-text {
        font-size: 0.8rem;
        margin-top: 10px;
    }
}

/* Pantallas muy pequeñas: 2 columnas */
@media (max-width: 400px) {
    .theme-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .logo-preview {
        max-width: 150px;
    }
}

/* ==================== SESIONES ACTIVAS ==================== */
.sessions-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}

/* Desktop: mostrar tabla, ocultar tarjetas */
.sessions-table-desktop {
    display: table;
}

.sessions-cards-mobile {
    display: none;
}

/* Movil: ocultar tabla, mostrar tarjetas */
@media (max-width: 768px) {
    .sessions-table-desktop {
        display: none !important;
    }

    .sessions-cards-mobile {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
}

/* Estilos de tarjeta de sesion */
.session-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.session-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border, #e0e0e0);
}

.session-user-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.session-username {
    font-weight: 600;
    font-size: 16px;
    color: var(--text-primary, #333);
}

.session-card-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.session-detail {
    font-size: 14px;
    color: var(--text-secondary, #666);
}

.session-detail strong {
    color: var(--text-primary, #333);
}

/* Dark mode para tarjetas de sesion */
[data-theme="dark"] .session-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .session-card-header {
    border-color: var(--border);
}

[data-theme="dark"] .session-username {
    color: var(--text-primary);
}

[data-theme="dark"] .session-detail {
    color: var(--text-secondary);
}

[data-theme="dark"] .session-detail strong {
    color: var(--text-primary);
}

/* ==================== AUDITORIA DE USUARIOS ==================== */
.audit-filters {
    background: var(--bg-secondary, #f8f9fa);
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 16px;
}

.audit-filters .filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: flex-end;
}

.audit-filters .filter-group {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.audit-filters .filter-group label {
    font-size: 0.85rem;
    color: var(--text-secondary, #666);
    font-weight: 500;
}

.audit-filters .filter-group input,
.audit-filters .filter-group select {
    padding: 8px 12px;
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 6px;
    background: var(--bg-primary, #fff);
    color: var(--text-primary, #333);
    font-size: 0.9rem;
    min-width: 120px;
}

.audit-filters .filter-group input:focus,
.audit-filters .filter-group select:focus {
    outline: none;
    border-color: var(--primary);
}

.audit-filters .filter-buttons {
    display: flex;
    gap: 8px;
    align-items: flex-end;
}

.audit-filters .btn-secondary {
    background: transparent;
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.audit-filters .btn-secondary:hover {
    background: var(--bg-secondary);
}

/* Desktop: tabla, movil: tarjetas */
.audit-table-desktop {
    display: table;
    table-layout: fixed;
}

.audit-table-desktop td {
    word-break: break-all;
    overflow-wrap: break-word;
    max-width: 150px;
}

.audit-table-desktop tbody tr {
    background-color: var(--row-even);
    transition: background 0.2s;
}

.audit-table-desktop tbody tr:nth-child(odd) {
    background-color: var(--row-odd);
}

.audit-table-desktop tbody tr:hover {
    background-color: var(--row-hover);
}

.audit-cards-mobile {
    display: none;
}

/* Estilos base de tarjetas de auditoría */
.audit-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.audit-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border, #e0e0e0);
}

.audit-card-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.audit-detail {
    font-size: 14px;
    color: var(--text-secondary, #666);
    word-break: break-all;
    overflow-wrap: break-word;
}

.audit-detail strong {
    color: var(--text-primary, #333);
    word-break: normal;
}

/* Dark mode para tarjetas de auditoría */
[data-theme="dark"] .audit-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .audit-card-header {
    border-color: var(--border);
}

[data-theme="dark"] .audit-detail {
    color: var(--text-secondary);
}

[data-theme="dark"] .audit-detail strong {
    color: var(--text-primary);
}

@media (max-width: 768px) {
    .audit-table-desktop {
        display: none !important;
    }

    .audit-cards-mobile {
        display: flex;
        flex-direction: column;
        gap: 12px;
        padding: 0;
    }

    .audit-filters {
        padding: 12px;
        margin-bottom: 12px;
    }

    .audit-filters .filter-row {
        flex-direction: column;
        gap: 10px;
    }

    .audit-filters .filter-group {
        width: 100%;
    }

    .audit-filters .filter-group label {
        font-size: 0.8rem;
        margin-bottom: 2px;
    }

    .audit-filters .filter-group input,
    .audit-filters .filter-group select {
        width: 100%;
        padding: 10px 12px;
        font-size: 16px; /* Evita zoom en iOS */
        min-width: unset;
    }

    .audit-filters .filter-buttons {
        width: 100%;
        display: flex;
        gap: 10px;
        margin-top: 5px;
    }

    .audit-filters .filter-buttons button {
        flex: 1;
        padding: 12px;
        font-size: 14px;
    }

    /* Tarjetas de auditoría en móvil */
    .audit-card {
        padding: 14px;
        border-radius: 10px;
        margin: 0;
    }

    .audit-card-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }

    .audit-card-header .action-badge {
        font-size: 13px;
        padding: 4px 10px;
    }

    .audit-card-header .result-badge {
        align-self: flex-end;
        margin-top: -24px;
    }

    .audit-card-body {
        gap: 6px;
    }

    .audit-detail {
        font-size: 13px;
        display: flex;
        justify-content: space-between;
    }

    .audit-detail strong {
        min-width: 70px;
    }

    /* Paginación móvil */
    .audit-pagination {
        flex-wrap: wrap;
        justify-content: center;
        gap: 8px;
        padding: 12px 0;
    }

    .audit-pagination .pagination-btn {
        padding: 10px 16px;
        font-size: 14px;
    }

    .audit-pagination .pagination-info {
        width: 100%;
        text-align: center;
        order: -1;
        margin-bottom: 8px;
    }
}

/* Tarjeta de auditoria */
.audit-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.audit-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border, #e0e0e0);
}

.audit-card-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.audit-detail {
    font-size: 14px;
    color: var(--text-secondary, #666);
}

.audit-detail strong {
    color: var(--text-primary, #333);
}

/* Badges de accion */
.action-badge {
    display: inline-block;
    padding: 4px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

.action-badge.action-auth {
    background: #e3f2fd;
    color: #1565c0;
}

.action-badge.action-session {
    background: #fff3e0;
    color: #e65100;
}

.action-badge.action-user {
    background: #e8f5e9;
    color: #2e7d32;
}

.action-badge.action-apikey {
    background: #fce4ec;
    color: #c2185b;
}

.action-badge.action-config {
    background: #f3e5f5;
    color: #7b1fa2;
}

.action-badge.action-propuesta {
    background: #e0f7fa;
    color: #00838f;
}

.action-badge.action-consulta {
    background: #ede7f6;
    color: #512da8;
}

.action-badge.action-other {
    background: #eceff1;
    color: #546e7a;
}

/* Badges de resultado */
.result-badge {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
}

.result-badge.result-success {
    background: #d4edda;
    color: #155724;
}

.result-badge.result-failed {
    background: #f8d7da;
    color: #721c24;
}

.result-badge.result-blocked {
    background: #fff3cd;
    color: #856404;
}

/* Paginacion */
.audit-pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--border, #e0e0e0);
}

.pagination-btn {
    padding: 8px 16px;
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 6px;
    background: var(--bg-primary, #fff);
    color: var(--text-primary, #333);
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.pagination-btn:hover:not(:disabled) {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-info {
    font-size: 0.9rem;
    color: var(--text-secondary, #666);
}

/* Dark mode auditoria */
[data-theme="dark"] .audit-filters {
    background: var(--bg-secondary);
}

[data-theme="dark"] .audit-filters .filter-group input,
[data-theme="dark"] .audit-filters .filter-group select {
    background: var(--bg-primary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .audit-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .audit-card-header {
    border-color: var(--border);
}

[data-theme="dark"] .audit-detail {
    color: var(--text-secondary);
}

[data-theme="dark"] .audit-detail strong {
    color: var(--text-primary);
}

[data-theme="dark"] .audit-pagination {
    border-color: var(--border);
}

[data-theme="dark"] .pagination-btn {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .pagination-btn:hover:not(:disabled) {
    background: var(--primary);
    color: white;
}

[data-theme="dark"] .pagination-info {
    color: var(--text-secondary);
}

/* Dark mode action badges */
[data-theme="dark"] .action-badge.action-auth {
    background: rgba(21, 101, 192, 0.2);
    color: #64b5f6;
}

[data-theme="dark"] .action-badge.action-session {
    background: rgba(230, 81, 0, 0.2);
    color: #ffb74d;
}

[data-theme="dark"] .action-badge.action-user {
    background: rgba(46, 125, 50, 0.2);
    color: #81c784;
}

[data-theme="dark"] .action-badge.action-apikey {
    background: rgba(194, 24, 91, 0.2);
    color: #f48fb1;
}

[data-theme="dark"] .action-badge.action-config {
    background: rgba(123, 31, 162, 0.2);
    color: #ce93d8;
}

[data-theme="dark"] .action-badge.action-propuesta {
    background: rgba(0, 131, 143, 0.2);
    color: #4dd0e1;
}

[data-theme="dark"] .action-badge.action-consulta {
    background: rgba(81, 45, 168, 0.2);
    color: #b39ddb;
}

[data-theme="dark"] .action-badge.action-other {
    background: rgba(84, 110, 122, 0.2);
    color: #90a4ae;
}

/* Dark mode result badges */
[data-theme="dark"] .result-badge.result-success {
    background: rgba(76, 175, 80, 0.2);
    color: #81c784;
}

[data-theme="dark"] .result-badge.result-failed {
    background: rgba(244, 67, 54, 0.2);
    color: #ef9a9a;
}

[data-theme="dark"] .result-badge.result-blocked {
    background: rgba(255, 193, 7, 0.2);
    color: #ffd54f;
}

/* ==================== AUDIT TABLE SORTING & INLINE FILTERS ==================== */

/* Encabezados ordenables */
.audit-table-desktop th.sortable {
    cursor: pointer;
    user-select: none;
    transition: background-color 0.2s;
}

.audit-table-desktop th.sortable:hover {
    background: rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] .audit-table-desktop th.sortable:hover {
    background: rgba(255, 255, 255, 0.05);
}

.audit-table-desktop th .th-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
}

.audit-table-desktop th .sort-icon {
    font-size: 0.85rem;
    opacity: 0.5;
    transition: opacity 0.2s;
}

.audit-table-desktop th .sort-icon.active {
    opacity: 1;
    color: var(--primary);
}

/* Fila de filtros inline */
.audit-filter-row td {
    padding: 8px 4px !important;
    background: var(--bg-secondary);
    border-bottom: 2px solid var(--border);
}

.column-filter {
    width: 100%;
    padding: 6px 8px;
    border: 1px solid var(--border);
    border-radius: 4px;
    font-size: 0.85rem;
    background: var(--bg-primary);
    color: var(--text-primary);
    box-sizing: border-box;
}

.column-filter:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(var(--primary-rgb, 255, 67, 56), 0.2);
}

.column-filter::placeholder {
    color: var(--text-muted);
    opacity: 0.7;
}

/* Filtros de fecha más compactos */
.column-filter[type="date"] {
    padding: 4px 6px;
}

/* Dark mode para filtros inline */
[data-theme="dark"] .audit-filter-row td {
    background: var(--bg-tertiary, #1a1a1a);
}

[data-theme="dark"] .column-filter {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .column-filter:focus {
    border-color: var(--primary);
}

/* Responsive: ocultar filtros inline en móvil */
@media (max-width: 768px) {
    .audit-filter-row {
        display: none;
    }
}

/* ==================== TARJETAS MOVILES PRODUCTOS MAS SOLICITADOS ==================== */
.top-products-cards-mobile {
    display: none;
}

.top-products-table-desktop {
    display: table;
}

@media (max-width: 768px) {
    .top-products-table-desktop {
        display: none !important;
    }

    .top-products-cards-mobile {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
}

.top-product-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 8px;
    padding: 12px;
}

.top-product-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.top-product-code {
    font-weight: 600;
    color: var(--primary);
    font-size: 0.95rem;
}

.top-product-times {
    background: var(--primary);
    color: white;
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.top-product-desc {
    color: var(--text-primary);
    font-size: 0.9rem;
    margin-bottom: 6px;
}

.top-product-qty {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.top-product-qty strong {
    color: var(--text-primary);
}

/* Dark mode para tarjetas de productos */
[data-theme="dark"] .top-product-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .top-product-desc {
    color: var(--text-primary);
}

/* ==================== TARJETAS MOVILES USUARIOS MAS ACTIVOS ==================== */
.top-users-cards-mobile {
    display: none;
}

.top-users-list-desktop {
    display: flex;
    flex-direction: column;
}

@media (max-width: 768px) {
    .top-users-list-desktop {
        display: none !important;
    }

    .top-users-cards-mobile {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }
}

.top-user-card {
    background: var(--bg-primary, #fff);
    border: 1px solid var(--border, #e0e0e0);
    border-radius: 8px;
    padding: 12px;
}

.top-user-card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
}

.top-user-avatar {
    width: 40px;
    height: 40px;
    background: var(--primary);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 0.9rem;
}

.top-user-info {
    flex: 1;
}

.top-user-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.top-user-username {
    color: var(--text-secondary);
    font-size: 0.85rem;
}

.top-user-card-stats {
    display: flex;
    gap: 20px;
    padding-top: 10px;
    border-top: 1px solid var(--border, #e0e0e0);
}

.top-user-stat {
    display: flex;
    flex-direction: column;
}

.top-user-stat-value {
    font-weight: 600;
    color: var(--primary);
    font-size: 0.95rem;
}

.top-user-stat-label {
    color: var(--text-secondary);
    font-size: 0.8rem;
}

/* Dark mode para tarjetas de usuarios */
[data-theme="dark"] .top-user-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .top-user-card-stats {
    border-color: var(--border);
}

[data-theme="dark"] .top-user-name {
    color: var(--text-primary);
}

/* Mensaje vacio dashboard */
.dashboard-empty-message {
    text-align: center;
    padding: 20px;
    color: var(--text-secondary);
}

/* ==================== OVERLAY ENVIANDO ==================== */
#enviando-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
}

.enviando-content {
    background: white;
    padding: 40px 60px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.enviando-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.enviando-content p {
    margin: 0;
    font-size: 18px;
    font-weight: 500;
    color: #333;
}

/* Dark mode */
[data-theme="dark"] .enviando-content {
    background: var(--bg-secondary);
}

[data-theme="dark"] .enviando-content p {
    color: var(--text-primary);
}

[data-theme="dark"] .enviando-spinner {
    border-color: var(--bg-tertiary);
    border-top-color: var(--primary);
}

/* ==================== OVERLAY CARGANDO STOCKS ==================== */
#cargando-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
}

.cargando-content {
    background: white;
    padding: 40px 60px;
    border-radius: 12px;
    text-align: center;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
}

.cargando-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
}

.cargando-content p {
    margin: 0;
    font-size: 18px;
    font-weight: 500;
    color: #333;
}

/* Dark mode */
[data-theme="dark"] .cargando-content {
    background: var(--bg-secondary);
}

[data-theme="dark"] .cargando-content p {
    color: var(--text-primary);
}

[data-theme="dark"] .cargando-spinner {
    border-color: var(--bg-tertiary);
    border-top-color: var(--primary);
}

/* ==================== DATA GRID WEB COMPONENT ==================== */

/* Custom element */
data-grid {
    display: block;
    width: 100%;
    height: var(--dg-height, auto);
    max-height: var(--dg-max-height, none);
}

/* Container */
.dg-container {
    display: flex;
    flex-direction: column;
    gap: 15px;
    width: 100%;
    height: 100%;
}

.dg-content {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    position: relative;
}

/* Loading */
.dg-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    color: var(--text-secondary, #666);
}

.dg-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid #f3f3f3;
    border-top: 3px solid var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

/* Empty state */
.dg-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
    color: var(--text-secondary, #666);
}

.dg-empty-icon {
    font-size: 48px;
    margin-bottom: 15px;
}

.dg-empty h3 {
    margin: 0 0 10px;
    color: var(--text-primary, #333);
}

.dg-empty p {
    margin: 0;
    font-size: 14px;
}

/* Filter chips */
.dg-filter-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    align-items: center;
    padding: 10px 0;
}

.dg-filter-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
}

.dg-filter-chip strong {
    font-weight: 600;
}

.dg-chip-operator {
    opacity: 0.8;
    font-size: 12px;
}

.dg-chip-remove {
    background: rgba(255, 255, 255, 0.3);
    border: none;
    color: white;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    line-height: 1;
    margin-left: 4px;
    transition: background 0.2s;
}

.dg-chip-remove:hover {
    background: rgba(255, 255, 255, 0.5);
}

.dg-clear-all-filters {
    background: transparent;
    border: 1px solid var(--primary);
    color: var(--primary);
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}

.dg-clear-all-filters:hover {
    background: var(--primary);
    color: white;
}

/* Column resize handle */
.dg-table-wrapper th {
    position: relative;
}

.dg-resize-handle {
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 5px;
    cursor: col-resize;
    user-select: none;
}

.dg-resize-handle:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Table */
.dg-table-wrapper {
    border-radius: 10px;
    border: 1px solid #e0e0e0;
    flex: 1;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.dg-table-wrapper .table-scroll-container {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: auto;
}

.dg-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 14px;
}

.dg-table thead {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    position: sticky;
    top: 0;
    z-index: 10;
}

.dg-th {
    padding: 12px 15px;
    text-align: left;
    font-weight: 600;
    white-space: nowrap;
}

.dg-th-content {
    display: flex;
    align-items: center;
    gap: 8px;
}

.dg-th-label {
    display: flex;
    align-items: center;
    gap: 4px;
}

.dg-th-label.clickable {
    cursor: pointer;
}

.dg-th-label.clickable:hover {
    opacity: 0.8;
}

.dg-sort-icon {
    opacity: 0.5;
    transition: opacity 0.2s;
}

.dg-sort-icon.active {
    opacity: 1;
}

.dg-filter-btn {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 26px;
    height: 26px;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.dg-filter-btn:hover {
    background: rgba(255, 255, 255, 0.3);
}

.dg-filter-btn.active {
    background: rgba(255, 255, 255, 0.4);
}

.dg-filter-btn svg {
    width: 14px;
    height: 14px;
}

.dg-td {
    padding: 12px 15px;
    border-bottom: 1px solid #e0e0e0;
    color: var(--text-primary, #333);
}

.dg-table tbody tr:hover {
    background: rgba(0, 0, 0, 0.02);
}

.dg-table tbody tr:last-child .dg-td {
    border-bottom: none;
}

.dg-actions-cell {
    white-space: nowrap;
}

.dg-action-btn {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    padding: 6px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 12px;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    margin-right: 6px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.dg-action-btn:last-child {
    margin-right: 0;
}

.dg-action-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(255, 67, 56, 0.3);
}

.dg-action-label {
    white-space: nowrap;
}

/* Cards (mobile) - oculto en desktop, visible en mobile via .proposals-cards media query */
.dg-cards {
    display: none;
    flex-direction: column;
    gap: 15px;
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 5px;
    width: 100%;
    box-sizing: border-box;
}

.dg-card {
    background: white;
    border: 2px solid #f0f0f0;
    border-radius: 12px;
    padding: 15px;
    transition: all 0.3s;
    cursor: pointer;
}

.dg-card:hover {
    border-color: var(--primary);
    box-shadow: 0 4px 12px rgba(255, 67, 56, 0.15);
}

.dg-card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px solid #f0f0f0;
}

.dg-card-title {
    font-weight: 600;
    color: var(--primary);
    font-size: 15px;
}

.dg-card-body {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.dg-card-field {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    gap: 8px;
}

.dg-card-label {
    color: var(--text-secondary, #666);
    flex-shrink: 0;
}

.dg-card-value {
    color: var(--text-primary, #333);
    font-weight: 500;
    text-align: right;
    word-break: break-word;
    overflow-wrap: break-word;
    min-width: 0;
}

.dg-card-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #f0f0f0;
}

.dg-card-actions .dg-action-btn {
    flex: 1;
    justify-content: center;
    margin-right: 0;
}

/* Footer */
.dg-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid #e0e0e0;
    border-radius: 0 0 10px 10px;
    margin-top: -1px;
    gap: 20px;
    flex-wrap: wrap;
    flex-shrink: 0;
}

.dg-footer-info {
    font-size: 13px;
    color: var(--text-secondary, #666);
    font-weight: 500;
}

.dg-footer-pagination {
    display: flex;
    align-items: center;
    gap: 4px;
}

@media (max-width: 576px) {
    .dg-footer {
        flex-direction: column;
        gap: 12px;
        text-align: center;
    }

    .dg-footer-info {
        order: 2;
    }

    .dg-footer-pagination {
        order: 1;
    }
}

/* Pagination layout */
.dg-pagination {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    gap: 12px;
}

.dg-pagination-info {
    font-size: 13px;
    color: var(--text-secondary, #666);
    font-weight: 500;
    white-space: nowrap;
}

.dg-pagination-controls {
    display: flex;
    align-items: center;
    gap: 4px;
}

.dg-page-current {
    padding: 0 10px;
    font-weight: 600;
    font-size: 13px;
    white-space: nowrap;
}

.dg-page-btn {
    background: white;
    border: 1px solid #e0e0e0;
    color: var(--text-primary, #333);
    width: 36px;
    height: 36px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

@media (max-width: 768px) {
    .dg-pagination {
        flex-direction: column;
        gap: 8px;
    }
    .dg-pagination-controls {
        gap: 3px;
    }
    .dg-page-btn {
        width: 30px;
        height: 30px;
        font-size: 12px;
    }
    .dg-page-current {
        font-size: 12px;
        padding: 0 6px;
    }
    .dg-pagination-info {
        font-size: 12px;
    }
}

.dg-page-btn:hover:not([disabled]) {
    border-color: var(--primary);
    color: var(--primary);
}

.dg-page-btn.active {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
}

.dg-page-btn[disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}

.dg-page-btn svg {
    width: 16px;
    height: 16px;
}

.dg-page-ellipsis {
    padding: 0 8px;
    color: var(--text-secondary, #666);
}

/* Filter Popup */
.dg-filter-popup {
    position: fixed;
    z-index: 10000;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    min-width: 280px;
    max-width: 350px;
    overflow: hidden;
}

.dg-filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

.dg-filter-title {
    font-weight: 600;
    font-size: 14px;
}

.dg-filter-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.dg-filter-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.dg-filter-body {
    padding: 20px;
}

.dg-filter-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 15px;
}

.dg-filter-operator-label {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
    background: white;
}

.dg-filter-operator-label:hover {
    border-color: var(--primary);
}

.dg-filter-operator-label.active {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border-color: var(--primary);
    color: white;
}

.dg-filter-operator {
    display: none;
}

.dg-filter-inputs {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.dg-filter-input {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.dg-filter-input:focus {
    outline: none;
    border-color: var(--primary);
}

.dg-filter-range-label {
    text-align: center;
    color: var(--text-secondary, #666);
    font-size: 13px;
}

.dg-filter-footer {
    display: flex;
    justify-content: space-between;
    padding: 15px 20px;
    border-top: 1px solid #f0f0f0;
    background: #fafafa;
}

.dg-filter-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.dg-filter-btn-clear {
    background: white;
    border: 1px solid #e0e0e0;
    color: var(--text-primary, #333);
}

.dg-filter-btn-clear:hover {
    border-color: #999;
}

.dg-filter-btn-apply {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    border: none;
    color: white;
}

.dg-filter-btn-apply:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(255, 67, 56, 0.3);
}

.dg-filter-btn svg {
    width: 14px;
    height: 14px;
}

/* Dark mode - Data Grid */
[data-theme="dark"] .dg-table-wrapper {
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-td {
    border-color: var(--border-color, #3d3d3d);
    color: var(--text-primary);
}

[data-theme="dark"] .dg-table tbody tr:hover {
    background: rgba(255, 255, 255, 0.02);
}

[data-theme="dark"] .dg-card {
    background: var(--bg-secondary);
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-card:hover {
    border-color: var(--primary);
}

[data-theme="dark"] .dg-card-header {
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-card-actions {
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-page-btn {
    background: var(--bg-secondary);
    border-color: var(--border-color, #3d3d3d);
    color: var(--text-primary);
}

[data-theme="dark"] .dg-page-btn:hover:not([disabled]) {
    border-color: var(--primary);
    color: var(--primary);
}

[data-theme="dark"] .dg-filter-popup {
    background: var(--bg-secondary);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .dg-filter-operator-label {
    background: var(--bg-tertiary);
    border-color: var(--border-color, #3d3d3d);
    color: var(--text-primary);
}

[data-theme="dark"] .dg-filter-operator-label:hover {
    border-color: var(--primary);
}

[data-theme="dark"] .dg-filter-input {
    background: var(--bg-tertiary);
    border-color: var(--border-color, #3d3d3d);
    color: var(--text-primary);
}

[data-theme="dark"] .dg-filter-input:focus {
    border-color: var(--primary);
}

[data-theme="dark"] .dg-filter-footer {
    background: var(--bg-tertiary);
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-filter-btn-clear {
    background: var(--bg-secondary);
    border-color: var(--border-color, #3d3d3d);
    color: var(--text-primary);
}

[data-theme="dark"] .dg-empty,
[data-theme="dark"] .dg-loading {
    color: var(--text-secondary);
}

[data-theme="dark"] .dg-empty h3 {
    color: var(--text-primary);
}

[data-theme="dark"] .dg-spinner {
    border-color: var(--bg-tertiary);
    border-top-color: var(--primary);
}

[data-theme="dark"] .dg-clear-all-filters {
    background: transparent;
}

[data-theme="dark"] .dg-footer {
    background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
    border-color: var(--border-color, #3d3d3d);
}

[data-theme="dark"] .dg-footer-info {
    color: var(--text-secondary);
}

/* ==================== DATEPICKER MODERNO ==================== */

.datepicker-wrapper {
    position: relative;
    display: inline-block;
    width: 100%;
}

.datepicker-input {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px 14px;
    background: var(--bg-primary);
    border: 2px solid var(--border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s ease;
    min-height: 44px;
    font-size: var(--font-size-base);
    color: var(--text-primary);
}

.datepicker-input:hover {
    border-color: var(--primary-light);
    background: var(--bg-secondary);
}

.datepicker-input.active {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 107, 114, 128), 0.15);
}

.datepicker-input-text {
    flex: 1;
    font-weight: 500;
}

.datepicker-input-text .placeholder {
    color: var(--text-light);
    font-weight: 400;
}

.datepicker-input-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-secondary);
    margin-left: 8px;
    transition: color 0.2s ease;
}

.datepicker-input:hover .datepicker-input-icon,
.datepicker-input.active .datepicker-input-icon {
    color: var(--primary);
}

/* Calendario */
.datepicker-calendar {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    z-index: 1000;
    width: 300px;
    background: var(--bg-primary);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-xl), 0 0 0 1px rgba(0, 0, 0, 0.05);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px) scale(0.98);
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

.datepicker-calendar.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
}

.datepicker-calendar.position-top {
    top: auto;
    bottom: calc(100% + 8px);
    transform: translateY(10px) scale(0.98);
}

.datepicker-calendar.position-top.open {
    transform: translateY(0) scale(1);
}

/* Header del calendario */
.datepicker-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
}

.datepicker-title {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
}

.datepicker-month {
    font-size: var(--font-size-lg);
    font-weight: 600;
}

.datepicker-year {
    font-size: var(--font-size-sm);
    opacity: 0.85;
}

.datepicker-nav {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    background: rgba(255, 255, 255, 0.15);
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s ease;
    color: white;
}

.datepicker-nav:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: scale(1.05);
}

.datepicker-nav:active {
    transform: scale(0.95);
}

/* Días de la semana */
.datepicker-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: 12px 12px 8px;
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--border);
}

.datepicker-weekdays span {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Días del mes */
.datepicker-days {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: 8px 12px;
    gap: 4px;
}

.datepicker-day {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    margin: auto;
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--text-primary);
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.15s ease;
    position: relative;
}

.datepicker-day:hover:not(.disabled):not(.selected) {
    background: var(--bg-tertiary);
    color: var(--primary);
}

.datepicker-day.other-month {
    color: var(--text-light);
    opacity: 0.5;
}

.datepicker-day.today {
    background: var(--accent);
    color: var(--primary-dark);
    font-weight: 600;
}

.datepicker-day.today::after {
    content: '';
    position: absolute;
    bottom: 4px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: var(--primary);
    border-radius: 50%;
}

.datepicker-day.selected {
    background: var(--primary);
    color: white;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(var(--primary-rgb, 107, 114, 128), 0.3);
}

.datepicker-day.selected::after {
    display: none;
}

.datepicker-day.disabled {
    color: var(--text-light);
    opacity: 0.4;
    cursor: not-allowed;
}

/* Footer del calendario */
.datepicker-footer {
    display: flex;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--bg-secondary);
    border-top: 1px solid var(--border);
    gap: 8px;
}

.datepicker-btn {
    flex: 1;
    padding: 8px 16px;
    font-size: var(--font-size-sm);
    font-weight: 500;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s ease;
}

.datepicker-today {
    background: var(--primary);
    color: white;
}

.datepicker-today:hover {
    background: var(--primary-dark);
    transform: translateY(-1px);
}

.datepicker-clear {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.datepicker-clear:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--text-light);
}

/* Animaciones */
@keyframes datepicker-fade-in {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .datepicker-calendar {
        width: calc(100vw - 32px);
        max-width: 320px;
        left: 50%;
        transform: translateX(-50%) translateY(-10px) scale(0.98);
    }

    .datepicker-calendar.open {
        transform: translateX(-50%) translateY(0) scale(1);
    }

    .datepicker-calendar.position-top {
        transform: translateX(-50%) translateY(10px) scale(0.98);
    }

    .datepicker-calendar.position-top.open {
        transform: translateX(-50%) translateY(0) scale(1);
    }

    .datepicker-day {
        width: 38px;
        height: 38px;
    }
}

/* ==================== DATEPICKER - MODO OSCURO ==================== */

[data-theme="dark"] .datepicker-input {
    background: var(--bg-secondary);
    border-color: var(--border);
    color: var(--text-primary);
}

[data-theme="dark"] .datepicker-input:hover {
    background: var(--bg-tertiary);
    border-color: var(--primary-light);
}

[data-theme="dark"] .datepicker-input.active {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(var(--primary-rgb, 107, 114, 128), 0.2);
}

[data-theme="dark"] .datepicker-input-text .placeholder {
    color: var(--text-light);
}

[data-theme="dark"] .datepicker-input-icon {
    color: var(--text-light);
}

[data-theme="dark"] .datepicker-calendar {
    background: var(--bg-secondary);
    box-shadow: var(--shadow-xl), 0 0 0 1px rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .datepicker-weekdays {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .datepicker-weekdays span {
    color: var(--text-light);
}

[data-theme="dark"] .datepicker-day {
    color: var(--text-primary);
}

[data-theme="dark"] .datepicker-day:hover:not(.disabled):not(.selected) {
    background: var(--bg-tertiary);
    color: var(--primary-light);
}

[data-theme="dark"] .datepicker-day.other-month {
    color: var(--text-light);
}

[data-theme="dark"] .datepicker-day.today {
    background: rgba(var(--primary-rgb, 107, 114, 128), 0.2);
    color: var(--primary-light);
}

[data-theme="dark"] .datepicker-day.today::after {
    background: var(--primary-light);
}

[data-theme="dark"] .datepicker-day.selected {
    background: var(--primary);
    color: white;
}

[data-theme="dark"] .datepicker-day.disabled {
    color: var(--text-light);
}

[data-theme="dark"] .datepicker-footer {
    background: var(--bg-tertiary);
    border-color: var(--border);
}

[data-theme="dark"] .datepicker-clear {
    background: var(--bg-secondary);
    color: var(--text-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .datepicker-clear:hover {
    background: var(--bg-primary);
    color: var(--text-primary);
    border-color: var(--text-light);
}

/* ==================== BOTONES CON ICONOS UNIFICADOS ==================== */

/* Botón base con icono */
.btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 38px;
    height: 38px;
    min-width: 38px;
    min-height: 38px;
    padding: 0;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    flex-shrink: 0;
}

.btn-icon svg {
    width: 18px !important;
    height: 18px !important;
    min-width: 18px;
    min-height: 18px;
    stroke-width: 2 !important;
    flex-shrink: 0;
}

/* Tooltip para botones con icono */
.btn-icon[title]::after {
    content: attr(title);
    position: absolute;
    bottom: calc(100% + 8px);
    left: 50%;
    transform: translateX(-50%);
    padding: 6px 10px;
    background: var(--dark);
    color: white;
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
    border-radius: var(--radius-sm);
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1000;
    pointer-events: none;
}

.btn-icon[title]::before {
    content: '';
    position: absolute;
    bottom: calc(100% + 2px);
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-top-color: var(--dark);
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    z-index: 1000;
}

.btn-icon[title]:hover::after,
.btn-icon[title]:hover::before {
    opacity: 1;
    visibility: visible;
}

/* Variantes de botones con icono */
.btn-icon-primary {
    background: var(--primary);
    color: white;
}

.btn-icon-primary:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.btn-icon-primary svg {
    stroke: white;
    fill: none;
}

.btn-icon-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: 1px solid var(--border);
}

.btn-icon-secondary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border-color: var(--text-light);
}

.btn-icon-secondary svg {
    stroke: currentColor;
    fill: none;
}

.btn-icon-success {
    background: var(--success);
    color: white;
}

.btn-icon-success:hover {
    background: #0d9668;
    transform: translateY(-2px);
}

.btn-icon-success svg {
    stroke: white;
    fill: none;
}

.btn-icon-danger {
    background: var(--danger);
    color: white;
}

.btn-icon-danger:hover {
    background: #dc2626;
    transform: translateY(-2px);
}

.btn-icon-danger svg {
    stroke: white;
    fill: none;
}

.btn-icon-warning {
    background: var(--warning);
    color: white;
}

.btn-icon-warning:hover {
    background: #d97706;
    transform: translateY(-2px);
}

.btn-icon-warning svg {
    stroke: white;
    fill: none;
}

/* Botón ghost (transparente) */
.btn-icon-ghost {
    background: transparent;
    color: var(--text-secondary);
}

.btn-icon-ghost:hover {
    background: var(--bg-tertiary);
    color: var(--primary);
}

.btn-icon-ghost svg {
    stroke: currentColor;
    fill: none;
}

/* Tamaños de botones */
.btn-icon-sm {
    width: 32px;
    height: 32px;
}

.btn-icon-sm svg {
    width: 16px;
    height: 16px;
}

.btn-icon-lg {
    width: 44px;
    height: 44px;
}

.btn-icon-lg svg {
    width: 20px;
    height: 20px;
}

/* Grupo de botones con iconos */
.btn-icon-group {
    display: inline-flex;
    gap: 8px;
    align-items: center;
}

/* Botón con icono + texto (variante compacta) */
.btn-icon-text {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border: none;
    border-radius: var(--radius);
    cursor: pointer;
    font-size: var(--font-size-sm);
    font-weight: 500;
    transition: all 0.2s ease;
}

.btn-icon-text svg {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
}

/* ==================== BOTONES ICONO - MODO OSCURO ==================== */

[data-theme="dark"] .btn-icon[title]::after {
    background: var(--bg-tertiary);
    border: 1px solid var(--border);
}

[data-theme="dark"] .btn-icon[title]::before {
    border-top-color: var(--bg-tertiary);
}

[data-theme="dark"] .btn-icon-secondary {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .btn-icon-secondary:hover {
    background: var(--bg-secondary);
    color: var(--text-primary);
}

[data-theme="dark"] .btn-icon-ghost:hover {
    background: var(--bg-tertiary);
}

/* ==================== MODAL INFO DE CONTEXTO ==================== */

.context-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: contextFadeIn 0.2s ease-out;
}

@keyframes contextFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes contextSlideIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.context-modal {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    max-width: 520px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    animation: contextSlideIn 0.3s ease-out;
}

.context-modal-header {
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 24px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.context-modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
}

.context-modal-header h3 svg {
    width: 22px;
    height: 22px;
}

.context-modal-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background 0.2s;
}

.context-modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.context-modal-close svg {
    width: 18px;
    height: 18px;
}

.context-modal-body {
    padding: 20px 24px;
    overflow-y: auto;
    max-height: calc(85vh - 70px);
}

.context-section {
    margin-bottom: 20px;
}

.context-section:last-child {
    margin-bottom: 0;
}

.context-section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--border);
}

.context-section-icon {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
}

.context-section-icon.user { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); }
.context-section-icon.session { background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); }
.context-section-icon.database { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
.context-section-icon.storage { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }

.context-section-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.context-card {
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 14px 16px;
}

.context-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
}

.context-row:last-child {
    border-bottom: none;
    padding-bottom: 0;
}

.context-row:first-child {
    padding-top: 0;
}

.context-label {
    font-size: 0.8rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.context-value {
    font-size: 0.85rem;
    color: var(--text-primary);
    font-weight: 600;
    font-family: 'SF Mono', 'Fira Code', 'Consolas', monospace;
    background: var(--bg-tertiary);
    padding: 4px 10px;
    border-radius: 6px;
    max-width: 60%;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.context-value.success {
    background: rgba(16, 185, 129, 0.15);
    color: #059669;
}

.context-value.error {
    background: rgba(239, 68, 68, 0.15);
    color: #dc2626;
}

.context-value.na {
    color: var(--text-light);
    font-style: italic;
}

.context-status-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.context-status-badge.cached {
    background: rgba(16, 185, 129, 0.15);
    color: #059669;
}

.context-status-badge.not-cached {
    background: rgba(239, 68, 68, 0.15);
    color: #dc2626;
}

/* Dark mode para modal de contexto */
[data-theme="dark"] .context-modal {
    background: var(--bg-primary);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
}

[data-theme="dark"] .context-section-title {
    color: var(--text-primary);
}

[data-theme="dark"] .context-card {
    background: var(--bg-secondary);
    border-color: var(--border);
}

[data-theme="dark"] .context-row {
    border-color: var(--border);
}

[data-theme="dark"] .context-value {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

[data-theme="dark"] .context-value.success {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
}

[data-theme="dark"] .context-value.error {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
}

[data-theme="dark"] .context-status-badge.cached {
    background: rgba(16, 185, 129, 0.2);
    color: #34d399;
}

[data-theme="dark"] .context-status-badge.not-cached {
    background: rgba(239, 68, 68, 0.2);
    color: #f87171;
}

/* Responsive para modal de contexto */
@media (max-width: 480px) {
    .context-modal {
        width: 95%;
        max-height: 90vh;
    }

    .context-modal-header {
        padding: 16px 18px;
    }

    .context-modal-body {
        padding: 16px 18px;
    }

    .context-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 6px;
    }

    .context-value {
        max-width: 100%;
    }
}

/* ==================== MODAL CAMBIO DE ESTADO ==================== */
.status-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.status-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
}

.status-modal-content {
    position: relative;
    background: white;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    width: 90%;
    max-width: 360px;
    animation: modalSlideIn 0.2s ease;
}

.status-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border-radius: 12px 12px 0 0;
}

.status-modal-header h3 {
    margin: 0;
    font-size: 1.1rem;
    font-weight: 600;
}

.status-modal-header .modal-close {
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: white;
    font-size: 1.3rem;
    cursor: pointer;
    padding: 0;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
}

.status-modal-header .modal-close:hover {
    background: rgba(255, 255, 255, 0.3);
}

.status-modal-body {
    padding: 20px;
}

.status-modal-info {
    text-align: center;
    margin-bottom: 16px;
    font-size: 0.95rem;
    color: var(--text-secondary);
}

.status-modal-info span {
    font-weight: 500;
}

.status-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.status-option {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border: 2px solid var(--border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
}

.status-option:hover {
    border-color: var(--primary-light);
    background: var(--bg-secondary);
}

.status-option input[type="radio"] {
    width: 18px;
    height: 18px;
    accent-color: var(--primary);
    cursor: pointer;
}

.status-option input[type="radio"]:checked + .status-badge {
    transform: scale(1.05);
}

.status-option:has(input:checked) {
    border-color: var(--primary);
    background: var(--accent);
}

.status-modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 16px 20px;
    border-top: 1px solid var(--border);
}

.status-modal-footer .btn-secondary {
    padding: 8px 16px;
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border);
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
}

.status-modal-footer .btn-secondary:hover {
    background: var(--bg-tertiary);
}

.status-modal-footer .btn-primary {
    padding: 8px 16px;
    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 500;
}

.status-modal-footer .btn-primary:hover {
    filter: brightness(1.1);
}

/* Dark mode para modal de estado */
[data-theme="dark"] .status-modal-content {
    background: var(--bg-secondary);
}

[data-theme="dark"] .status-modal-body {
    background: var(--bg-secondary);
}

[data-theme="dark"] .status-option {
    border-color: var(--border);
}

[data-theme="dark"] .status-option:hover {
    background: var(--bg-tertiary);
}

[data-theme="dark"] .status-option:has(input:checked) {
    background: rgba(var(--primary-rgb, 255, 67, 56), 0.15);
}

[data-theme="dark"] .status-modal-footer {
    border-top-color: var(--border);
}